!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=163)}([function(e,t){e.exports=React},function(e,t){e.exports=i18n},function(e,t){var n=Array.isArray;e.exports=n},function(e,t){e.exports=ReactRedux},function(e,t){e.exports=Injector},function(e,t){e.exports=ReactDom},function(e,t){e.exports=Redux},function(e,t){e.exports=jQuery},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}e.exports=n},function(e,t,n){var r=n(125),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},function(e,t,n){function r(e){return null!=e&&i(e.length)&&!o(e)}var o=n(51),i=n(74);e.exports=r},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default={ACTIONS:{CREATE_FOLDER:"create-folder",EDIT_FILE:"edit"},MOVE_SUCCESS_DURATION:3e3,CSS_TRANSITION_TIME:300,SMALL_THUMBNAIL_HEIGHT:60,SMALL_THUMBNAIL_WIDTH:60,THUMBNAIL_HEIGHT:150,THUMBNAIL_WIDTH:200,BULK_ACTIONS:[{value:"delete",label:o.default._t("AssetAdmin.BULK_ACTIONS_DELETE","Delete"),className:"font-icon-trash",destructive:!0,callback:null,canApply:function(e){return e.every(function(e){return e&&e.canDelete})},confirm:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return new Promise(function(t,n){if(e.filter(function(e){return"folder"===e.type&&e.filesInUseCount>0}).length)return alert(o.default._t("AssetAdmin.BULK_ACTIONS_DELETE_FOLDER","These folders contain files which are currently in use, you must move or delete their contents before you can delete the folder.")),void n("cancelled");var r=e.filter(function(e){return"folder"!==e.type&&e.inUseCount>0}),i=o.default._t("AssetAdmin.BULK_ACTIONS_DELETE_CONFIRM","Are you sure you want to delete these files?");1===e.length&&1===r.length?i=o.default.sprintf(o.default._t("AssetAdmin.BULK_ACTIONS_DELETE_SINGLE_CONFIRM","This file is currently used in %s place(s), are you sure you want to delete it?"),e[0].inUseCount):r.length>0&&(i=o.default.sprintf(o.default._t("AssetAdmin.BULK_ACTIONS_DELETE_MULTI_CONFIRM","There are %s files currently in use, are you sure you want to delete these files?"),r.length)),r.length>0&&(i+="\n\n",i+=o.default._t("AssetAdmin.BULK_ACTIONS_DELETE_WARNING","Ensure files are removed from content areas prior to deleting them, otherwise they will appear as broken links.")),confirm(i)?t():n("cancelled")})})},{value:"edit",label:o.default._t("AssetAdmin.BULK_ACTIONS_EDIT","Edit"),className:"font-icon-edit",destructive:!1,canApply:function(e){return 1===e.length},callback:null},{value:"move",label:o.default._t("AssetAdmin.BULK_ACTIONS_MOVE","Move"),className:"font-icon-folder-move",canApply:function(e){return e.every(function(e){return e&&e.canEdit})},destructive:!1,callback:null},{value:"publish",label:o.default._t("AssetAdmin.BULK_ACTIONS_PUBLISH","Publish"),className:"font-icon-rocket",destructive:!1,callback:null,canApply:function(e){return e.some(function(e){return e&&!e.published})&&e.every(function(e){return e.canEdit&&"folder"!==e.type})},confirm:null},{value:"unpublish",label:o.default._t("AssetAdmin.BULK_ACTIONS_UNPUBLISH","Unpublish"),className:"font-icon-cancel-circled",destructive:!1,callback:null,canApply:function(e){return e.some(function(e){return e.published})&&e.every(function(e){return e.canEdit&&"folder"!==e.type})},confirm:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return new Promise(function(t,n){var r=e.filter(function(e){return e.inUseCount>0}),i=o.default._t("AssetAdmin.BULK_ACTIONS_UNPUBLISH_CONFIRM","Are you sure you want to unpublish these files?");1===e.length&&1===r.length?i=o.default.sprintf(o.default._t("AssetAdmin.BULK_ACTIONS_UNPUBLISH_SINGLE_CONFIRM","This file is currently used in %s place(s), are you sure you want to unpublish it?"),e[0].inUseCount):r.length>0&&(i=o.default.sprintf(o.default._t("AssetAdmin.BULK_ACTIONS_UNPUBLISH_MULTI_CONFIRM","There are %s files currently in use, are you sure you want to unpublish these files?"),r.length)),confirm(i)?t():n("cancelled")})})}],BULK_ACTIONS_PLACEHOLDER:o.default._t("AssetAdmin.BULK_ACTIONS_PLACEHOLDER"),SPACE_KEY_CODE:32,RETURN_KEY_CODE:13,DEFAULT_PREVIEW:"framework/client/dist/images/app_icons/generic_92.png",MODAL_MOVE:"MODAL_MOVE"}},function(e,t,n){function r(e){return s(e)?o(e):i(e)}var o=n(107),i=n(116),s=n(10);e.exports=r},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t){e.exports=ReactApollo},,function(e,t,n){function r(e){return null==e?void 0===e?l:a:u&&u in Object(e)?i(e):s(e)}var o=n(22),i=n(276),s=n(304),a="[object Null]",l="[object Undefined]",u=o?o.toStringTag:void 0;e.exports=r},function(e,t,n){function r(e,t,n,r){var s=!n;n||(n={});for(var a=-1,l=t.length;++a<l;){var u=t[a],p=r?r(n[u],e[u],u,n,e):void 0;void 0===p&&(p=e[u]),s?i(n,u,p):o(n,u,p)}return n}var o=n(30),i=n(109);e.exports=r},function(e,t,n){function r(e,t){var n=i(e,t);return o(n)?n:void 0}var o=n(236),i=n(277);e.exports=r},function(e,t,n){function r(e){if("string"==typeof e||o(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}var o=n(25),i=1/0;e.exports=r},function(e,t){e.exports=InsertMediaModal},function(e,t,n){var r=n(9),o=r.Symbol;e.exports=o},function(e,t,n){function r(e,t){return s(i(e,t,o),e+"")}var o=n(35),i=n(133),s=n(135);e.exports=r},function(e,t,n){function r(e,t){return o(e)?e:i(e,t)?[e]:s(a(e))}var o=n(2),i=n(70),s=n(136),a=n(77);e.exports=r},function(e,t,n){function r(e){return"symbol"==typeof e||i(e)&&o(e)==s}var o=n(17),i=n(14),s="[object Symbol]";e.exports=r},function(e,t){e.exports=FormBuilderModal},function(e,t){e.exports=GraphQLTag},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.PropTypes.shape({url:r.PropTypes.string,limit:r.PropTypes.number,imageRetry:r.PropTypes.shape({minRetry:r.PropTypes.number,maxRetry:r.PropTypes.number,expiry:r.PropTypes.number}),form:r.PropTypes.object,dropzoneOptions:r.PropTypes.object});t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(143),s=n(138),a=n(72),l=n(337),u=n(319),p=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],n=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],o=arguments.length<=2||void 0===arguments[2]?"children":arguments[2],i=arguments.length<=3||void 0===arguments[3]?[]:arguments[3],s=arguments.length<=4||void 0===arguments[4]?[]:arguments[4];r(this,e),this.allColumns=t,this.filteredColumns=n,this.childrenColumnName=o,this.columnMetadata=i,this.metadataColumns=s}return o(e,[{key:"getMetadataColumns",value:function(){var e=i(s(this.columnMetadata,{visible:!1}),function(e){return e.columnName});return e.indexOf(this.childrenColumnName)<0&&e.push(this.childrenColumnName),e.concat(this.metadataColumns)}},{key:"getVisibleColumnCount",value:function(){return this.getColumns().length}},{key:"getColumnMetadataByName",value:function(e){return a(this.columnMetadata,{columnName:e})}},{key:"hasColumnMetadata",value:function(){return null!==this.columnMetadata&&this.columnMetadata.length>0}},{key:"getMetadataColumnProperty",value:function(e,t,n){var r=this.getColumnMetadataByName(e);return void 0===r||null===r?n:r.hasOwnProperty(t)?r[t]:n}},{key:"orderColumns",value:function(e){var t=this;return l(e,function(e){var n=a(t.columnMetadata,{columnName:e});return void 0===n||null===n||isNaN(n.order)?100:n.order})}},{key:"getColumns",value:function(){var e=0===this.filteredColumns.length?this.allColumns:this.filteredColumns;return e=u(e,this.metadataColumns),e=this.orderColumns(e)}}]),e}();e.exports=p},function(e,t,n){function r(e,t,n){var r=e[t];a.call(e,t)&&i(r,n)&&(void 0!==n||t in e)||o(e,t,n)}var o=n(109),i=n(34),s=Object.prototype,a=s.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){return"function"==typeof e?e:null==e?s:"object"==typeof e?a(e)?i(e[0],e[1]):o(e):l(e)}var o=n(239),i=n(240),s=n(35),a=n(2),l=n(144);e.exports=r},function(e,t){function n(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),n=n>o?o:n,n<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i}e.exports=n},function(e,t){function n(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}var r=Object.prototype;e.exports=n},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){function r(e){var t=o(e),n=t%1;return t===t?n?t-n:t:0}var o=n(340);e.exports=r},function(e,t){e.exports=DataFormat},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.folder=t.file=t.fileInterface=void 0;var o=r(["\n  fragment FileInterfaceFields on FileInterface {\n    canDelete\n    canEdit\n    canView\n    category\n    exists\n    filename\n    id\n    lastEdited\n    name\n    parentId\n    title\n    type\n    url\n  }\n"],["\n  fragment FileInterfaceFields on FileInterface {\n    canDelete\n    canEdit\n    canView\n    category\n    exists\n    filename\n    id\n    lastEdited\n    name\n    parentId\n    title\n    type\n    url\n  }\n"]),i=r(["\n  fragment FileFields on File {\n    draft\n    extension\n    published\n    size\n    smallThumbnail\n    thumbnail\n    inUseCount\n  }\n"],["\n  fragment FileFields on File {\n    draft\n    extension\n    published\n    size\n    smallThumbnail\n    thumbnail\n    inUseCount\n  }\n"]),s=r(["\n  fragment FolderFields on Folder {\n    filesInUseCount\n  }\n"],["\n  fragment FolderFields on Folder {\n    filesInUseCount\n  }\n"]),a=n(27),l=function(e){return e&&e.__esModule?e:{default:e}}(a),u=(0,l.default)(o),p=(0,l.default)(i),c=(0,l.default)(s);t.fileInterface=u,t.file=p,t.folder=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.PropTypes.shape({canEdit:r.PropTypes.bool,canDelete:r.PropTypes.bool,canView:r.PropTypes.bool,exists:r.PropTypes.bool,type:r.PropTypes.string,smallThumbnail:r.PropTypes.string,thumbnail:r.PropTypes.string,width:r.PropTypes.number,height:r.PropTypes.number,category:r.PropTypes.oneOfType([r.PropTypes.bool,r.PropTypes.string]),id:r.PropTypes.number,inUseCount:r.PropTypes.number,url:r.PropTypes.string,title:r.PropTypes.string,progress:r.PropTypes.number});t.default=o},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var o=n(290),i=n(291),s=n(292),a=n(293),l=n(294);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=s,r.prototype.has=a,r.prototype.set=l,e.exports=r},function(e,t,n){function r(e,t){for(var n=e.length;n--;)if(o(e[n][0],t))return n;return-1}var o=n(34);e.exports=r},function(e,t,n){function r(e,t){t=o(t,e);for(var n=0,r=t.length;null!=e&&n<r;)e=e[i(t[n++])];return n&&n==r?e:void 0}var o=n(24),i=n(20);e.exports=r},function(e,t){function n(e){return function(t){return e(t)}}e.exports=n},function(e,t,n){function r(e,t){var n=e.__data__;return o(t)?n["string"==typeof t?"string":"hash"]:n.map}var o=n(288);e.exports=r},function(e,t,n){var r=n(216),o=n(59),i=n(218),s=n(219),a=n(220),l=n(17),u=n(137),p=u(r),c=u(o),d=u(i),f=u(s),h=u(a),m=l;(r&&"[object DataView]"!=m(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=m(new o)||i&&"[object Promise]"!=m(i.resolve())||s&&"[object Set]"!=m(new s)||a&&"[object WeakMap]"!=m(new a))&&(m=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case p:return"[object DataView]";case c:return"[object Map]";case d:return"[object Promise]";case f:return"[object Set]";case h:return"[object WeakMap]"}return t}),e.exports=m},function(e,t){function n(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&e<t}var r=9007199254740991,o=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t,n){var r=n(19),o=r(Object,"create");e.exports=o},function(e,t,n){var r=n(30),o=n(18),i=n(121),s=n(10),a=n(33),l=n(13),u=Object.prototype,p=u.hasOwnProperty,c=i(function(e,t){if(a(t)||s(t))return void o(t,l(t),e);for(var n in t)p.call(t,n)&&r(e,n,t[n])});e.exports=c},function(e,t,n){var r=n(232),o=n(14),i=Object.prototype,s=i.hasOwnProperty,a=i.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return o(e)&&s.call(e,"callee")&&!a.call(e,"callee")};e.exports=l},function(e,t,n){(function(e){var r=n(9),o=n(338),i="object"==typeof t&&t&&!t.nodeType&&t,s=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=s&&s.exports===i,l=a?r.Buffer:void 0,u=l?l.isBuffer:void 0,p=u||o;e.exports=p}).call(t,n(52)(e))},function(e,t,n){function r(e){if(!i(e))return!1;var t=o(e);return t==a||t==l||t==s||t==u}var o=n(17),i=n(11),s="[object AsyncFunction]",a="[object Function]",l="[object GeneratorFunction]",u="[object Proxy]";e.exports=r},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){e.exports=DeepFreezeStrict},function(e,t){e.exports=ReactDND},function(e,t){e.exports=SchemaActions},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),p=r(u),c=n(5),d=r(c),f=n(1),h=r(f),m=n(205),g=r(m),y=n(7),v=r(y),b=n(37),_=0,E=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.dropzone=null,n.dragging=!1,n.handleAccept=n.handleAccept.bind(n),n.handleAddedFile=n.handleAddedFile.bind(n),n.handleDragEnter=n.handleDragEnter.bind(n),n.handleDragLeave=n.handleDragLeave.bind(n),n.handleDrop=n.handleDrop.bind(n),n.handleUploadProgress=n.handleUploadProgress.bind(n),n.handleError=n.handleError.bind(n),n.handleSending=n.handleSending.bind(n),n.handleSuccess=n.handleSuccess.bind(n),n.loadImage=n.loadImage.bind(n),n.handleMaxFilesExceeded=n.handleMaxFilesExceeded.bind(n),n}return s(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.getDefaultOptions(),t=this.props.uploadSelector;if(!t&&this.props.uploadButton&&(t=".asset-dropzone__upload-button"),t){var n=(0,v.default)(d.default.findDOMNode(this)).find(t);n&&n.length&&(e.clickable=n.toArray())}this.dropzone=new g.default(d.default.findDOMNode(this),Object.assign({},e,this.props.options));var r=this.props.name;r&&this.dropzone.hiddenFileInput.classList.add("dz-input-"+r),void 0!==this.props.promptOnRemove&&this.setPromptOnRemove(this.props.promptOnRemove)}},{key:"componentWillReceiveProps",value:function(e){e.canUpload?this.dropzone&&this.dropzone.enable():this.dropzone.disable()}},{key:"componentWillUnmount",value:function(){this.dropzone.disable()}},{key:"getDefaultOptions",value:function(){return{accept:this.handleAccept,addedfile:this.handleAddedFile,dragenter:this.handleDragEnter,dragleave:this.handleDragLeave,drop:this.handleDrop,maxfilesexceeded:this.handleMaxFilesExceeded,uploadprogress:this.handleUploadProgress,dictDefaultMessage:h.default._t("AssetAdmin.DROPZONE_DEFAULT_MESSAGE","Drop files here to upload"),dictFallbackMessage:h.default._t("AssetAdmin.DROPZONE_FALLBACK_MESSAGE","Your browser does not support drag'n'drop file uploads."),dictFallbackText:h.default._t("AssetAdmin.DROPZONE_FALLBACK_TEXT","Please use the fallback form below to upload your files like in the olden days."),dictInvalidFileType:h.default._t("AssetAdmin.DROPZONE_INVALID_FILE_TYPE","You can't upload files of this type."),dictResponseError:h.default._t("AssetAdmin.DROPZONE_RESPONSE_ERROR","Server responded with an error."),dictCancelUpload:h.default._t("AssetAdmin.DROPZONE_CANCEL_UPLOAD","Cancel upload"),dictCancelUploadConfirmation:h.default._t("AssetAdmin.DROPZONE_CANCEL_UPLOAD_CONFIRMATION","Are you sure you want to cancel this upload?"),dictRemoveFile:h.default._t("AssetAdmin.DROPZONE_REMOVE_FILE","Remove file"),dictMaxFilesExceeded:h.default._t("AssetAdmin.DROPZONE_MAX_FILES_EXCEEDED","You can not upload any more files."),error:this.handleError,sending:this.handleSending,success:this.handleSuccess,thumbnailHeight:150,thumbnailWidth:200}}},{key:"getFileCategory",value:function(e){return e.split("/")[0]}},{key:"getLoadPreview",value:function(e){var t=this;return new Promise(function(n){var r=new FileReader;r.onload=function(r){if("image"===t.getFileCategory(e.type)){var o=new Image;n(t.loadImage(o,r.target.result))}else n({})},r.readAsDataURL(e)})}},{key:"getFileTitle",value:function(e){return e.replace(/[.][^.]+$/,"").replace(/-_/," ")}},{key:"setPromptOnRemove",value:function(e){this.dropzone.options.dictRemoveFileConfirmation=e}},{key:"handleDragEnter",value:function(e){this.props.canUpload&&(this.dragging=!0,this.forceUpdate(),"function"==typeof this.props.onDragEnter&&this.props.onDragEnter(e))}},{key:"handleDragLeave",value:function(e){var t=d.default.findDOMNode(this);this.props.canUpload&&e.target===t&&(this.dragging=!1,this.forceUpdate(),"function"==typeof this.props.onDragLeave&&this.props.onDragLeave(e,t))}},{key:"handleUploadProgress",value:function(e,t,n){"function"==typeof this.props.onUploadProgress&&this.props.onUploadProgress(e,t,n)}},{key:"handleDrop",value:function(e){this.dragging=!1,this.forceUpdate(),"function"==typeof this.props.onDrop&&this.props.onDrop(e)}},{key:"handleSending",value:function(e,t,n){var r=this;"function"==typeof this.props.updateFormData&&this.props.updateFormData(n),n.append("SecurityID",this.props.securityID),n.append("ParentID",this.props.folderId);var o=Object.assign({},t,{abort:function(){r.dropzone.cancelUpload(e),t.abort()}});"function"==typeof this.props.onSending&&this.props.onSending(e,o,n)}},{key:"handleMaxFilesExceeded",value:function(e){return"function"!=typeof this.props.onMaxFilesExceeded||this.props.onMaxFilesExceeded(e)}},{key:"generateQueuedId",value:function(){return _+=1}},{key:"handleAccept",value:function(e,t){return("function"!=typeof this.props.canFileUpload||this.props.canFileUpload(e))&&this.props.canUpload?t():t(h.default._t("AssetAdmin.DROPZONE_CANNOT_UPLOAD","Uploading not permitted."))}},{key:"handleAddedFile",value:function(e){var t=this;e._queuedId=this.generateQueuedId();var n={category:this.getFileCategory(e.type),filename:e.name,queuedId:e._queuedId,size:e.size,title:this.getFileTitle(e.name),extension:(0,b.getFileExtension)(e.name),type:e.type};return this.props.onAddedFile(n),this.getLoadPreview(e).then(function(e){var r={height:e.height,width:e.width,url:e.thumbnailURL,thumbnail:e.thumbnailURL,smallThumbnail:e.thumbnailURL};return"function"==typeof t.props.onPreviewLoaded&&t.props.onPreviewLoaded(n,r),a({},n,r)})}},{key:"loadImage",value:function(e,t){var n=this;return new Promise(function(r){var o=document.createElement("canvas"),i=o.getContext("2d");e.onload=function(){var t=2*n.props.preview.width,s=2*n.props.preview.height,a=e.naturalWidth/e.naturalHeight;e.naturalWidth<t||e.naturalHeight<s?(o.width=e.naturalWidth,o.height=e.naturalHeight):a<1?(o.width=t,o.height=t/a):(o.width=s*a,o.height=s),i.drawImage(e,0,0,o.width,o.height);var l=o.toDataURL("image/png");r({width:e.naturalWidth,height:e.naturalHeight,thumbnailURL:l})},e.src=t})}},{key:"handleError",value:function(e,t){this.dropzone.removeFile(e),this.props.onError(e,t)}},{key:"handleSuccess",value:function(e){this.dropzone.removeFile(e),this.props.onSuccess(e)}},{key:"render",value:function(){var e=["asset-dropzone"];this.props.className&&e.push(this.props.className);var t={className:"asset-dropzone__upload-button ss-ui-button font-icon-upload",type:"button"};return this.props.canUpload||(t.disabled=!0),!0===this.dragging&&e.push("dragging"),p.default.createElement("div",{className:e.join(" ")},this.props.uploadButton&&p.default.createElement("button",t,h.default._t("AssetAdmin.DROPZONE_UPLOAD")),this.props.children)}}]),t}(u.Component);E.propTypes={folderId:p.default.PropTypes.number.isRequired,onAccept:p.default.PropTypes.func,onAddedFile:p.default.PropTypes.func.isRequired,onDragEnter:p.default.PropTypes.func,onDragLeave:p.default.PropTypes.func,onDrop:p.default.PropTypes.func,onError:p.default.PropTypes.func.isRequired,onPreviewLoaded:p.default.PropTypes.func,onSending:p.default.PropTypes.func,onSuccess:p.default.PropTypes.func.isRequired,onMaxFilesExceeded:p.default.PropTypes.func,updateFormData:p.default.PropTypes.func,canFileUpload:p.default.PropTypes.func,options:p.default.PropTypes.shape({url:p.default.PropTypes.string.isRequired}),promptOnRemove:p.default.PropTypes.string,securityID:p.default.PropTypes.string.isRequired,uploadButton:p.default.PropTypes.bool,uploadSelector:p.default.PropTypes.string,canUpload:p.default.PropTypes.bool.isRequired,preview:p.default.PropTypes.shape({width:p.default.PropTypes.number,height:p.default.PropTypes.number}),className:p.default.PropTypes.string},E.defaultProps={uploadButton:!0},t.default=E},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){var n=t.sort,r=e.assetAdmin.gallery,o=r.selectedFiles,i=r.errorMessage,s=r.noticeMessage,a=r.enableDropzone,l=r.badges,u=r.concatenateSelect,p=r.loading,c=r.sorters;return!n&&c&&c[0]&&(n=c[0].field+","+c[0].direction),{selectedFiles:o,errorMessage:i,noticeMessage:s,enableDropzone:a,badges:l,concatenateSelect:u,loading:t.loading||p,queuedFiles:e.assetAdmin.queuedFiles,securityId:e.config.SecurityID,sorters:c,sort:n}}function p(e){return{actions:{gallery:(0,O.bindActionCreators)(B,e),queuedFiles:(0,O.bindActionCreators)(H,e)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.galleryViewDefaultProps=t.galleryViewPropTypes=t.Component=void 0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(7),h=o(f),m=n(1),g=o(m),y=n(0),v=o(y),b=n(5),_=o(b),E=n(150),S=o(E),C=n(354),P=o(C),w=n(3),O=n(6),T=n(56),F=o(T),I=n(165),A=o(I),x=n(183),D=o(x),N=n(182),k=o(N),R=n(12),L=o(R),U=n(353),M=o(U),j=n(58),B=r(j),G=n(95),H=r(G),q=n(187),z=o(q),V=n(89),W=o(V),K=n(15),Q=n(147),$=n(178),Y=o($),X=n(28),Z=o(X),J=n(181),ee=o(J),te=n(4),ne=function(e){function t(e){s(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleOpenFolder=n.handleOpenFolder.bind(n),n.handleOpenFile=n.handleOpenFile.bind(n),n.handleSelect=n.handleSelect.bind(n),n.handleAddedFile=n.handleAddedFile.bind(n),n.handlePreviewLoaded=n.handlePreviewLoaded.bind(n),n.handleCancelUpload=n.handleCancelUpload.bind(n),n.handleRemoveErroredUpload=n.handleRemoveErroredUpload.bind(n),n.handleUploadProgress=n.handleUploadProgress.bind(n),n.handleSending=n.handleSending.bind(n),n.handleSort=n.handleSort.bind(n),n.handleSetPage=n.handleSetPage.bind(n),n.handleSuccessfulUpload=n.handleSuccessfulUpload.bind(n),n.handleFailedUpload=n.handleFailedUpload.bind(n),n.handleClearSearch=n.handleClearSearch.bind(n),n.handleEnableDropzone=n.handleEnableDropzone.bind(n),n.handleMoveFiles=n.handleMoveFiles.bind(n),n.handleBulkEdit=n.handleBulkEdit.bind(n),n.handleBulkPublish=n.handleBulkPublish.bind(n),n.handleBulkUnpublish=n.handleBulkUnpublish.bind(n),n.handleBulkDelete=n.handleBulkDelete.bind(n),n.handleBulkMove=n.handleBulkMove.bind(n),n.handleGroupSelect=n.handleGroupSelect.bind(n),n.handleClearSelection=n.handleClearSelection.bind(n),n.toggleSelectConcat=n.toggleSelectConcat.bind(n),n}return l(t,e),d(t,[{key:"componentDidMount",value:function(){this.initSortDropdown(),window.addEventListener("keydown",this.toggleSelectConcat),window.addEventListener("keyup",this.toggleSelectConcat)}},{key:"componentWillReceiveProps",value:function(e){"tile"!==e.view&&this.getSortElement().off("change"),this.props.folderId!==e.folderId&&e.actions.queuedFiles.purgeUploadQueue()}},{key:"componentDidUpdate",value:function(){this.initSortDropdown()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.toggleSelectConcat),window.removeEventListener("keyup",this.toggleSelectConcat)}},{key:"getSortElement",value:function(){return(0,h.default)(_.default.findDOMNode(this)).find(".gallery__sort .dropdown")}},{key:"getSearchMessage",value:function(e){var t=[];e.name&&t.push(g.default._t("AssetAdmin.SEARCHRESULTSMESSAGEKEYWORDS","with keywords '{name}'")),e.lastEditedFrom&&e.lastEditedTo?t.push(g.default._t("AssetAdmin.SEARCHRESULTSMESSAGEEDITEDBETWEEN","last edited between '{lastEditedFrom}' and '{lastEditedTo}'")):e.lastEditedFrom?t.push(g.default._t("AssetAdmin.SEARCHRESULTSMESSAGEEDITEDFROM","last edited after '{lastEditedFrom}'")):e.lastEditedTo&&t.push(g.default._t("AssetAdmin.SEARCHRESULTSMESSAGEEDITEDTO","last edited before '{lastEditedTo}'")),e.appCategory&&t.push(g.default._t("AssetAdmin.SEARCHRESULTSMESSAGECATEGORY","categorised as '{appCategory}'")),e.currentFolderOnly&&this.props.folder.title&&t.push(g.default._t("AssetAdmin.SEARCHRESULTSMESSAGELIMIT","limited to the folder '{folder}'"));var n=[t.slice(0,-1).join(g.default._t("AssetAdmin.JOIN",",")+" "),t.slice(-1)].filter(function(e){return e}).join(" "+g.default._t("AssetAdmin.JOINLAST","and")+" ");if(""===n)return"";var r={parts:g.default.inject(n,Object.assign({folder:this.props.folder.title},e,{appCategory:e.appCategory?e.appCategory.toLowerCase():void 0}))};return g.default.inject(g.default._t("AssetAdmin.SEARCHRESULTSMESSAGE","Search results {parts}"),r)}},{key:"handleBulkDelete",value:function(e){var t=this;return this.props.actions.gallery.setLoading(!0),this.props.onDelete(e.map(function(e){return e.id})).then(function(n){t.props.actions.gallery.setLoading(!1);var r=n.filter(function(e){return e}).length;r!==e.length?(t.props.actions.gallery.setErrorMessage(g.default.sprintf(g.default._t("AssetAdmin.BULK_ACTIONS_DELETE_FAIL","%s folders/files were successfully deleted, but %s files were not able to be deleted."),r,e.length-r)),t.props.actions.gallery.setNoticeMessage(null)):(t.props.actions.gallery.setNoticeMessage(g.default.sprintf(g.default._t("AssetAdmin.BULK_ACTIONS_DELETE_SUCCESS","%s folders/files were successfully deleted."),r)),t.props.actions.gallery.setErrorMessage(null),t.props.actions.gallery.deselectFiles())})}},{key:"handleBulkPublish",value:function(e){var t=this,n=e.map(function(e){return e.id});return n.length?(this.props.actions.gallery.setLoading(!0),this.props.onPublish(n).then(function(e){t.props.actions.gallery.setLoading(!1),t.props.actions.gallery.setNoticeMessage(g.default.sprintf(g.default._t("AssetAdmin.BULK_ACTIONS_PUBLISH_SUCCESS","%s folders/files were successfully published."),e.length)),t.props.actions.gallery.setErrorMessage(null),t.props.actions.gallery.deselectFiles()})):(this.props.actions.gallery.deselectFiles(),Promise.resolve(!0))}},{key:"handleBulkUnpublish",value:function(e){var t=this,n=e.filter(function(e){return e.published}).map(function(e){return e.id});return n.length?(this.props.actions.gallery.setLoading(!0),this.props.onUnpublish(n).then(function(e){t.props.actions.gallery.setLoading(!1),t.props.actions.gallery.setNoticeMessage(g.default.sprintf(g.default._t("AssetAdmin.BULK_ACTIONS_UNPUBLISH_SUCCESS","%s folders/files were successfully unpublished."),e.length)),t.props.actions.gallery.setErrorMessage(null),t.props.actions.gallery.deselectFiles()})):(this.props.actions.gallery.deselectFiles(),Promise.resolve(!0))}},{key:"initSortDropdown",value:function(){if("tile"===this.props.view){var e=this.getSortElement();e.chosen({allow_single_deselect:!0,disable_search_threshold:20}),e.off("change"),e.on("change",function(){return S.default.Simulate.click(e.find(":selected")[0])})}}},{key:"handleSort",value:function(e){this.props.actions.queuedFiles.purgeUploadQueue(),this.props.onSort(e)}},{key:"handleSetPage",value:function(e){this.props.onSetPage(e)}},{key:"handleCancelUpload",value:function(e){e.xhr.abort(),this.props.actions.queuedFiles.removeQueuedFile(e.queuedId)}},{key:"handleRemoveErroredUpload",value:function(e){this.props.actions.queuedFiles.removeQueuedFile(e.queuedId)}},{key:"handleAddedFile",value:function(e){this.props.actions.queuedFiles.addQueuedFile(e)}},{key:"handlePreviewLoaded",value:function(e,t){this.props.actions.queuedFiles.updateQueuedFile(e.queuedId,t)}},{key:"handleSending",value:function(e,t){this.props.actions.queuedFiles.updateQueuedFile(e._queuedId,{xhr:t})}},{key:"handleUploadProgress",value:function(e,t){this.props.actions.queuedFiles.updateQueuedFile(e._queuedId,{progress:t})}},{key:"handleSuccessfulUpload",value:function(e){var t=JSON.parse(e.xhr.response);if(void 0!==t[0].error)return void this.handleFailedUpload(e);if(this.props.actions.queuedFiles.succeedUpload(e._queuedId,t[0]),this.props.onSuccessfulUpload&&this.props.onSuccessfulUpload(t),"admin"!==this.props.type&&!this.props.fileId&&0===this.props.queuedFiles.items.length){var n=t.pop();this.props.onOpenFile(n.id)}}},{key:"handleFailedUpload",value:function(e,t){this.props.actions.queuedFiles.failUpload(e._queuedId,t)}},{key:"itemIsSelected",value:function(e){return this.props.selectedFiles.indexOf(e)>-1}},{key:"toggleSelectConcat",value:function(e){this.props.actions.gallery.setConcatenateSelect(e.metaKey||e.ctrlKey)}},{key:"itemIsHighlighted",value:function(e){return this.props.fileId===e}},{key:"hasOpenedItem",value:function(){return!!this.props.fileId}},{key:"handleClearSearch",value:function(e){this.props.actions.gallery.deselectFiles(),this.handleOpenFolder(e,this.props.folder)}},{key:"handleGroupSelect",value:function(e){var t=this.props.actions.gallery,n=t.deselectFiles,r=t.selectFiles;this.props.concatenateSelect||n(null),r(e.filter(function(t,n){return e.indexOf(t)===n}))}},{key:"handleClearSelection",value:function(){this.props.actions.gallery.deselectFiles(null)}},{key:"handleOpenFolder",value:function(e,t){e.preventDefault(),this.props.actions.gallery.setErrorMessage(null),this.props.actions.gallery.setNoticeMessage(null),this.props.onOpenFolder(t.id)}},{key:"handleOpenFile",value:function(e,t){e.preventDefault(),null!==t.created&&this.props.onOpenFile(t.id,t)}},{key:"handleSelect",value:function(e,t){-1===this.props.selectedFiles.indexOf(t.id)?this.props.actions.gallery.selectFiles([t.id]):this.props.actions.gallery.deselectFiles([t.id])}},{key:"handleEnableDropzone",value:function(e){this.props.actions.gallery.setEnableDropzone(e)}},{key:"handleMoveFiles",value:function(e,t){var n=this;this.props.actions.files.moveFiles(e,t).then(function(){var r=L.default.MOVE_SUCCESS_DURATION,o="+"+t.length;n.props.actions.gallery.setFileBadge(e,o,"success",r),"function"==typeof n.props.onMoveFilesSuccess&&n.props.onMoveFilesSuccess(e,t)}).catch(function(){n.props.actions.gallery.setErrorMessage(g.default._t("AssetAdmin.FAILED_MOVE","There was an error moving the selected items."))})}},{key:"handleBulkEdit",value:function(e){this.props.onOpenFile(e[0].id)}},{key:"handleBulkMove",value:function(){this.props.actions.gallery.activateModal(L.default.MODAL_MOVE)}},{key:"renderSearchAlert",value:function(){var e=this.props.filters;if(!e||0===Object.keys(e).length)return null;var t=this.getSearchMessage(e);if(""===t)return null;var n=v.default.createElement("div",null,v.default.createElement("button",{onClick:this.handleClearSearch,className:"btn btn-info font-icon-cancel form-alert__btn--right"},g.default._t("AssetAdmin.SEARCHCLEARRESULTS","Clear results")),t);return v.default.createElement(M.default,{value:{react:n},type:"warning"})}},{key:"renderTransitionBulkActions",value:function(){return"admin"===this.props.type?v.default.createElement(P.default,{transitionName:"bulk-actions",transitionEnterTimeout:L.default.CSS_TRANSITION_TIME,transitionLeaveTimeout:L.default.CSS_TRANSITION_TIME},this.renderBulkActions()):null}},{key:"renderBulkActions",value:function(){var e=this,t=L.default.BULK_ACTIONS.map(function(t){if(!t.callback)switch(t.value){case"delete":return c({},t,{callback:e.handleBulkDelete});case"edit":return c({},t,{callback:e.handleBulkEdit});case"move":return c({},t,{callback:e.handleBulkMove});case"publish":return c({},t,{callback:e.handleBulkPublish});case"unpublish":return c({},t,{callback:e.handleBulkUnpublish});default:return t}return t}),n=[].concat(i(this.props.files),i(this.props.queuedFiles.items)),r=this.props.selectedFiles.map(function(e){return n.find(function(t){return t&&e===t.id})}).filter(function(e){return e});return r.length>0&&"admin"===this.props.type?v.default.createElement(A.default,{actions:t,items:r,key:r.length>0}):null}},{key:"renderGalleryView",value:function(){var e=this,t="table"===this.props.view?k.default:D.default,n=this.props.queuedFiles.items.filter(function(t){return!t.id||!e.props.files.find(function(e){return e.id===t.id})}).map(function(e){return Object.assign({},e,{uploading:!(e.id>0)})}),r=[].concat(i(n),i(this.props.files)).map(function(t){return Object.assign({},t||{},{selected:e.itemIsSelected(t.id),highlighted:e.itemIsHighlighted(t.id)})}),o=this.props,s=o.type,a=o.loading,l=o.page,u=o.totalCount,p=o.limit,c=o.sort,d=o.selectedFiles,f=o.badges,h={selectableItems:"admin"===s,files:r,loading:a,page:l,totalCount:u,limit:p,sort:c,selectedFiles:d,badges:f,onSort:this.handleSort,onSetPage:this.handleSetPage,onOpenFile:this.handleOpenFile,onOpenFolder:this.handleOpenFolder,onSelect:this.handleSelect,onCancelUpload:this.handleCancelUpload,onDropFiles:this.handleMoveFiles,onRemoveErroredUpload:this.handleRemoveErroredUpload,onEnableDropzone:this.handleEnableDropzone,sectionConfig:this.props.sectionConfig};return v.default.createElement(t,h)}},{key:"renderToolbar",value:function(){var e=this.props,t=e.GalleryToolbar,n=e.sort,r=e.view,o=e.folder,i=e.onCreateFolder,s=e.onOpenFolder,a=e.onViewChange,l={onMoveFiles:this.handleMoveFiles,onSort:this.handleSort,onCreateFolder:i,onOpenFolder:s,onViewChange:a,view:r,sort:n,folder:o};return v.default.createElement(t,l)}},{key:"render",value:function(){if(!this.props.folder)return this.props.errorMessage||this.props.graphQLErrors?v.default.createElement("div",{className:"gallery__error flexbox-area-grow"},v.default.createElement("div",{className:"gallery__error-message"},v.default.createElement("h3",null,g.default._t("AssetAdmin.DROPZONE_RESPONSE_ERROR","Server responded with an error.")),this.props.errorMessage&&v.default.createElement("p",null,this.props.errorMessage),this.props.graphQLErrors&&this.props.graphQLErrors.map(function(e,t){return v.default.createElement("p",{key:t},e)}))):this.props.loading?v.default.createElement("div",{className:"flexbox-area-grow"},v.default.createElement("div",{key:"overlay",className:"cms-content-loading-overlay ui-widget-overlay-light"}),v.default.createElement("div",{key:"spinner",className:"cms-content-loading-spinner"})):v.default.createElement("div",{className:"flexbox-area-grow"},v.default.createElement("div",{className:"editor__file-preview-message--file-missing m-t-3"},g.default._t("Admin.UNKNOWN_ERROR","An unknown error has occurred")));var e=v.default.createElement("div",{className:"gallery_messages"},this.props.errorMessage&&v.default.createElement(M.default,{value:this.props.errorMessage,type:"danger"}),this.props.noticeMessage&&v.default.createElement(M.default,{value:this.props.noticeMessage,type:"success"}),this.renderSearchAlert()),t={height:L.default.THUMBNAIL_HEIGHT,width:L.default.THUMBNAIL_WIDTH},n=c({url:this.props.createFileApiUrl,method:this.props.createFileApiMethod,paramName:"Upload",clickable:"#upload-button"},this.props.sectionConfig.dropzoneOptions),r=this.props.securityId,o=this.props.folder.canEdit&&this.props.enableDropzone,i=["panel","panel--padded","panel--scrollable","gallery__main","fill-height"];"insert"===this.props.type&&i.push("insert-media-modal__main");var s=i;return this.hasOpenedItem()&&s.push("gallery__main--has-opened-item"),v.default.createElement("div",{className:"flexbox-area-grow gallery__outer"},v.default.createElement(ee.default,{sectionConfig:this.props.sectionConfig,folderId:this.props.folderId,onSuccess:this.props.onMoveFilesSuccess,onOpenFolder:this.props.onOpenFolder}),this.renderTransitionBulkActions(),v.default.createElement(Y.default,{className:i.join(" ")},this.renderToolbar(),v.default.createElement(Q.SelectableGroup,{enabled:"tile"===this.props.view&&"admin"===this.props.type,className:"flexbox-area-grow fill-height gallery__main--selectable",onSelection:this.handleGroupSelect,onNonItemClick:this.handleClearSelection,preventDefault:!1,fixedPosition:!0},v.default.createElement(F.default,{name:"gallery-container",className:"flexbox-area-grow",canUpload:o,onAddedFile:this.handleAddedFile,onPreviewLoaded:this.handlePreviewLoaded,onError:this.handleFailedUpload,onSuccess:this.handleSuccessfulUpload,onSending:this.handleSending,onUploadProgress:this.handleUploadProgress,preview:t,folderId:this.props.folderId,options:n,securityID:r,uploadButton:!1},e,this.renderGalleryView()))),this.props.loading&&[v.default.createElement("div",{key:"overlay",className:"cms-content-loading-overlay ui-widget-overlay-light"}),v.default.createElement("div",{key:"spinner",className:"cms-content-loading-spinner"})])}}]),t}(y.Component),re={page:1,limit:15},oe={sectionConfig:Z.default,loading:y.PropTypes.bool,sort:y.PropTypes.string,files:y.PropTypes.arrayOf(y.PropTypes.shape({id:y.PropTypes.number,parent:y.PropTypes.shape({id:y.PropTypes.number})})).isRequired,selectedFiles:y.PropTypes.arrayOf(y.PropTypes.number),totalCount:y.PropTypes.number,page:y.PropTypes.number,limit:y.PropTypes.number,badges:y.PropTypes.arrayOf(y.PropTypes.shape({id:y.PropTypes.number,message:y.PropTypes.node,status:y.PropTypes.string})),onOpenFile:y.PropTypes.func.isRequired,onOpenFolder:y.PropTypes.func.isRequired,onSort:y.PropTypes.func.isRequired,onSetPage:y.PropTypes.func.isRequired},ie=Object.assign({},re,{selectableItems:!1}),se=Object.assign({},oe,{selectableItems:y.PropTypes.bool,onSelect:y.PropTypes.func,onCancelUpload:y.PropTypes.func,onDelete:v.default.PropTypes.func,onRemoveErroredUpload:y.PropTypes.func,onEnableDropzone:y.PropTypes.func});ne.defaultProps=Object.assign({},re,{type:"admin",view:"tile",enableDropzone:!0}),ne.propTypes=Object.assign({},oe,{onUploadSuccess:v.default.PropTypes.func,onCreateFolder:v.default.PropTypes.func,onMoveFilesSuccess:v.default.PropTypes.func,onDelete:v.default.PropTypes.func,onPublish:v.default.PropTypes.func,onUnpublish:v.default.PropTypes.func,type:y.PropTypes.oneOf(["insert-media","insert-link","select","admin"]),view:y.PropTypes.oneOf(["tile","table"]),dialog:y.PropTypes.bool,fileId:y.PropTypes.number,folderId:y.PropTypes.number.isRequired,folder:y.PropTypes.shape({id:y.PropTypes.number,title:y.PropTypes.string,parentId:y.PropTypes.number,canView:y.PropTypes.bool,canEdit:y.PropTypes.bool}),queuedFiles:y.PropTypes.shape({items:y.PropTypes.array.isRequired}),errorMessage:y.PropTypes.string,graphQLErrors:y.PropTypes.arrayOf(y.PropTypes.string),actions:y.PropTypes.object,securityId:y.PropTypes.string,onViewChange:y.PropTypes.func.isRequired,createFileApiUrl:y.PropTypes.string,createFileApiMethod:y.PropTypes.string,search:y.PropTypes.object,enableDropzone:y.PropTypes.bool,concatenateSelect:y.PropTypes.bool,GalleryToolbar:y.PropTypes.func,sorters:y.PropTypes.arrayOf(y.PropTypes.shape({field:y.PropTypes.string.isRequired,direction:y.PropTypes.oneOf(["asc","desc"]).isRequired,label:y.PropTypes.string.isRequired})).isRequired}),t.Component=ne,t.galleryViewPropTypes=se,t.galleryViewDefaultProps=ie,t.default=(0,O.compose)((0,te.inject)(["GalleryToolbar"],null,function(){return"AssetAdmin.Gallery"}),(0,w.connect)(u,p),W.default,z.default,function(e){return(0,K.withApollo)(e)})(ne)},function(e,t,n){"use strict";function r(e,t){return function(n){n({type:g.default.LOAD_FILE_SUCCESS,payload:{id:e,file:t}})}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){return t({type:g.default.SELECT_FILES,payload:{ids:e}})}}function i(e){return function(t){return t({type:g.default.CONCATENATE_SELECT,payload:!!e})}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){return t({type:g.default.DESELECT_FILES,payload:{ids:e}})}}function a(e){return function(t){return t({type:g.default.SET_NOTICE_MESSAGE,payload:{message:e}})}}function l(e){return function(t){return t({type:g.default.SET_ERROR_MESSAGE,payload:{message:e}})}}function u(e){return function(t){return t({type:g.default.SET_ENABLE_DROPZONE,payload:{enableDropzone:e}})}}function p(e){return function(t){t({type:g.default.CLEAR_FILE_BADGE,payload:{id:e}})}}function c(e,t,n,r){return function(o,i){var s=i(),a=s.assetAdmin,l=a.gallery.badges.find(function(t){return t.id===e});l&&l.timer&&clearTimeout(l.timer);var u=r>0?setTimeout(function(){return p(e)(o)},r):null;o({type:g.default.SET_FILE_BADGE,payload:{id:e,message:t,status:n,timer:u}})}}function d(e){return function(t){t({type:g.default.ACTIVATE_MODAL,payload:e})}}function f(){return function(e){e({type:g.default.DEACTIVATE_MODAL})}}function h(e){return function(t){t({type:g.default.SET_LOADING,payload:!!e})}}Object.defineProperty(t,"__esModule",{value:!0}),t.loadFile=r,t.selectFiles=o,t.setConcatenateSelect=i,t.deselectFiles=s,t.setNoticeMessage=a,t.setErrorMessage=l,t.setEnableDropzone=u,t.clearFileBadge=p,t.setFileBadge=c,t.activateModal=d,t.deactivateModal=f,t.setLoading=h;var m=n(90),g=function(e){return e&&e.__esModule?e:{default:e}}(m)},function(e,t,n){var r=n(19),o=n(9),i=r(o,"Map");e.exports=i},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var o=n(295),i=n(296),s=n(297),a=n(298),l=n(299);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=s,r.prototype.has=a,r.prototype.set=l,e.exports=r},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new o;++t<n;)this.add(e[t])}var o=n(60),i=n(306),s=n(307);r.prototype.add=r.prototype.push=i,r.prototype.has=s,e.exports=r},function(e,t,n){function r(e){var t=this.__data__=new o(e);this.size=t.size}var o=n(40),i=n(310),s=n(311),a=n(312),l=n(313),u=n(314);r.prototype.clear=i,r.prototype.delete=s,r.prototype.get=a,r.prototype.has=l,r.prototype.set=u,e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}e.exports=n},function(e,t,n){var r=n(112),o=n(267),i=o(r);e.exports=i},function(e,t,n){function r(e,t,n,s,a){var l=-1,u=e.length;for(n||(n=i),a||(a=[]);++l<u;){var p=e[l];t>0&&n(p)?t>1?r(p,t-1,n,s,a):o(a,p):s||(a[a.length]=p)}return a}var o=n(63),i=n(287);e.exports=r},function(e,t){function n(e,t){return e.has(t)}e.exports=n},function(e,t,n){function r(e){var t=new e.constructor(e.byteLength);return new o(t).set(new o(e)),t}var o=n(101);e.exports=r},function(e,t,n){var r=n(132),o=r(Object.getPrototypeOf,Object);e.exports=o},function(e,t,n){var r=n(104),o=n(145),i=Object.prototype,s=i.propertyIsEnumerable,a=Object.getOwnPropertySymbols,l=a?function(e){return null==e?[]:(e=Object(e),r(a(e),function(t){return s.call(e,t)}))}:o;e.exports=l},function(e,t,n){function r(e,t){if(o(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||a.test(e)||!s.test(e)||null!=t&&e in Object(t)}var o=n(2),i=n(25),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=r},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}e.exports=n},function(e,t,n){var r=n(269),o=n(322),i=r(o);e.exports=i},function(e,t,n){function r(e){return i(e)&&o(e)}var o=n(10),i=n(14);e.exports=r},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}var r=9007199254740991;e.exports=n},function(e,t,n){var r=n(237),o=n(43),i=n(303),s=i&&i.isTypedArray,a=s?o(s):r;e.exports=a},function(e,t,n){function r(e){return s(e)?o(e,!0):i(e)}var o=n(107),i=n(238),s=n(10);e.exports=r},function(e,t,n){function r(e){return null==e?"":o(e)}var o=n(250);e.exports=r},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=Badge},function(e,t){e.exports=FormBuilderLoader},function(e,t){e.exports=classnames},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return e.item.thumbnail&&"image"===e.item.category&&e.item.exists&&!e.item.uploading&&e.sectionConfig.imageRetry.minRetry&&e.sectionConfig.imageRetry.maxRetry}function l(e,t){if(a(t)){var n=e.assetAdmin.imageLoad,r=n.files.find(function(e){return t.item.thumbnail===e.url});return{loadState:r&&r.status||k.default.NONE}}return{loadState:k.default.DISABLED}}function u(e){return{actions:{imageLoad:(0,I.bindActionCreators)(D,e)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.File=t.Folder=t.Component=void 0;var p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),f=r(d),h=n(0),m=r(h),g=n(12),y=r(g),v=n(39),b=r(v),_=n(167),E=r(_),S=n(83),C=r(S),P=n(79),w=r(P),O=n(28),T=r(O),F=n(3),I=n(6),A=n(147),x=n(194),D=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(x),N=n(92),k=r(N),R=function(e){e.preventDefault()},L=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSelect=n.handleSelect.bind(n),n.handleActivate=n.handleActivate.bind(n),n.handleKeyDown=n.handleKeyDown.bind(n),n.handleCancelUpload=n.handleCancelUpload.bind(n),n}return s(t,e),c(t,[{key:"componentWillReceiveProps",value:function(e){a(e)&&e.actions.imageLoad.loadImage(e.item.thumbnail,e.sectionConfig.imageRetry)}},{key:"getThumbnailStyles",value:function(){var e=this.props.item.thumbnail;if(!this.isImage()||!e||!this.exists()&&!this.uploading())return{};switch(this.props.loadState){case k.default.SUCCESS:case k.default.DISABLED:return{backgroundImage:"url("+e+")"};default:return{}}}},{key:"getErrorMessage",value:function(){var e=null;return this.hasError()?e=this.props.item.message.value:this.exists()||this.uploading()?this.props.loadState===k.default.FAILED&&(e=f.default._t("AssetAdmin.FILE_LOAD_ERROR","Thumbnail not available")):e=f.default._t("AssetAdmin.FILE_MISSING","File cannot be found"),null!==e?m.default.createElement("span",{className:"gallery-item__error-message"},e):null}},{key:"getThumbnailClassNames",value:function(){var e=["gallery-item__thumbnail"];switch(this.isImageSmallerThanThumbnail()&&e.push("gallery-item__thumbnail--small"),!this.props.item.thumbnail&&this.isImage()&&e.push("gallery-item__thumbnail--no-preview"),this.props.loadState){case k.default.LOADING:case k.default.WAITING:e.push("gallery-item__thumbnail--loading");break;case k.default.FAILED:e.push("gallery-item__thumbnail--error")}return e.join(" ")}},{key:"getItemClassNames",value:function(){var e=this.props.item.category||"false",t=["gallery-item gallery-item--"+e];return this.exists()||this.uploading()||t.push("gallery-item--missing"),this.props.selectable&&(t.push("gallery-item--selectable"),this.props.item.selected&&t.push("gallery-item--selected")),this.props.enlarged&&t.push("gallery-item--enlarged"),this.props.item.highlighted&&t.push("gallery-item--highlighted"),this.hasError()&&t.push("gallery-item--error"),t.join(" ")}},{key:"getStatusFlags",value:function(){var e=[];return"folder"!==this.props.item.type&&(this.props.item.draft?e.push(m.default.createElement("span",{key:"status-draft",title:f.default._t("File.DRAFT","Draft"),className:"gallery-item--draft"})):this.props.item.modified&&e.push(m.default.createElement("span",{key:"status-modified",title:f.default._t("File.MODIFIED","Modified"),className:"gallery-item--modified"}))),e}},{key:"getProgressBar",value:function(){var e=null,t={className:"gallery-item__progress-bar",style:{width:this.props.item.progress+"%"}};return this.hasError()||!this.uploading()||this.complete()||(e=m.default.createElement("div",{className:"gallery-item__upload-progress"},m.default.createElement("div",t))),e}},{key:"isImageSmallerThanThumbnail",value:function(){if(!this.isImage()||!this.exists()&&!this.uploading())return!1;var e=this.props.item.width,t=this.props.item.height;return t&&e&&t<y.default.THUMBNAIL_HEIGHT&&e<y.default.THUMBNAIL_WIDTH}},{key:"complete",value:function(){return this.uploading()&&this.props.item.id>0}},{key:"uploading",value:function(){return this.props.item.uploading}},{key:"exists",value:function(){return this.props.item.exists}},{key:"isImage",value:function(){return"image"===this.props.item.category}},{key:"canBatchSelect",value:function(){return this.props.selectable&&this.props.item.canEdit}},{key:"hasError",value:function(){var e=!1;return this.props.item.message&&(e="error"===this.props.item.message.type),e}},{key:"handleActivate",value:function(e){e.stopPropagation(),"function"!=typeof this.props.onActivate||this.uploading()||this.props.onActivate(e,this.props.item)}},{key:"handleSelect",value:function(e){e.stopPropagation(),e.preventDefault(),"function"==typeof this.props.onSelect&&this.props.onSelect(e,this.props.item)}},{key:"handleKeyDown",value:function(e){y.default.SPACE_KEY_CODE===e.keyCode&&(e.preventDefault(),this.canBatchSelect()&&this.handleSelect(e)),y.default.RETURN_KEY_CODE===e.keyCode&&this.handleActivate(e)}},{key:"handleCancelUpload",value:function(e){e.stopPropagation(),e.preventDefault(),this.hasError()?this.props.onRemoveErroredUpload(this.props.item):this.props.onCancelUpload&&this.props.onCancelUpload(this.props.item)}},{key:"render",value:function(){var e=this,t=null,n=null,r=null,o=this.props.item,i=o.id,s=o.queuedId,a=i?"item-"+i:"queued-"+s;if(this.props.selectable&&(this.canBatchSelect()&&(t=this.handleSelect),n="font-icon-tick"),this.uploading())t=this.handleCancelUpload,n="font-icon-cancel";else if(this.exists()){var l=f.default._t("AssetAdmin.DETAILS","Details");r=m.default.createElement("div",{className:"gallery-item--overlay font-icon-edit"},l)}var u=this.props.badge,c={className:"gallery-item__checkbox",type:"checkbox",title:f.default._t("AssetAdmin.SELECT","Select"),tabIndex:-1,onMouseDown:R,id:a},d=["gallery-item__checkbox-label",n];this.canBatchSelect()||(c.disabled=!0,d.push("gallery-item__checkbox-label--disabled"));var h={className:d.join(" "),onClick:t};return m.default.createElement("div",{className:this.getItemClassNames(),"data-id":this.props.item.id,tabIndex:0,role:"button",onKeyDown:this.handleKeyDown,onClick:this.handleActivate},!!u&&m.default.createElement(w.default,{className:"gallery-item__badge",status:u.status,message:u.message}),m.default.createElement("div",{ref:function(t){e.thumbnail=t},className:this.getThumbnailClassNames(),style:this.getThumbnailStyles()},r,this.getStatusFlags()),this.getProgressBar(),this.getErrorMessage(),m.default.createElement("div",{className:"gallery-item__title",ref:function(t){e.title=t}},m.default.createElement("label",p({},h,{htmlFor:a}),m.default.createElement("input",c)),this.props.item.title))}}]),t}(h.Component);L.propTypes={sectionConfig:T.default,item:b.default,loadState:h.PropTypes.oneOf(Object.values(k.default)),highlighted:h.PropTypes.bool,selected:h.PropTypes.bool,enlarged:h.PropTypes.bool,message:h.PropTypes.shape({value:h.PropTypes.string,type:h.PropTypes.string}),selectable:h.PropTypes.bool,onActivate:h.PropTypes.func,onSelect:h.PropTypes.func,onCancelUpload:h.PropTypes.func,onRemoveErroredUpload:h.PropTypes.func,badge:h.PropTypes.shape({status:h.PropTypes.string,message:h.PropTypes.string})},L.defaultProps={item:{},sectionConfig:{imageRetry:{}}};var U=(0,F.connect)(l,u)(L),M=(0,A.createSelectable)((0,E.default)("GalleryItem")(U)),j=(0,A.createSelectable)((0,C.default)("GalleryItem")(M));t.Component=L,t.Folder=j,t.File=M,t.default=U},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t={drop:function(e,t){if(t.canDrop()){var n=t.getItem();e.onDropFiles(e.item.id,n.selected)}},canDrop:function(e,t){return!t.getItem().selected.includes(e.item.id)}},n=function(e,t){var n=t.isOver();return{enlarged:n&&t.canDrop(),connectDropTarget:e.dropTarget(),isOver:n}},s=(0,p.DropTarget)(e,t,n);return function(e){var t=function(t){function n(){return r(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return i(n,t),a(n,[{key:"render",value:function(){var t=this.props.connectDropTarget,n=u.default.createElement(e,this.props);return t("string"==typeof n.type?n:u.default.createElement("div",{className:"gallery-item__droppable"},n))}}]),n}(l.Component);return t.propTypes={connectDropTarget:l.PropTypes.func.isRequired,item:l.PropTypes.shape({id:l.PropTypes.number.isRequired}).isRequired},s(t)}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=s;var l=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(l),p=n(54)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return e&&Object.keys(e).length>0}function l(e,t){var n=e.form.formSchemas[t.searchFormSchemaUrl];if(!n||!n.name)return{formData:{}};var r=(0,O.default)((0,A.default)(e),n.name);return{formData:r&&r.values||{}}}function u(e){return{actions:{schema:(0,v.bindActionCreators)(C,e),reduxForm:(0,v.bindActionCreators)({reset:P.reset,initialize:P.initialize},e)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.hasFilters=t.Component=void 0;var p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),d=r(c),f=n(0),h=r(f),m=n(3),g=n(5),y=r(g),v=n(6),b=n(80),_=r(b),E=n(355),S=n(55),C=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(S),P=n(152),w=n(347),O=r(w),T=n(352),F=r(T),I=n(153),A=r(I),x=n(81),D=r(x),N="AssetAdmin.SearchForm",k={NONE:"NONE",VISIBLE:"VISIBLE",EXPANDED:"EXPANDED"},R=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.expand=n.expand.bind(n),n.handleKeyUp=n.handleKeyUp.bind(n),n.handleChange=n.handleChange.bind(n),n.doSearch=n.doSearch.bind(n),n.focusInput=n.focusInput.bind(n),n.focusFirstFormField=n.focusFirstFormField.bind(n),n.hide=n.hide.bind(n),n.show=n.show.bind(n),n.toggle=n.toggle.bind(n),n.open=n.open.bind(n),n.state={view:k.NONE,searchText:e.filters&&e.filters.name||""},n}return s(t,e),p(t,[{key:"componentWillMount",value:function(){this.setOverrides(this.props)}},{key:"componentWillReceiveProps",value:function(e){e&&!a(e.filters)&&a(this.props.filters)?this.clearFormData(e):JSON.stringify(e.filters)!==JSON.stringify(this.props.filters)&&this.setOverrides(e)}},{key:"componentWillUnmount",value:function(){this.setOverrides()}},{key:"setOverrides",value:function(e){if(e&&(!a(e.filters)||this.props.searchFormSchemaUrl!==e.searchFormSchemaUrl)){var t=e&&e.searchFormSchemaUrl||this.props.searchFormSchemaUrl;t&&this.props.actions.schema.setSchemaStateOverrides(t,null)}if(e&&a(e.filters)&&e.searchFormSchemaUrl){var n=e.filters||{},r={fields:Object.keys(n).map(function(e){return{name:e,value:n[e]}})};this.props.actions.schema.setSchemaStateOverrides(e.searchFormSchemaUrl,r)}}},{key:"focusInput",value:function(){if(this.state.view!==k.NONE){var e=y.default.findDOMNode(this);if(e){var t=e.querySelector(".search__content-field");t!==document.activeElement&&(t.focus(),t.select&&t.select())}}}},{key:"focusFirstFormField",value:function(){if(this.state.view===k.EXPANDED){var e=y.default.findDOMNode(this);if(e){var t=e.querySelector(".search__filter-panel form");if(t){var n=t.querySelector("input, textarea, select");n&&(n.focus(),n.select&&n.select())}}}}},{key:"clearFormData",value:function(e){this.setState({searchText:""});var t=e&&e.searchFormSchemaUrl||this.props.searchFormSchemaUrl;t&&(this.props.actions.schema.setSchemaStateOverrides(t,null),this.props.actions.reduxForm.initialize(N,{},Object.keys(this.props.formData)),this.props.actions.reduxForm.reset(N))}},{key:"handleChange",value:function(e){this.setState({searchText:e.target.value})}},{key:"handleKeyUp",value:function(e){13===e.keyCode&&this.doSearch()}},{key:"open",value:function(){this.show(),setTimeout(this.focusInput,50)}},{key:"hide",value:function(){this.setState({view:k.NONE})}},{key:"show",value:function(){this.setState({view:k.VISIBLE})}},{key:"expand",value:function(){this.setState({view:k.EXPANDED})}},{key:"toggle",value:function(){switch(this.state.view){case k.VISIBLE:this.expand(),setTimeout(this.focusFirstFormField,50);break;case k.EXPANDED:this.show()}}},{key:"doSearch",value:function(){var e=this,t={};this.state.searchText&&(t.name=this.state.searchText),Object.keys(this.props.formData).forEach(function(n){var r=e.props.formData[n];r&&(t[n]=r)}),this.show(),this.props.onSearch(t)}},{key:"render",value:function(){var e=this.props.id+"_ExtraFields",t=this.props.id+"_Trigger",n=this.state.searchText,r=["search"],o=["btn","btn-secondary","btn--icon-md","btn--no-text","font-icon-down-open","search__filter-trigger"],i=!1;switch(this.state.view){case k.EXPANDED:i=!0,r.push("search--active");break;case k.VISIBLE:o.push("collapsed"),r.push("search--active");break;case k.NONE:o.push("collapsed")}var s=(0,D.default)("btn","btn-primary","search__submit","font-icon-search","btn--icon-large","btn--no-text"),a=(0,D.default)("btn","btn--no-text","btn-secondary","search__trigger","font-icon-search","btn--icon-large");return h.default.createElement(F.default,{onClickOut:this.hide},h.default.createElement("div",{className:r.join(" ")},h.default.createElement("button",{className:a,type:"button",title:d.default._t("AssetAdmin.SEARCH","Search"),"aria-owns":this.props.id,"aria-controls":this.props.id,"aria-expanded":"false",onClick:this.open,id:t}),h.default.createElement("div",{id:this.props.id,className:"search__group"},h.default.createElement("input",{"aria-labelledby":t,type:"text",name:"name",placeholder:d.default._t("AssetAdmin.SEARCH","Search"),className:"form-control search__content-field",onKeyUp:this.handleKeyUp,onChange:this.handleChange,value:n,autoFocus:!0}),h.default.createElement("button",{"aria-expanded":i,"aria-controls":e,onClick:this.toggle,className:o.join(" "),title:d.default._t("AssetAdmin.ADVANCED","Advanced")},h.default.createElement("span",{className:"search__filter-trigger-text"},d.default._t("AssetAdmin.ADVANCED","Advanced"))),h.default.createElement("button",{className:s,title:d.default._t("AssetAdmin.SEARCH","Search"),onClick:this.doSearch}),h.default.createElement("button",{onClick:this.hide,title:d.default._t("AssetAdmin.CLOSE","Close"),className:"btn font-icon-cancel btn--no-text btn--icon-md search__cancel","aria-controls":this.props.id,"aria-expanded":"true"}),h.default.createElement(E.Collapse,{in:i},h.default.createElement("div",{id:e,className:"search__filter-panel"},h.default.createElement(_.default,{identifier:N,schemaUrl:this.props.searchFormSchemaUrl}))))))}}]),t}(f.Component);R.propTypes={searchFormSchemaUrl:f.PropTypes.string.isRequired,id:f.PropTypes.string.isRequired,onSearch:f.PropTypes.func.isRequired,filters:f.PropTypes.object,formData:f.PropTypes.object},t.Component=R,t.hasFilters=a,t.default=(0,m.connect)(l,u)(R)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t=e.config,n=e.viewAction,r=e.folderId,o=e.fileId,i=e.type,s=null,a=null;if(n===Q.default.ACTIONS.CREATE_FOLDER)s=t.form.folderCreateForm.schemaUrl,a=r;else{if(n!==Q.default.ACTIONS.EDIT_FILE)return{};switch(i){case"insert-media":s=t.form.fileInsertForm.schemaUrl;break;case"insert-link":s=t.form.fileEditorLinkForm.schemaUrl;break;case"select":s=t.form.fileSelectForm.schemaUrl;break;case"admin":default:s=t.form.fileEditForm.schemaUrl}if(!o)return{};a=o}return{schemaUrl:s,targetId:a}}function p(e){return{securityId:e.config.SecurityID,queuedFiles:e.assetAdmin.queuedFiles}}function c(e){return{actions:{gallery:(0,y.bindActionCreators)(C,e),breadcrumbsActions:(0,y.bindActionCreators)(w,e),queuedFiles:(0,y.bindActionCreators)(T,e)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.getFormSchema=t.Component=void 0;var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(0),m=o(h),g=n(3),y=n(6),v=n(148),b=o(v),_=n(1),E=o(_),S=n(58),C=r(S),P=n(349),w=r(P),O=n(95),T=r(O),F=n(177),I=o(F),A=n(57),x=o(A),D=n(348),N=o(D),k=n(358),R=o(k),L=n(15),U=n(84),M=o(U),j=n(190),B=o(j),G=n(188),H=o(G),q=n(191),z=o(q),V=n(189),W=o(V),K=n(12),Q=o(K),$=n(28),Y=o($),X=function(e){function t(e){s(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleOpenFile=n.handleOpenFile.bind(n),n.handleCloseFile=n.handleCloseFile.bind(n),n.handleDelete=n.handleDelete.bind(n),n.doPublish=n.doPublish.bind(n),n.doUnpublish=n.doUnpublish.bind(n),n.handleUnpublish=n.handleUnpublish.bind(n),n.handleDoSearch=n.handleDoSearch.bind(n),n.handleSubmitEditor=n.handleSubmitEditor.bind(n),n.handleOpenFolder=n.handleOpenFolder.bind(n),n.handleSort=n.handleSort.bind(n),n.handleSetPage=n.handleSetPage.bind(n),n.createEndpoint=n.createEndpoint.bind(n),n.handleBackButtonClick=n.handleBackButtonClick.bind(n),n.handleFolderIcon=n.handleFolderIcon.bind(n),n.handleBrowse=n.handleBrowse.bind(n),n.handleViewChange=n.handleViewChange.bind(n),n.handleUpload=n.handleUpload.bind(n),n.handleCreateFolder=n.handleCreateFolder.bind(n),n.handleMoveFilesSuccess=n.handleMoveFilesSuccess.bind(n),n.compare=n.compare.bind(n),n.setBreadcrumbs=n.setBreadcrumbs.bind(n),n}return l(t,e),f(t,[{key:"componentWillMount",value:function(){var e=this.props.sectionConfig;this.endpoints={historyApi:this.createEndpoint(e.historyEndpoint)}}},{key:"componentDidMount",value:function(){this.setBreadcrumbs(this.props)}},{key:"componentWillReceiveProps",value:function(e){(this.compare(this.props.folder,e.folder)||(0,U.hasFilters)(e.query.filter)!==(0,U.hasFilters)(this.props.query.filter))&&this.setBreadcrumbs(e),!e.loading&&e.folder&&e.folderId!==e.folder.id&&e.onReplaceUrl(e.folder.id,e.fileId,e.query,e.viewAction)}},{key:"getFolderId",value:function(){return null!==this.props.folderId?this.props.folderId:this.props.folder?this.props.folder.id:0}},{key:"setBreadcrumbs",value:function(e){var t=this,n=e.folder,r=e.query,o=[{text:E.default._t("AssetAdmin.FILES","Files"),href:this.props.getUrl&&this.props.getUrl(),onClick:function(e){e.preventDefault(),t.handleBrowse()}}];n&&n.id&&(n.parents&&n.parents.forEach(function(e){o.push({text:e.title,href:t.props.getUrl&&t.props.getUrl(e.id),onClick:function(n){n.preventDefault(),t.handleBrowse(e.id)}})}),o.push({text:n.title,href:this.props.getUrl&&this.props.getUrl(n.id),onClick:function(e){e.preventDefault(),t.handleBrowse(n.id)},icon:{className:"icon font-icon-edit-list",onClick:this.handleFolderIcon}})),(0,U.hasFilters)(r.filter)&&o.push({text:E.default._t("LeftAndMain.SEARCHRESULTS","Search results")}),this.props.actions.breadcrumbsActions.setBreadcrumbs(o)}},{key:"handleBrowse",value:function(e,t,n){"function"==typeof this.props.onBrowse&&this.props.onBrowse(e,t,n),e!==this.getFolderId()&&this.props.actions.gallery.deselectFiles()}},{key:"handleSetPage",value:function(e){this.handleBrowse(this.getFolderId(),this.props.fileId,Object.assign({},this.props.query,{page:e}))}},{key:"handleDoSearch",value:function(e){this.props.actions.gallery.deselectFiles(),this.handleBrowse(e.currentFolderOnly?this.getFolderId():0,null,{filter:e,view:this.props.query.view})}},{key:"handleSort",value:function(e){this.handleBrowse(this.getFolderId(),this.props.fileId,d({},this.props.query,{sort:e,limit:void 0,page:void 0}))}},{key:"handleViewChange",value:function(e){this.handleBrowse(this.getFolderId(),this.props.fileId,Object.assign({},this.props.query,{view:e}))}},{key:"createEndpoint",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return b.default.createEndpointFetcher(Object.assign({},e,t?{defaultData:{SecurityID:this.props.securityId}}:{}))}},{key:"handleBackButtonClick",value:function(e){e.preventDefault(),this.props.actions.gallery.deselectFiles(),this.props.folder?this.handleOpenFolder(this.props.folder.parentId||0):this.handleOpenFolder(0)}},{key:"compare",value:function(e,t){return!!(e&&!t||t&&!e)||e&&t&&(e.id!==t.id||e.name!==t.name)}},{key:"resetFile",value:function(e){e.queuedId&&this.props.actions.queuedFiles.removeQueuedFile(e.queuedId),this.props.fileId===e.id&&(this.handleCloseFile(),this.handleOpenFile(e.id))}},{key:"handleFolderIcon",value:function(e){e.preventDefault(),this.handleOpenFile(this.getFolderId())}},{key:"handleOpenFile",value:function(e){this.handleBrowse(this.getFolderId(),e,this.props.query)}},{key:"handleSubmitEditor",value:function(e,t,n){var r=this,o=null;if("function"==typeof this.props.onSubmitEditor){var i=this.findFile(this.props.fileId);o=this.props.onSubmitEditor(e,t,n,i)}else o=n();if(!o)throw new Error("Promise was not returned for submitting");return o.then(function(e){return"action_createfolder"===t&&"admin"===r.props.type&&r.handleOpenFile(e.record.id),r.props.actions.files.readFiles().then(function(){return"action_createfolder"===t&&"admin"!==r.props.type&&r.handleOpenFolder(r.getFolderId()),e})})}},{key:"handleCloseFile",value:function(){this.handleBrowse(this.getFolderId(),null,this.props.query)}},{key:"handleOpenFolder",value:function(e){var t=Object.assign({},this.props.query);delete t.page,delete t.filter,this.handleBrowse(e,null,t)}},{key:"handleDelete",value:function(e){var t=this,n=e.map(function(e){var n=t.findFile(e);if(!n)throw new Error("File selected for deletion cannot be found: "+e);return n.queuedId&&t.props.actions.queuedFiles.removeQueuedFile(n.queuedId),n}),r=n.map(function(e){var n=e.__typename,r=e.id;return t.props.client.dataId({__typename:n,id:r})}),o=n.map(function(e){return e.id}),i=this.props.folder?this.props.folder.id:0;return this.props.actions.files.deleteFiles(o,r).then(function(e){var n=e.data.deleteFiles;return t.handleBrowse(i,null,t.props.query),n})}},{key:"doUnpublish",value:function(e){var t=this,n=e.map(function(e){var n=t.findFile(e);if(!n)throw new Error("File selected for unpublishing cannot be found: "+e);if("folder"===n.type)throw new Error("Cannot unpublish folders");return n}),r=n.map(function(e){return e.id});return this.props.actions.files.unpublishFiles(r).then(function(e){return e.data.unpublishFiles.map(function(e){return t.resetFile(e),e})})}},{key:"handleUnpublish",value:function(e){var t=this;return this.doUnpublish(e).then(function(e){var n=t.props.fileId;t.props.actions.files.readFiles().then(function(){n&&e.find(function(e){return e.id===n})&&(t.handleCloseFile(),t.handleOpenFile(n))})})}},{key:"doPublish",value:function(e){var t=this,n=e.map(function(e){var n=t.findFile(e);if(!n)throw new Error("File selected for publishing cannot be found: "+e);if("folder"===n.type)throw new Error("Cannot publish folders");return n}),r=n.map(function(e){return e.id});return this.props.actions.files.publishFiles(r).then(function(e){return e.data.publishFiles.map(function(e){return t.resetFile(e),e})})}},{key:"findFile",value:function(e){return[].concat(i(this.props.files),i(this.props.queuedFiles.items)).find(function(t){return t.id===parseInt(e,10)})}},{key:"handleUpload",value:function(){}},{key:"handleCreateFolder",value:function(){this.props.onBrowse(this.getFolderId(),null,this.props.query,Q.default.ACTIONS.CREATE_FOLDER)}},{key:"handleMoveFilesSuccess",value:function(e,t){var n=this;this.props.queuedFiles.items.filter(function(e){return t.includes(e.id)}).forEach(function(e){e.queuedId&&n.props.actions.queuedFiles.removeQueuedFile(e.queuedId)}),this.props.actions.gallery.deselectFiles(),this.props.actions.files.readFiles()}},{key:"renderGallery",value:function(){var e=this.props.sectionConfig,t=e.createFileEndpoint.url,n=e.createFileEndpoint.method,r=this.props.query&&parseInt(this.props.query.limit||e.limit,10),o=this.props.query&&parseInt(this.props.query.page||1,10),i=this.props.query&&this.props.query.sort,s=this.props.query&&this.props.query.view,a=this.props.query.filter||{};return m.default.createElement(x.default,{files:this.props.files,fileId:this.props.fileId,folderId:this.getFolderId(),folder:this.props.folder,type:this.props.type,limit:r,page:o,totalCount:this.props.filesTotalCount,view:s,filters:a,graphQLErrors:this.props.graphQLErrors,createFileApiUrl:t,createFileApiMethod:n,onDelete:this.handleDelete,onPublish:this.doPublish,onUnpublish:this.doUnpublish,onOpenFile:this.handleOpenFile,onOpenFolder:this.handleOpenFolder,onSuccessfulUpload:this.handleUpload,onCreateFolder:this.handleCreateFolder,onMoveFilesSuccess:this.handleMoveFilesSuccess,onSort:this.handleSort,onSetPage:this.handleSetPage,onViewChange:this.handleViewChange,sort:i,sectionConfig:e,loading:this.props.loading})}},{key:"renderEditor",value:function(){var e=this.props.sectionConfig,t=u({config:e,viewAction:this.props.viewAction,folderId:this.getFolderId(),type:this.props.type,fileId:this.props.fileId}),n=t.schemaUrl,r=t.targetId;return n?m.default.createElement(I.default,{className:this.props.dialog?"editor--dialog":"",targetId:r,file:this.findFile(r),onClose:this.handleCloseFile,schemaUrl:n,schemaUrlQueries:this.props.requireLinkText?[{name:"requireLinkText",value:!0}]:[],onSubmit:this.handleSubmitEditor,onDelete:this.handleDelete,onUnpublish:this.handleUnpublish,addToCampaignSchemaUrl:e.form.addToCampaignForm.schemaUrl}):null}},{key:"render",value:function(){var e=!(!this.props.folderId&&!(0,U.hasFilters)(this.props.query.filter)),t=this.props.sectionConfig.form.fileSearchForm.schemaUrl,n=this.props.query.filter||{};return m.default.createElement("div",{className:"fill-height"},m.default.createElement(R.default,{showBackButton:e,onBackButtonClick:this.handleBackButtonClick},m.default.createElement(N.default,{multiline:!0}),m.default.createElement("div",{className:"asset-admin__toolbar-extra pull-xs-right fill-width vertical-align-items"},m.default.createElement(M.default,{onSearch:this.handleDoSearch,id:"AssetSearchForm",searchFormSchemaUrl:t,folderId:this.getFolderId(),filters:n}),this.props.toolbarChildren)),m.default.createElement("div",{className:"flexbox-area-grow fill-width fill-height gallery"},this.renderGallery(),this.renderEditor()))}}]),t}(h.Component);X.propTypes={dialog:h.PropTypes.bool,sectionConfig:Y.default,fileId:h.PropTypes.number,folderId:h.PropTypes.number,onBrowse:h.PropTypes.func,onReplaceUrl:h.PropTypes.func,graphQLErrors:h.PropTypes.arrayOf(h.PropTypes.string),getUrl:h.PropTypes.func,query:h.PropTypes.shape({sort:h.PropTypes.string,limit:h.PropTypes.oneOfType([h.PropTypes.number,h.PropTypes.string]),page:h.PropTypes.oneOfType([h.PropTypes.number,h.PropTypes.string]),filter:h.PropTypes.object}),onSubmitEditor:h.PropTypes.func,type:h.PropTypes.oneOf(["insert-media","insert-link","select","admin"]),files:h.PropTypes.array,queuedFiles:h.PropTypes.shape({items:h.PropTypes.array.isRequired}),filesTotalCount:h.PropTypes.number,folder:h.PropTypes.shape({id:h.PropTypes.number,title:h.PropTypes.string,parents:h.PropTypes.array,parentId:h.PropTypes.number,canView:h.PropTypes.bool,canEdit:h.PropTypes.bool}),loading:h.PropTypes.bool,actions:h.PropTypes.object},X.defaultProps={type:"admin",query:{sort:"",limit:null,page:0,filter:{}}},t.Component=X,t.getFormSchema=u,t.default=(0,y.compose)((0,g.connect)(p,c),B.default,H.default,z.default,W.default,function(e){return(0,L.withApollo)(e)})(X)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.base,n=e.folderId,r=e.fileId,o=e.query,i=e.action;if(i&&-1===P.indexOf(i))throw new Error("Invalid action provided: "+i);var s=null;return s=r?t+"/show/"+n+"/"+_.default.ACTIONS.EDIT_FILE+"/"+r:n?t+"/show/"+n:t+"/",i===_.default.ACTIONS.CREATE_FOLDER&&(s=t+"/show/"+(n||0)+"/"+i),o&&Object.keys(o).length>0&&(s=s+"?"+v.default.stringify(o)),s}function l(e){return{sectionConfig:e.config.sections.find(function(e){return e.name===C})}}Object.defineProperty(t,"__esModule",{value:!0}),t.buildUrl=t.Component=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(0),c=r(p),d=n(3),f=n(357),h=n(85),m=r(h),g=n(37),y=n(361),v=r(y),b=n(12),_=r(b),E=n(28),S=r(E),C="SilverStripe\\AssetAdmin\\Controller\\AssetAdmin",P=Object.keys(_.default.ACTIONS).map(function(e){return _.default.ACTIONS[e]}),w=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleBrowse=n.handleBrowse.bind(n),n.handleReplaceUrl=n.handleReplaceUrl.bind(n),n.getUrl=n.getUrl.bind(n),n}return s(t,e),u(t,[{key:"getUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_.default.ACTIONS.EDIT_FILE,o=parseInt(e||0,10),i=parseInt(t||0,10),s=o!==this.getFolderId(),l=Object.assign({},n);return(s||l.page<=1)&&delete l.page,a({base:this.props.sectionConfig.url,folderId:o,fileId:i,query:l,action:r})}},{key:"getFolderId",value:function(){return this.props.params&&this.props.params.folderId?parseInt(this.props.params.folderId,10):0}},{key:"getFileId",value:function(){return this.props.params&&this.props.params.fileId?parseInt(this.props.params.fileId,10):0}},{key:"getViewAction",value:function(){return this.props.params&&this.props.params.viewAction?this.props.params.viewAction:_.default.ACTIONS.EDIT_FILE}},{key:"getSectionProps",value:function(){return{sectionConfig:this.props.sectionConfig,type:"admin",folderId:this.getFolderId(),viewAction:this.getViewAction(),fileId:this.getFileId(),query:this.getQuery(),getUrl:this.getUrl,onBrowse:this.handleBrowse,onReplaceUrl:this.handleReplaceUrl}}},{key:"getQuery",value:function(){return(0,g.decodeQuery)(this.props.location.search)}},{key:"handleBrowse",value:function(e,t,n,r){var o=this.getUrl(e,t,n,r);this.props.router.push(o)}},{key:"handleReplaceUrl",value:function(e,t,n,r){var o=this.getUrl(e,t,n,r);this.props.router.replace(o)}},{key:"render",value:function(){return this.props.sectionConfig?c.default.createElement(m.default,this.getSectionProps()):null}}]),t}(p.Component);w.propTypes={sectionConfig:S.default,location:p.PropTypes.shape({pathname:p.PropTypes.string,query:p.PropTypes.object,search:p.PropTypes.string}),params:p.PropTypes.object,router:p.PropTypes.object},t.Component=w,t.buildUrl=a,t.default=(0,f.withRouter)((0,d.connect)(l)(w))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=(0,o.default)({name:null,canDelete:!1,canEdit:!1,category:null,created:null,extension:null,filename:null,id:0,lastEdited:null,messages:null,owner:{id:0,title:null},parent:{filename:null,id:0,title:null},queuedId:null,size:null,title:null,type:null,url:null,xhr:null,thumbnail:null,smallThumbnail:null,height:null,width:null});t.default=i},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  mutation ","($IDs:[ID]!) {\n    ","(IDs: $IDs) {\n      ...FileInterfaceFields\n      ...FileFields\n    }\n  }\n  ","\n  ","\n"],["\n  mutation ","($IDs:[ID]!) {\n    ","(IDs: $IDs) {\n      ...FileInterfaceFields\n      ...FileFields\n    }\n  }\n  ","\n  ","\n"]),s=n(27),a=function(e){return e&&e.__esModule?e:{default:e}}(s),l=n(38),u=function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);return{mutation:(0,a.default)(i,t,e,l.fileInterface,l.file),config:{props:function(t){var n=t.mutate,i=t.ownProps.actions,s=function(e){return n({variables:{IDs:e}})};return{actions:o({},i,{files:o({},i.files,r({},e,s))})}}}}};t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.mutation=void 0;var r=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  mutation MoveFiles($folderId:ID!, $fileIds:[ID]!) {\n    moveFiles(folderId: $folderId, fileIds: $fileIds) {\n      ...FileInterfaceFields\n      ...FileFields\n    }\n  }\n  ","\n  ","\n"],["\n  mutation MoveFiles($folderId:ID!, $fileIds:[ID]!) {\n    moveFiles(folderId: $folderId, fileIds: $fileIds) {\n      ...FileInterfaceFields\n      ...FileFields\n    }\n  }\n  ","\n  ","\n"]),o=n(15),i=n(27),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=n(38),l=(0,s.default)(r,a.fileInterface,a.file),u={props:function(e){var t=e.mutate,n=e.ownProps.actions,r=void 0===n?{}:n;return{actions:Object.assign({},r,{files:Object.assign({},r.files,{moveFiles:function(e,n){return t({variables:{folderId:e,fileIds:n}})}})})}}};t.mutation=l,t.config=u,t.default=(0,o.graphql)(l,u)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=["DESELECT_FILES","SELECT_FILES","LOAD_FILE_REQUEST","LOAD_FILE_SUCCESS","HIGHLIGHT_FILES","UPDATE_BATCH_ACTIONS","SET_NOTICE_MESSAGE","SET_ERROR_MESSAGE","SET_ENABLE_DROPZONE","SET_FILE_BADGE","CLEAR_FILE_BADGE","ACTIVATE_MODAL","DEACTIVATE_MODAL","CONCATENATE_SELECT","SET_LOADING"].reduce(function(e,t){return Object.assign(e,r({},t,"GALLERY."+t))},{})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={SET_STATUS:"IMAGE_LOAD_SET_STATUS",RESET:"IMAGE_LOAD_RESET"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={DISABLED:"DISABLED",NONE:"NONE",SUCCESS:"SUCCESS",LOADING:"LOADING",WAITING:"WAITING",FAILED:"FAILED"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={PREVIEWFIELD_ADD_FILE:"PREVIEWFIELD_ADD_FILE",PREVIEWFIELD_REMOVE_FILE:"PREVIEWFIELD_REMOVE_FILE",PREVIEWFIELD_UPDATE_FILE:"PREVIEWFIELD_UPDATE_FILE",PREVIEWFIELD_FAIL_UPLOAD:"PREVIEWFIELD_FAIL_UPLOAD"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={ADD_QUEUED_FILE:"ADD_QUEUED_FILE",FAIL_UPLOAD:"FAIL_UPLOAD",PURGE_UPLOAD_QUEUE:"PURGE_UPLOAD_QUEUE",REMOVE_QUEUED_FILE:"REMOVE_QUEUED_FILE",SUCCEED_UPLOAD:"SUCCEED_UPLOAD",UPDATE_QUEUED_FILE:"UPDATE_QUEUED_FILE"}},function(e,t,n){"use strict";function r(e){return function(t){return t({type:p.default.ADD_QUEUED_FILE,payload:{file:e}})}}function o(e,t){return function(n){var r=t.message;return t.errors&&t.errors.length&&(r=t.errors[0]),"string"==typeof t&&(r={value:t,type:"error"}),n({type:p.default.FAIL_UPLOAD,payload:{queuedId:e,message:r}})}}function i(){return function(e){return e({type:p.default.PURGE_UPLOAD_QUEUE,payload:null})}}function s(e){return function(t){return t({type:p.default.REMOVE_QUEUED_FILE,payload:{queuedId:e}})}}function a(e,t){return function(n){return n({type:p.default.SUCCEED_UPLOAD,payload:{queuedId:e,json:t}})}}function l(e,t){return function(n){return n({type:p.default.UPDATE_QUEUED_FILE,payload:{queuedId:e,updates:t}})}}Object.defineProperty(t,"__esModule",{value:!0}),t.addQueuedFile=r,t.failUpload=o,t.purgeUploadQueue=i,t.removeQueuedFile=s,t.succeedUpload=a,t.updateQueuedFile=l;var u=n(94),p=function(e){return e&&e.__esModule?e:{default:e}}(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={UPLOADFIELD_ADD_FILE:"UPLOADFIELD_ADD_FILE",UPLOADFIELD_SET_FILES:"UPLOADFIELD_SET_FILES",UPLOADFIELD_REMOVE_FILE:"UPLOADFIELD_REMOVE_FILE",UPLOADFIELD_UPLOAD_FAILURE:"UPLOADFIELD_UPLOAD_FAILURE",UPLOADFIELD_UPLOAD_SUCCESS:"UPLOADFIELD_UPLOAD_SUCCESS",UPLOADFIELD_UPDATE_QUEUED_FILE:"UPLOADFIELD_UPDATE_QUEUED_FILE"}},function(e,t,n){"use strict";function r(e){for(var t,n=/\[("|')(.+)\1\]|([^.\[\]]+)/g,r=[];null!==(t=n.exec(e));)r.push(t[2]||t[3]);return r}function o(e,t){if("string"==typeof t){if(void 0!==e[t])return e[t];t=r(t)}for(var n=-1,o=t.length;++n<o&&null!=e;)e=e[t[n]];return n===o?e:void 0}function i(e,t){var n,r={},i=e;n=function(e,t){return e in t},i=Object(i);for(var s=0,a=t.length;s<a;s++){var l=t[s];n(l,i)&&(r[l]=o(i,l))}return r}function s(e,t){var n=[];return u(e,function(e,r){var o=t?t+"."+r:r;!p(e)||c(e)||d(e)||e instanceof Date?n.push(o):n=n.concat(s(e,o))}),n}function a(e,t){c(e)?u(e,function(e){a(e,t)}):f(e)?h(e,function(e){a(e,t)}):t(e)}function l(e){var t=[];return a(e,function(e){t.push(e)}),t}var u=n(139),p=n(11),c=n(2),d=n(51),f=n(142),h=n(324);e.exports={pick:i,getAt:o,keys:s,getObjectValues:l}},function(e,t,n){"use strict";var r=n(0),o=(n(29),n(336)),i=r.createClass({displayName:"GridRowContainer",getDefaultProps:function(){return{useGriddleStyles:!0,useGriddleIcons:!0,isSubGriddle:!1,columnSettings:null,rowSettings:null,paddingHeight:null,rowHeight:null,parentRowCollapsedClassName:"parent-row",parentRowExpandedClassName:"parent-row expanded",parentRowCollapsedComponent:"",parentRowExpandedComponent:"",onRowClick:null,multipleSelectionSettings:null}},getInitialState:function(){return{data:{},showChildren:!1}},componentWillReceiveProps:function(){this.setShowChildren(!1)},toggleChildren:function(){this.setShowChildren(!1===this.state.showChildren)},setShowChildren:function(e){this.setState({showChildren:e})},verifyProps:function(){null===this.props.columnSettings&&console.error("gridRowContainer: The columnSettings prop is null and it shouldn't be")},render:function(){this.verifyProps();var e=this;if(void 0===this.props.data)return r.createElement("tbody",null);var t=[],n=this.props.columnSettings.getColumns();t.push(r.createElement(this.props.rowSettings.rowComponent,{useGriddleStyles:this.props.useGriddleStyles,isSubGriddle:this.props.isSubGriddle,data:this.props.rowSettings.isCustom?o(this.props.data,n):this.props.data,rowData:this.props.rowSettings.isCustom?this.props.data:null,columnSettings:this.props.columnSettings,rowSettings:this.props.rowSettings,hasChildren:e.props.hasChildren,toggleChildren:e.toggleChildren,showChildren:e.state.showChildren,key:e.props.uniqueId+"_base_row",useGriddleIcons:e.props.useGriddleIcons,parentRowExpandedClassName:this.props.parentRowExpandedClassName,parentRowCollapsedClassName:this.props.parentRowCollapsedClassName,parentRowExpandedComponent:this.props.parentRowExpandedComponent,parentRowCollapsedComponent:this.props.parentRowCollapsedComponent,paddingHeight:e.props.paddingHeight,rowHeight:e.props.rowHeight,onRowClick:e.props.onRowClick,multipleSelectionSettings:this.props.multipleSelectionSettings}));var i=null;return e.state.showChildren&&(i=e.props.hasChildren&&this.props.data.children.map(function(t,n){var o=e.props.rowSettings.getRowKey(t,n);if(void 0!==t.children){var i=e.constructor.Griddle;return r.createElement("tr",{key:o,style:{paddingLeft:5}},r.createElement("td",{colSpan:e.props.columnSettings.getVisibleColumnCount(),className:"griddle-parent",style:e.props.useGriddleStyles?{border:"none",padding:"0 0 0 5px"}:null},r.createElement(i,{rowMetadata:{key:"id"},isSubGriddle:!0,results:[t],columns:e.props.columnSettings.getColumns(),tableClassName:e.props.tableClassName,parentRowExpandedClassName:e.props.parentRowExpandedClassName,parentRowCollapsedClassName:e.props.parentRowCollapsedClassName,showTableHeading:!1,showPager:!1,columnMetadata:e.props.columnSettings.columnMetadata,parentRowExpandedComponent:e.props.parentRowExpandedComponent,parentRowCollapsedComponent:e.props.parentRowCollapsedComponent,paddingHeight:e.props.paddingHeight,rowHeight:e.props.rowHeight})))}return r.createElement(e.props.rowSettings.rowComponent,{useGriddleStyles:e.props.useGriddleStyles,isSubGriddle:e.props.isSubGriddle,data:t,columnSettings:e.props.columnSettings,isChildRow:!0,columnMetadata:e.props.columnSettings.columnMetadata,key:o})})),!1===e.props.hasChildren?t[0]:r.createElement("tbody",null,e.state.showChildren?t.concat(i):t)}});e.exports=i},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(0),i=n(214),s=n(209),a=n(211),l=n(213),u=n(210),p=n(212),c=n(98),d=n(208),f=n(207),h=n(206),m=n(29),g=n(100),y=n(97),v=n(320),b=n(321),_=n(72),E=n(339),S=n(139),C=n(326),P=n(327),w=n(2),O=n(328),T=n(329),F=n(331),I=n(334),A=n(143),x=n(48),D=n(138),N=n(335),k=(n(144),n(140)),R=o.createClass({displayName:"Griddle",statics:{GridTable:i,GridFilter:s,GridPagination:a,GridSettings:l,GridRow:p},columnSettings:null,rowSettings:null,getDefaultProps:function(){return{columns:[],gridMetadata:null,columnMetadata:[],rowMetadata:null,results:[],initialSort:"",gridClassName:"",tableClassName:"",customRowComponentClassName:"",settingsText:"Settings",filterPlaceholderText:"Filter Results",nextText:"Next",previousText:"Previous",maxRowsText:"Rows per page",enableCustomFormatText:"Enable Custom Formatting",childrenColumnName:"children",metadataColumns:[],showFilter:!1,showSettings:!1,useCustomRowComponent:!1,useCustomGridComponent:!1,useCustomPagerComponent:!1,useCustomFilterer:!1,useCustomFilterComponent:!1,useGriddleStyles:!0,useGriddleIcons:!0,customRowComponent:null,customGridComponent:null,customPagerComponent:{},customFilterComponent:null,customFilterer:null,globalData:null,enableToggleCustom:!1,noDataMessage:"There is no data to display.",noDataClassName:"griddle-nodata",customNoDataComponent:null,customNoDataComponentProps:null,allowEmptyGrid:!1,showTableHeading:!0,showPager:!0,useFixedHeader:!1,useExternal:!1,externalSetPage:null,externalChangeSort:null,externalSetFilter:null,externalSetPageSize:null,externalMaxPage:null,externalCurrentPage:null,externalSortColumn:null,externalSortAscending:!0,externalLoadingComponent:null,externalIsLoading:!1,enableInfiniteScroll:!1,bodyHeight:null,paddingHeight:5,rowHeight:25,infiniteScrollLoadTreshold:50,useFixedLayout:!0,isSubGriddle:!1,enableSort:!0,onRowClick:null,sortAscendingClassName:"sort-ascending",sortDescendingClassName:"sort-descending",parentRowCollapsedClassName:"parent-row",parentRowExpandedClassName:"parent-row expanded",settingsToggleClassName:"settings",nextClassName:"griddle-next",previousClassName:"griddle-previous",headerStyles:{},sortAscendingComponent:" ",sortDescendingComponent:" ",sortDefaultComponent:null,parentRowCollapsedComponent:"",parentRowExpandedComponent:"",settingsIconComponent:"",nextIconComponent:"",previousIconComponent:"",isMultipleSelection:!1,selectedRowIds:[],uniqueIdentifier:"id",onSelectionChange:null}},propTypes:{isMultipleSelection:o.PropTypes.bool,selectedRowIds:o.PropTypes.oneOfType([o.PropTypes.arrayOf(o.PropTypes.number),o.PropTypes.arrayOf(o.PropTypes.string)]),uniqueIdentifier:o.PropTypes.string,onSelectionChange:o.PropTypes.func},defaultFilter:function(e,t){var n=this;return D(e,function(e){for(var r=y.keys(e),o=0;o<r.length;o++)if(n.columnSettings.getMetadataColumnProperty(r[o],"filterable",!0)&&(y.getAt(e,r[o])||"").toString().toLowerCase().indexOf(t.toLowerCase())>=0)return!0;return!1})},defaultColumnFilter:function(e,t){return D(y.getObjectValues(e),function(e){return e.toString().toLowerCase().indexOf(t.toLowerCase())>=0}).length>0},filterByColumnFilters:function(e){var t=this.defaultColumnFilter,n=Object.keys(e).reduce(function(n,r){return D(n,function(n){var o=y.getAt(n,r||""),i=e[r];return t(o,i)})},this.props.results),r={columnFilters:e};e?(r.filteredResults=n,r.maxPage=this.getMaxPage(r.filteredResults)):this.state.filter?r.filteredResults=this.props.useCustomFilterer?this.props.customFilterer(this.props.results,filter):this.defaultFilter(this.props.results,filter):r.filteredResults=null,this.setState(r)},filterByColumn:function(e,t){var n=this.state.columnFilters;if(n.hasOwnProperty(t)&&!e)n=I(n,t);else{var r={};r[t]=e,n=x({},n,r)}this.filterByColumnFilters(n)},setFilter:function(e){if(this.props.useExternal)return void this.props.externalSetFilter(e);var t=this,n={page:0,filter:e};n.filteredResults=this.props.useCustomFilterer?this.props.customFilterer(this.props.results,e):this.defaultFilter(this.props.results,e),n.maxPage=t.getMaxPage(n.filteredResults),(F(e)||T(e)||O(e))&&(n.filter=e,n.filteredResults=null),t.setState(n),this._resetSelectedRows()},setPageSize:function(e){if(this.props.useExternal)return this.setState({resultsPerPage:e}),void this.props.externalSetPageSize(e);this.state.resultsPerPage=e,this.setMaxPage()},toggleColumnChooser:function(){this.setState({showColumnChooser:!this.state.showColumnChooser})},isNullOrUndefined:function(e){return void 0===e||null===e},shouldUseCustomRowComponent:function(){return this.isNullOrUndefined(this.state.useCustomRowComponent)?this.props.useCustomRowComponent:this.state.useCustomRowComponent},shouldUseCustomGridComponent:function(){return this.isNullOrUndefined(this.state.useCustomGridComponent)?this.props.useCustomGridComponent:this.state.useCustomGridComponent},toggleCustomComponent:function(){"grid"===this.state.customComponentType?this.setState({useCustomGridComponent:!this.shouldUseCustomGridComponent()}):"row"===this.state.customComponentType&&this.setState({useCustomRowComponent:!this.shouldUseCustomRowComponent()})},getMaxPage:function(e,t){return this.props.useExternal?this.props.externalMaxPage:(t||(t=(e||this.getCurrentResults()).length),Math.ceil(t/this.state.resultsPerPage))},setMaxPage:function(e){var t=this.getMaxPage(e);this.state.maxPage!==t&&this.setState({page:0,maxPage:t,filteredColumns:this.columnSettings.filteredColumns})},setPage:function(e){if(this.props.useExternal)return void this.props.externalSetPage(e);if(e*this.state.resultsPerPage<=this.state.resultsPerPage*this.state.maxPage){var t=this,n={page:e};t.setState(n)}this.props.enableInfiniteScroll&&this.setState({isSelectAllChecked:!1})},setColumns:function(e){this.columnSettings.filteredColumns=w(e)?e:[e],this.setState({filteredColumns:this.columnSettings.filteredColumns})},nextPage:function(){var e=this.getCurrentPage();e<this.getCurrentMaxPage()-1&&this.setPage(e+1)},previousPage:function(){var e=this.getCurrentPage();e>0&&this.setPage(e-1)},changeSort:function(e){if(!1!==this.props.enableSort){if(this.props.useExternal){var t=this.props.externalSortColumn!==e||!this.props.externalSortAscending;return this.setState({sortColumn:e,sortDirection:t?"asc":"desc"}),void this.props.externalChangeSort(e,t)}var n=_(this.props.columnMetadata,{columnName:e})||{},r=n.sortDirectionCycle?n.sortDirectionCycle:[null,"asc","desc"],o=null,i=r.indexOf(this.state.sortDirection&&e===this.state.sortColumn?this.state.sortDirection:null);i=(i+1)%r.length,o=r[i]?r[i]:null;var s={page:0,sortColumn:e,sortDirection:o};this.setState(s)}},componentWillReceiveProps:function(e){if(this.setMaxPage(e.results),e.resultsPerPage!==this.props.resultsPerPage&&this.setPageSize(e.resultsPerPage),this.columnSettings.columnMetadata=e.columnMetadata,e.results.length>0){var t=y.keys(e.results[0]);this.columnSettings.allColumns.length==t.length&&this.columnSettings.allColumns.every(function(e,n){return e===t[n]})||(this.columnSettings.allColumns=t)}else this.columnSettings.allColumns.length>0&&(this.columnSettings.allColumns=[]);if(e.selectedRowIds){var n=this.getDataForRender(this.getCurrentResults(e.results),this.columnSettings.getColumns(),!0);this.setState({isSelectAllChecked:this._getAreAllRowsChecked(e.selectedRowIds,A(n,this.props.uniqueIdentifier)),selectedRowIds:e.selectedRowIds})}},getInitialState:function(){return{maxPage:0,page:0,filteredResults:null,filteredColumns:[],filter:"",columnFilters:{},resultsPerPage:this.props.resultsPerPage||5,showColumnChooser:!1,isSelectAllChecked:!1,selectedRowIds:this.props.selectedRowIds}},componentWillMount:function(){this.verifyExternal(),this.verifyCustom(),this.columnSettings=new m(this.props.results.length>0?y.keys(this.props.results[0]):[],this.props.columns,this.props.childrenColumnName,this.props.columnMetadata,this.props.metadataColumns),this.rowSettings=new g(this.props.rowMetadata,this.props.useCustomTableRowComponent&&this.props.customTableRowComponent?this.props.customTableRowComponent:p,this.props.useCustomTableRowComponent),this.props.initialSort&&(this.props.useExternal?this.setState({sortColumn:this.props.externalSortColumn,sortDirection:this.props.externalSortAscending?"asc":"desc"}):this.changeSort(this.props.initialSort)),this.setMaxPage(),this.shouldUseCustomGridComponent()?this.setState({customComponentType:"grid"}):this.shouldUseCustomRowComponent()?this.setState({customComponentType:"row"}):this.setState({filteredColumns:this.columnSettings.filteredColumns})},componentDidMount:function(){if(this.props.componentDidMount&&"function"==typeof this.props.componentDidMount)return this.props.componentDidMount()},componentDidUpdate:function(){if(this.props.componentDidUpdate&&"function"==typeof this.props.componentDidUpdate)return this.props.componentDidUpdate(this.state)},verifyExternal:function(){!0===this.props.useExternal&&(null===this.props.externalSetPage&&console.error("useExternal is set to true but there is no externalSetPage function specified."),null===this.props.externalChangeSort&&console.error("useExternal is set to true but there is no externalChangeSort function specified."),null===this.props.externalSetFilter&&console.error("useExternal is set to true but there is no externalSetFilter function specified."),null===this.props.externalSetPageSize&&console.error("useExternal is set to true but there is no externalSetPageSize function specified."),null===this.props.externalMaxPage&&console.error("useExternal is set to true but externalMaxPage is not set."),null===this.props.externalCurrentPage&&console.error("useExternal is set to true but externalCurrentPage is not set. Griddle will not page correctly without that property when using external data."))},verifyCustom:function(){!0===this.props.useCustomGridComponent&&null===this.props.customGridComponent&&console.error("useCustomGridComponent is set to true but no custom component was specified."),!0===this.props.useCustomRowComponent&&null===this.props.customRowComponent&&console.error("useCustomRowComponent is set to true but no custom component was specified."),!0===this.props.useCustomGridComponent&&!0===this.props.useCustomRowComponent&&console.error("Cannot currently use both customGridComponent and customRowComponent."),!0===this.props.useCustomFilterer&&null===this.props.customFilterer&&console.error("useCustomFilterer is set to true but no custom filter function was specified."),!0===this.props.useCustomFilterComponent&&null===this.props.customFilterComponent&&console.error("useCustomFilterComponent is set to true but no customFilterComponent was specified.")},getDataForRender:function(e,t,n){var r=this,o=this;if(""!==this.state.sortColumn){var i,s=this.state.sortColumn,a=D(this.props.columnMetadata,{columnName:s}),l={columns:[],orders:[]};if(a.length>0&&(i=a[0].hasOwnProperty("customCompareFn")&&a[0].customCompareFn,a[0].multiSort&&(l=a[0].multiSort)),this.state.sortDirection)if("function"==typeof i)2===i.length?(e=e.sort(function(e,t){return i(k(e,s),k(t,s))}),"desc"===this.state.sortDirection&&e.reverse()):1===i.length&&(e=N(e,function(e){return i(k(e,s))},[this.state.sortDirection]));else{var u=[function(e){return(k(e,s)||"").toString().toLowerCase()}],p=[this.state.sortDirection];l.columns.forEach(function(e,t){u.push(function(t){return(k(t,e)||"").toString().toLowerCase()}),"asc"===l.orders[t]||"desc"===l.orders[t]?p.push(l.orders[t]):p.push(r.state.sortDirection)}),e=N(e,u,p)}}var c=this.getCurrentPage();if(!this.props.useExternal&&n&&this.state.resultsPerPage*(c+1)<=this.state.resultsPerPage*this.state.maxPage&&c>=0)if(this.isInfiniteScrollEnabled())e=E(e,(c+1)*this.state.resultsPerPage);else{var d=v(e,c*this.state.resultsPerPage);e=(b||C)(d,d.length-this.state.resultsPerPage)}for(var f=(this.columnSettings.getMetadataColumns,[]),h=0;h<e.length;h++){var m=e[h];void 0!==m[o.props.childrenColumnName]&&m[o.props.childrenColumnName].length>0&&(m.children=o.getDataForRender(m[o.props.childrenColumnName],t,!1),"children"!==o.props.childrenColumnName&&delete m[o.props.childrenColumnName]),f.push(m)}return f},getCurrentResults:function(e){return this.state.filteredResults||e||this.props.results},getCurrentPage:function(){return this.props.externalCurrentPage||this.state.page},getCurrentSort:function(){return this.props.useExternal?this.props.externalSortColumn:this.state.sortColumn},getCurrentSortAscending:function(){return this.props.useExternal?this.props.externalSortAscending:"asc"===this.state.sortDirection},getCurrentMaxPage:function(){return this.props.useExternal?this.props.externalMaxPage:this.state.maxPage},getSortObject:function(){return{enableSort:this.props.enableSort,changeSort:this.changeSort,sortColumn:this.getCurrentSort(),sortAscending:this.getCurrentSortAscending(),sortDirection:this.state.sortDirection,sortAscendingClassName:this.props.sortAscendingClassName,sortDescendingClassName:this.props.sortDescendingClassName,sortAscendingComponent:this.props.sortAscendingComponent,sortDescendingComponent:this.props.sortDescendingComponent,sortDefaultComponent:this.props.sortDefaultComponent}},_toggleSelectAll:function(){var e=this.getDataForRender(this.getCurrentResults(),this.columnSettings.getColumns(),!0),t=!this.state.isSelectAllChecked,n=JSON.parse(JSON.stringify(this.state.selectedRowIds)),r=this;S(e,function(e){r._updateSelectedRowIds(e[r.props.uniqueIdentifier],n,t)},this),this.setState({isSelectAllChecked:t,selectedRowIds:n}),this.props.onSelectionChange&&this.props.onSelectionChange(n,t)},_toggleSelectRow:function(e,t){var n=this.getDataForRender(this.getCurrentResults(),this.columnSettings.getColumns(),!0),r=JSON.parse(JSON.stringify(this.state.selectedRowIds));this._updateSelectedRowIds(e[this.props.uniqueIdentifier],r,t);var o=this._getAreAllRowsChecked(r,A(n,this.props.uniqueIdentifier));this.setState({isSelectAllChecked:o,selectedRowIds:r}),this.props.onSelectionChange&&this.props.onSelectionChange(r,o)},_updateSelectedRowIds:function(e,t,n){n?void 0===_(t,function(t){return e===t})&&t.push(e):t.splice(t.indexOf(e),1)},_getIsSelectAllChecked:function(){return this.state.isSelectAllChecked},_getAreAllRowsChecked:function(e,t){return t.length===P(t,e).length},_getIsRowChecked:function(e){return this.state.selectedRowIds.indexOf(e[this.props.uniqueIdentifier])>-1},getSelectedRowIds:function(){return this.state.selectedRowIds},_resetSelectedRows:function(){this.setState({isSelectAllChecked:!1,selectedRowIds:[]})},getMultipleSelectionObject:function(){return{isMultipleSelection:!_(this.props.results,function(e){return"children"in e})&&this.props.isMultipleSelection,toggleSelectAll:this._toggleSelectAll,getIsSelectAllChecked:this._getIsSelectAllChecked,toggleSelectRow:this._toggleSelectRow,getSelectedRowIds:this.getSelectedRowIds,getIsRowChecked:this._getIsRowChecked}},isInfiniteScrollEnabled:function(){return!this.props.useCustomPagerComponent&&this.props.enableInfiniteScroll},getClearFixStyles:function(){return{clear:"both",display:"table",width:"100%"}},getSettingsStyles:function(){return{float:"left",width:"50%",textAlign:"right"}},getFilterStyles:function(){return{float:"left",width:"50%",textAlign:"left",color:"#222",minHeight:"1px"}},getFilter:function(){return this.props.showFilter&&!1===this.shouldUseCustomGridComponent()?this.props.useCustomFilterComponent?o.createElement(h,{changeFilter:this.setFilter,placeholderText:this.props.filterPlaceholderText,customFilterComponent:this.props.customFilterComponent,results:this.props.results,currentResults:this.getCurrentResults()}):o.createElement(s,{changeFilter:this.setFilter,placeholderText:this.props.filterPlaceholderText}):""},getSettings:function(){return this.props.showSettings?o.createElement("button",{type:"button",className:this.props.settingsToggleClassName,onClick:this.toggleColumnChooser,style:this.props.useGriddleStyles?{background:"none",border:"none",padding:0,margin:0,fontSize:14}:null},this.props.settingsText,this.props.settingsIconComponent):""},getTopSection:function(e,t){if(!1===this.props.showFilter&&!1===this.props.showSettings)return"";var n=null,r=null,i=null;return this.props.useGriddleStyles&&(n=this.getFilterStyles(),r=this.getSettingsStyles(),i=this.getClearFixStyles()),o.createElement("div",{className:"top-section",style:i},o.createElement("div",{className:"griddle-filter",style:n},e),o.createElement("div",{className:"griddle-settings-toggle",style:r},t))},getPagingSection:function(e,t){if(!1!==(this.props.showPager&&!this.isInfiniteScrollEnabled()&&!this.shouldUseCustomGridComponent()))return o.createElement("div",{className:"griddle-footer"},this.props.useCustomPagerComponent?o.createElement(f,{customPagerComponentOptions:this.props.customPagerComponentOptions,next:this.nextPage,previous:this.previousPage,currentPage:e,maxPage:t,setPage:this.setPage,nextText:this.props.nextText,previousText:this.props.previousText,customPagerComponent:this.props.customPagerComponent}):o.createElement(a,{useGriddleStyles:this.props.useGriddleStyles,next:this.nextPage,previous:this.previousPage,nextClassName:this.props.nextClassName,nextIconComponent:this.props.nextIconComponent,previousClassName:this.props.previousClassName,previousIconComponent:this.props.previousIconComponent,currentPage:e,maxPage:t,setPage:this.setPage,nextText:this.props.nextText,previousText:this.props.previousText}))},getColumnSelectorSection:function(e,t){return this.state.showColumnChooser?o.createElement(l,{columns:e,selectedColumns:t,setColumns:this.setColumns,settingsText:this.props.settingsText,settingsIconComponent:this.props.settingsIconComponent,maxRowsText:this.props.maxRowsText,setPageSize:this.setPageSize,showSetPageSize:!this.shouldUseCustomGridComponent(),resultsPerPage:this.state.resultsPerPage,enableToggleCustom:this.props.enableToggleCustom,toggleCustomComponent:this.toggleCustomComponent,useCustomComponent:this.shouldUseCustomRowComponent()||this.shouldUseCustomGridComponent(),useGriddleStyles:this.props.useGriddleStyles,enableCustomFormatText:this.props.enableCustomFormatText,columnMetadata:this.props.columnMetadata}):""},getCustomGridSection:function(){return o.createElement(this.props.customGridComponent,r({data:this.props.results,className:this.props.customGridComponentClassName},this.props.gridMetadata))},getCustomRowSection:function(e,t,n,r,i){return o.createElement("div",null,o.createElement(d,{data:e,columns:t,metadataColumns:n,globalData:i,className:this.props.customRowComponentClassName,customComponent:this.props.customRowComponent,style:this.props.useGriddleStyles?this.getClearFixStyles():null}),this.props.showPager&&r)},getStandardGridSection:function(e,t,n,r,s){var a=this.getSortObject(),l=this.getMultipleSelectionObject(),u=this.shouldShowNoDataSection(e),p=this.getNoDataSection();return o.createElement("div",{className:"griddle-body"},o.createElement(i,{useGriddleStyles:this.props.useGriddleStyles,noDataSection:p,showNoData:u,columnSettings:this.columnSettings,rowSettings:this.rowSettings,sortSettings:a,multipleSelectionSettings:l,filterByColumn:this.filterByColumn,isSubGriddle:this.props.isSubGriddle,useGriddleIcons:this.props.useGriddleIcons,useFixedLayout:this.props.useFixedLayout,showPager:this.props.showPager,pagingContent:r,data:e,className:this.props.tableClassName,enableInfiniteScroll:this.isInfiniteScrollEnabled(),nextPage:this.nextPage,showTableHeading:this.props.showTableHeading,useFixedHeader:this.props.useFixedHeader,parentRowCollapsedClassName:this.props.parentRowCollapsedClassName,parentRowExpandedClassName:this.props.parentRowExpandedClassName,parentRowCollapsedComponent:this.props.parentRowCollapsedComponent,parentRowExpandedComponent:this.props.parentRowExpandedComponent,bodyHeight:this.props.bodyHeight,paddingHeight:this.props.paddingHeight,rowHeight:this.props.rowHeight,infiniteScrollLoadTreshold:this.props.infiniteScrollLoadTreshold,externalLoadingComponent:this.props.externalLoadingComponent,externalIsLoading:this.props.externalIsLoading,hasMorePages:s,onRowClick:this.props.onRowClick}))},getContentSection:function(e,t,n,r,o,i){return this.shouldUseCustomGridComponent()&&null!==this.props.customGridComponent?this.getCustomGridSection():this.shouldUseCustomRowComponent()?this.getCustomRowSection(e,t,n,r,i):this.getStandardGridSection(e,t,n,r,o)},getNoDataSection:function(){return null!=this.props.customNoDataComponent?o.createElement("div",{className:this.props.noDataClassName},o.createElement(this.props.customNoDataComponent,this.props.customNoDataComponentProps)):o.createElement(u,{noDataMessage:this.props.noDataMessage})},shouldShowNoDataSection:function(e){return!this.props.allowEmptyGrid&&(!1===this.props.useExternal&&(void 0===e||0===e.length)||!0===this.props.useExternal&&!1===this.props.externalIsLoading&&0===e.length)},render:function(){var e=this.getCurrentResults(),t=(this.props.tableClassName,this.getFilter()),n=this.getSettings(),r=this.getTopSection(t,n),i=[],s=this.columnSettings.getColumns(),a=this.getDataForRender(e,s,!0),l=this.columnSettings.getMetadataColumns();this.props.columnMetadata?S(this.props.columnMetadata,function(e){"boolean"==typeof e.visible&&!1===e.visible||i.push(e.columnName)}):i=y.keys(I(e[0],l)),i=this.columnSettings.orderColumns(i);var u=this.getCurrentPage(),p=this.getCurrentMaxPage(),c=u+1<p,d=this.getPagingSection(u,p),f=this.getContentSection(a,s,l,d,c,this.props.globalData),h=this.getColumnSelectorSection(i,s),m=this.props.gridClassName.length>0?"griddle "+this.props.gridClassName:"griddle";return m+=this.shouldUseCustomRowComponent()?" griddle-custom":"",o.createElement("div",{className:m},r,h,o.createElement("div",{className:"griddle-container",style:this.props.useGriddleStyles&&!this.props.isSubGriddle?{border:"1px solid #DDD"}:null},f))}});c.Griddle=e.exports=R},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(344),s=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=arguments.length<=1||void 0===arguments[1]?null:arguments[1],o=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];r(this,e),this.rowMetadata=t,this.rowComponent=n,this.isCustom=o}return o(e,[{key:"getRowKey",value:function(e,t){return this.hasRowMetadataKey()?e[this.rowMetadata.key]:i("grid_row")}},{key:"hasRowMetadataKey",value:function(){return this.hasRowMetadata()&&null!==this.rowMetadata.key&&void 0!==this.rowMetadata.key}},{key:"getBodyRowMetadataClass",value:function(e){return this.hasRowMetadata()&&null!==this.rowMetadata.bodyCssClassName&&void 0!==this.rowMetadata.bodyCssClassName?"function"==typeof this.rowMetadata.bodyCssClassName?this.rowMetadata.bodyCssClassName(e):this.rowMetadata.bodyCssClassName:null}},{key:"getHeaderRowMetadataClass",value:function(){return this.hasRowMetadata()&&null!==this.rowMetadata.headerCssClassName&&void 0!==this.rowMetadata.headerCssClassName?this.rowMetadata.headerCssClassName:null}},{key:"hasRowMetadata",value:function(){return null!==this.rowMetadata}}]),e}();e.exports=s},function(e,t,n){var r=n(9),o=r.Uint8Array;e.exports=o},function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}e.exports=n},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var s=e[n];t(s,n,e)&&(i[o++]=s)}return i}e.exports=n},function(e,t,n){function r(e,t){return!!(null==e?0:e.length)&&o(e,t,0)>-1}var o=n(114);e.exports=r},function(e,t){function n(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}e.exports=n},function(e,t,n){function r(e,t){var n=s(e),r=!n&&i(e),p=!n&&!r&&a(e),d=!n&&!r&&!p&&u(e),f=n||r||p||d,h=f?o(e.length,String):[],m=h.length;for(var g in e)!t&&!c.call(e,g)||f&&("length"==g||p&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||l(g,m))||h.push(g);return h}var o=n(248),i=n(49),s=n(2),a=n(50),l=n(46),u=n(75),p=Object.prototype,c=p.hasOwnProperty;e.exports=r},function(e,t){function n(e,t,n,r){var o=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}e.exports=n},function(e,t,n){function r(e,t,n){"__proto__"==t&&o?o(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var o=n(122);e.exports=r},function(e,t,n){function r(e,t,n,r){var c=-1,d=i,f=!0,h=e.length,m=[],g=t.length;if(!h)return m;n&&(t=a(t,l(n))),r?(d=s,f=!1):t.length>=p&&(d=u,f=!1,t=new o(t));e:for(;++c<h;){var y=e[c],v=null==n?y:n(y);if(y=r||0!==y?y:0,f&&v===v){for(var b=g;b--;)if(t[b]===v)continue e;m.push(y)}else d(t,v,r)||m.push(y)}return m}var o=n(61),i=n(105),s=n(106),a=n(8),l=n(43),u=n(66),p=200;e.exports=r},function(e,t){function n(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}e.exports=n},function(e,t,n){function r(e,t){return e&&o(e,t,i)}var o=n(229),i=n(13);e.exports=r},function(e,t,n){function r(e,t,n){var r=t(e);return i(e)?r:o(r,n(e))}var o=n(63),i=n(2);e.exports=r},function(e,t,n){function r(e,t,n){return t===t?s(e,t,n):o(e,i,n)}var o=n(111),i=n(235),s=n(315);e.exports=r},function(e,t,n){function r(e,t,n,s,a){return e===t||(null==e||null==t||!i(e)&&!i(t)?e!==e&&t!==t:o(e,t,n,s,r,a))}var o=n(233),i=n(14);e.exports=r},function(e,t,n){function r(e){if(!o(e))return i(e);var t=[];for(var n in Object(e))a.call(e,n)&&"constructor"!=n&&t.push(n);return t}var o=n(33),i=n(301),s=Object.prototype,a=s.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t){var n=-1,r=i(e)?Array(e.length):[];return o(e,function(e,o,i){r[++n]=t(e,o,i)}),r}var o=n(64),i=n(10);e.exports=r},function(e,t,n){function r(e,t,n){var r=-1;t=o(t.length?t:[p],l(i));var c=s(e,function(e,n,i){return{criteria:o(t,function(t){return t(e)}),index:++r,value:e}});return a(c,function(e,t){return u(e,t,n)})}var o=n(8),i=n(31),s=n(117),a=n(247),l=n(43),u=n(263),p=n(35);e.exports=r},function(e,t,n){function r(e){return"function"==typeof e?e:o}var o=n(35);e.exports=r},function(e,t){function n(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}e.exports=n},function(e,t,n){function r(e){return o(function(t,n){var r=-1,o=n.length,s=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(s=e.length>3&&"function"==typeof s?(o--,s):void 0,a&&i(n[0],n[1],a)&&(s=o<3?void 0:s,o=1),t=Object(t);++r<o;){var l=n[r];l&&e(t,l,r,s)}return t})}var o=n(23),i=n(129);e.exports=r},function(e,t,n){var r=n(19),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,n){function r(e,t,n,r,u,p){var c=n&a,d=e.length,f=t.length;if(d!=f&&!(c&&f>d))return!1;var h=p.get(e);if(h&&p.get(t))return h==t;var m=-1,g=!0,y=n&l?new o:void 0;for(p.set(e,t),p.set(t,e);++m<d;){var v=e[m],b=t[m];if(r)var _=c?r(b,v,m,t,e,p):r(v,b,m,e,t,p);if(void 0!==_){if(_)continue;g=!1;break}if(y){if(!i(t,function(e,t){if(!s(y,t)&&(v===e||u(v,e,n,r,p)))return y.push(t)})){g=!1;break}}else if(v!==b&&!u(v,b,n,r,p)){g=!1;break}}return p.delete(e),p.delete(t),g}var o=n(61),i=n(223),s=n(66),a=1,l=2;e.exports=r},function(e,t,n){function r(e){return s(i(e,void 0,o),e+"")}var o=n(323),i=n(133),s=n(135);e.exports=r},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n(78))},function(e,t,n){function r(e){return o(e,s,i)}var o=n(113),i=n(69),s=n(13);e.exports=r},function(e,t,n){function r(e){return o(e,s,i)}var o=n(113),i=n(128),s=n(76);e.exports=r},function(e,t,n){var r=n(63),o=n(68),i=n(69),s=n(145),a=Object.getOwnPropertySymbols,l=a?function(e){for(var t=[];e;)r(t,i(e)),e=o(e);return t}:s;e.exports=l},function(e,t,n){function r(e,t,n){if(!a(n))return!1;var r=typeof t;return!!("number"==r?i(n)&&s(t,n.length):"string"==r&&t in n)&&o(n[t],e)}var o=n(34),i=n(10),s=n(46),a=n(11);e.exports=r},function(e,t,n){function r(e){return e===e&&!o(e)}var o=n(11);e.exports=r},function(e,t){function n(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}e.exports=n},function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},function(e,t,n){function r(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var r=arguments,s=-1,a=i(r.length-t,0),l=Array(a);++s<a;)l[s]=r[t+s];s=-1;for(var u=Array(t+1);++s<t;)u[s]=r[s];return u[t]=n(l),o(e,this,u)}}var o=n(102),i=Math.max;e.exports=r},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}e.exports=n},function(e,t,n){var r=n(246),o=n(309),i=o(r);e.exports=i},function(e,t,n){var r=n(300),o=/^\./,i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,a=r(function(e){var t=[];return o.test(e)&&t.push(""),e.replace(i,function(e,n,r,o){t.push(r?o.replace(s,"$1"):n||e)}),t});e.exports=a},function(e,t){function n(e){if(null!=e){try{return o.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var r=Function.prototype,o=r.toString;e.exports=n},function(e,t,n){function r(e,t){return(a(e)?o:i)(e,s(t,3))}var o=n(104),i=n(228),s=n(31),a=n(2);e.exports=r},function(e,t,n){function r(e,t){return(a(e)?o:i)(e,s(t))}var o=n(103),i=n(64),s=n(119),a=n(2);e.exports=r},function(e,t,n){function r(e,t,n){var r=null==e?void 0:o(e,t);return void 0===r?n:r}var o=n(42);e.exports=r},function(e,t,n){function r(e,t){return null!=e&&i(e,t,o)}var o=n(230),i=n(278);e.exports=r},function(e,t,n){function r(e){if(!s(e)||o(e)!=a)return!1;var t=i(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&p.call(n)==d}var o=n(17),i=n(68),s=n(14),a="[object Object]",l=Function.prototype,u=Object.prototype,p=l.toString,c=u.hasOwnProperty,d=p.call(Object);e.exports=r},function(e,t,n){function r(e,t){return(a(e)?o:s)(e,i(t,3))}var o=n(8),i=n(31),s=n(117),a=n(2);e.exports=r},function(e,t,n){function r(e){return s(e)?o(a(e)):i(e)}var o=n(243),i=n(244),s=n(70),a=n(20);e.exports=r},function(e,t){function n(){return[]}e.exports=n},function(e,t,n){var r=n(110),o=n(23),i=n(73),s=o(function(e,t){return i(e)?r(e,t):[]});e.exports=s},function(e,t,n){!function(t,r){e.exports=function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.nodeInRoot=t.isNodeIn=t.createSelectable=t.SelectableGroup=void 0;var o=n(1),i=r(o),s=n(9),a=r(s),l=n(5),u=r(l),p=n(4),c=r(p);t.SelectableGroup=i.default,t.createSelectable=a.default,t.isNodeIn=u.default,t.nodeInRoot=c.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(2),u=r(l),p=n(3),c=r(p),d=n(4),f=r(d),h=n(5),m=r(h),g=n(6),y=r(g),v=n(7),b=r(v),_=n(8),E=r(_),S=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isBoxSelecting:!1,boxWidth:0,boxHeight:0},n._mouseDownData=null,n._registry=[],n._openSelector=n._openSelector.bind(n),n._mouseDown=n._mouseDown.bind(n),n._mouseUp=n._mouseUp.bind(n),n._selectElements=n._selectElements.bind(n),n._registerSelectable=n._registerSelectable.bind(n),n._unregisterSelectable=n._unregisterSelectable.bind(n),n._throttledSelect=(0,E.default)(n._selectElements,50),n}return s(t,e),a(t,[{key:"getChildContext",value:function(){return{selectable:{register:this._registerSelectable,unregister:this._unregisterSelectable}}}},{key:"componentDidMount",value:function(){this._applyMousedown(this.props.enabled)}},{key:"componentWillUnmount",value:function(){this._applyMousedown(!1)}},{key:"componentWillReceiveProps",value:function(e){e.enabled!==this.props.enabled&&this._applyMousedown(e.enabled)}},{key:"_registerSelectable",value:function(e,t){this._registry.push({key:e,domNode:t})}},{key:"_unregisterSelectable",value:function(e){this._registry=this._registry.filter(function(t){return t.key!==e})}},{key:"_applyMousedown",value:function(e){var t=e?"addEventListener":"removeEventListener";c.default.findDOMNode(this)[t]("mousedown",this._mouseDown)}},{key:"_openSelector",value:function(e){var t=Math.abs(this._mouseDownData.initialW-e.pageX),n=Math.abs(this._mouseDownData.initialH-e.pageY);this.setState({isBoxSelecting:!0,boxWidth:t,boxHeight:n,boxLeft:Math.min(e.pageX,this._mouseDownData.initialW),boxTop:Math.min(e.pageY,this._mouseDownData.initialH)}),this.props.selectOnMouseMove&&this._throttledSelect(e)}},{key:"_mouseDown",value:function(e){if(!(0,m.default)(e.target,function(e){return!!e.draggable})){var t=c.default.findDOMNode(this),n=void 0;window.addEventListener("mouseup",this._mouseUp),3!==e.which&&2!==e.button&&((0,f.default)(e.target,t)||(n=(0,y.default)(t),(0,b.default)({top:n.top,left:n.left,bottom:n.offsetHeight,right:n.offsetWidth},{top:e.pageY,left:e.pageX,offsetWidth:0,offsetHeight:0})))&&(this._mouseDownData={boxLeft:e.pageX,boxTop:e.pageY,initialW:e.pageX,initialH:e.pageY},this.props.preventDefault&&e.preventDefault(),window.addEventListener("mousemove",this._openSelector))}}},{key:"_mouseUp",value:function(e){window.removeEventListener("mousemove",this._openSelector),window.removeEventListener("mouseup",this._mouseUp),this._mouseDownData&&(this.props.onNonItemClick&&!this.state.isBoxSelecting&&(this._registry.some(function(t){var n=t.domNode;return(0,f.default)(e.target,n)})||this.props.onNonItemClick(e)),this._selectElements(e),this._mouseDownData=null,this.setState({isBoxSelecting:!1,boxWidth:0,boxHeight:0}))}},{key:"_selectElements",value:function(e){var t=[],n=c.default.findDOMNode(this.refs.selectbox),r=this.props.tolerance;n&&(this._registry.forEach(function(e){e.domNode&&(0,b.default)(n,e.domNode,r)&&t.push(e.key)}),this.props.onSelection(t,e))}},{key:"render",value:function(){var e=this.props.component;if(!this.props.enabled)return u.default.createElement(e,{className:this.props.className},this.props.children);var t={left:this.state.boxLeft,top:this.state.boxTop,width:this.state.boxWidth,height:this.state.boxHeight,zIndex:9e3,position:this.props.fixedPosition?"fixed":"absolute",cursor:"default"},n={backgroundColor:"transparent",border:"1px dashed #999",width:"100%",height:"100%",float:"left"};return u.default.createElement(e,{className:this.props.className},this.state.isBoxSelecting&&u.default.createElement("div",{style:t,ref:"selectbox"},u.default.createElement("span",{style:n})),this.props.children)}}]),t}(u.default.Component);S.propTypes={onSelection:u.default.PropTypes.func,component:u.default.PropTypes.node,tolerance:u.default.PropTypes.number,fixedPosition:u.default.PropTypes.bool,selectOnMouseMove:u.default.PropTypes.bool,preventDefault:u.default.PropTypes.bool,onNonItemClick:u.default.PropTypes.func,enabled:u.default.PropTypes.bool,className:u.default.PropTypes.string},S.defaultProps={onSelection:function(){},component:"div",tolerance:0,fixedPosition:!1,selectOnMouseMove:!1,preventDefault:!0,enabled:!0},S.childContextTypes={selectable:u.default.PropTypes.object},t.default=S},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(e,t){return(0,o.default)(e,function(e){return e===t})};t.default=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if("function"!=typeof t)throw new Error("isNodeIn second parameter must be a function");for(var n=e;n;){if(t(n))return!0;n=n.parentNode}return!1};t.default=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.getBoundingClientRect();return{top:t.top+document.body.scrollTop,left:t.left+document.body.scrollLeft,offsetWidth:e.offsetWidth,offsetHeight:e.offsetHeight}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(e,t,n,r,o,i,s,a,l){return void 0===l&&(l=0),!(e+i-l<n||e+l>n+a||t+o-l<r||t+l>r+s)};t.default=function(e,t,n){var r=e instanceof HTMLElement?(0,o.default)(e):e,s=t instanceof HTMLElement?(0,o.default)(t):t;return i(r.top,r.left,s.top,s.left,r.offsetWidth,r.offsetHeight,s.offsetWidth,s.offsetHeight,n)}},function(e,t){(function(t){"use strict";function n(e,t,n){function r(t){var n=m,r=g;return m=g=void 0,E=t,v=e.apply(r,n)}function i(e){return E=e,b=setTimeout(p,t),w?r(e):v}function s(e){var n=e-_,r=e-E,o=t-n;return O?C(o,y-r):o}function l(e){var n=e-_,r=e-E;return void 0===_||n>=t||n<0||O&&r>=y}function p(){var e=P();if(l(e))return c(e);b=setTimeout(p,s(e))}function c(e){return b=void 0,T&&m?r(e):(m=g=void 0,v)}function d(){void 0!==b&&clearTimeout(b),E=0,m=_=g=b=void 0}function f(){return void 0===b?v:c(P())}function h(){var e=P(),n=l(e);if(m=arguments,g=this,_=e,n){if(void 0===b)return i(_);if(O)return b=setTimeout(p,t),r(_)}return void 0===b&&(b=setTimeout(p,t)),v}var m,g,y,v,b,_,E=0,w=!1,O=!1,T=!0;if("function"!=typeof e)throw new TypeError(u);return t=a(t)||0,o(n)&&(w=!!n.leading,O="maxWait"in n,y=O?S(a(n.maxWait)||0,t):y,T="trailing"in n?!!n.trailing:T),h.cancel=d,h.flush=f,h}function r(e,t,r){var i=!0,s=!0;if("function"!=typeof e)throw new TypeError(u);return o(r)&&(i="leading"in r?!!r.leading:i,s="trailing"in r?!!r.trailing:s),n(e,t,{leading:i,maxWait:t,trailing:s})}function o(e){var t=void 0===e?"undefined":l(e);return!!e&&("object"==t||"function"==t)}function i(e){return!!e&&"object"==(void 0===e?"undefined":l(e))}function s(e){return"symbol"==(void 0===e?"undefined":l(e))||i(e)&&E.call(e)==c}function a(e){if("number"==typeof e)return e;if(s(e))return p;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(d,"");var n=h.test(e);return n||m.test(e)?g(e.slice(2),n?2:8):f.test(e)?p:+e}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u="Expected a function",p=NaN,c="[object Symbol]",d=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,m=/^0o[0-7]+$/i,g=parseInt,y="object"==(void 0===t?"undefined":l(t))&&t&&t.Object===Object&&t,v="object"==("undefined"==typeof self?"undefined":l(self))&&self&&self.Object===Object&&self,b=y||v||Function("return this")(),_=Object.prototype,E=_.toString,S=Math.max,C=Math.min,P=function(){return b.Date.now()};e.exports=r}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(2),u=r(l),p=n(3),c=r(p),d=function(e){var t=function(t){function n(){return o(this,n),i(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return s(n,t),a(n,[{key:"componentDidMount",value:function(){this.context.selectable.register(this.props.selectableKey,c.default.findDOMNode(this))}},{key:"componentWillUnmount",value:function(){this.context.selectable.unregister(this.props.selectableKey)}},{key:"render",value:function(){return u.default.createElement(e,this.props,this.props.children)}}]),n}(u.default.Component);return t.contextTypes={selectable:u.default.PropTypes.object},t.propTypes={selectableKey:u.default.PropTypes.any.isRequired},t};t.default=d}])}(n(0),n(5))}()},function(e,t){e.exports=Backend},function(e,t){e.exports=Config},function(e,t){e.exports=ReactAddonsTestUtils},function(e,t){e.exports=ReactDNDHtml5Backend},function(e,t){e.exports=ReduxForm},function(e,t){e.exports=getFormState},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(149),i=r(o),s=n(356),a=r(s),l=n(86),u=r(l),p=n(160),c=r(p),d=n(162),f=r(d),h=n(161),m=r(h);document.addEventListener("DOMContentLoaded",function(){(0,m.default)(),(0,c.default)();var e=i.default.getSection("SilverStripe\\AssetAdmin\\Controller\\AssetAdmin");a.default.add({path:e.url,component:u.default,indexRoute:{component:u.default},childRoutes:[{path:"show/:folderId/:viewAction/:fileId",component:u.default},{path:"show/:folderId/:viewAction",component:u.default},{path:"show/:folderId",component:u.default}]}),(0,f.default)()})},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(7),s=r(i),a=n(0),l=r(a),u=n(5),p=r(u),c=n(363),d=n(4),f=(0,d.loadComponent)("UploadField");s.default.entwine("ss",function(e){e(".js-react-boot input.entwine-uploadfield").entwine({getContainer:function(){var t=this.siblings(".uploadfield-holder")[0];if(!t){var n=e('<div class="uploadfield-holder"></div>');this.before(n),t=n[0]}return t},onunmatch:function(){this._super(),p.default.unmountComponentAtNode(this.getContainer())},onmatch:function(){this._super(),this.hide(),this.refresh()},onclick:function(e){e.preventDefault()},refresh:function(){var t=this.getAttributes(),n=e(this).closest("form"),r=function(){setTimeout(function(){n.trigger("change")},0)};p.default.render(l.default.createElement(f,o({},t,{onChange:r,noHolder:!0})),this.getContainer())},getAttributes:function(){var t=e(this).data("state"),n=e(this).data("schema");return(0,c.schemaMerge)(n,t)}})})},function(e,t,n){(function(t){e.exports=t.InsertEmbedModal=n(202)}).call(t,n(78))},function(e,t,n){(function(t){e.exports=t.InsertMediaModal=n(203)}).call(t,n(78))},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(0),s=r(i),a=n(1),l=r(a),u=n(4),p=r(u),c=n(359),d=n(3),f=n(6),h=function(e){var t=e.getState(),n=t.stateOverride&&t.stateOverride.fields,r=n&&n.length>0?l.default._t("AssetAdmin.UPDATE_FILE","Update file"):l.default._t("AssetAdmin.INSERT_FILE","Insert file");return e.mutateField("action_insert",function(e){return o({},e,{title:r||e.title})}),e.getState()},m=function(e){return function(t){var n=t.disabledIDs,r=t.findTreeByPath||c.findTreeByPath,i=o({},t,{findTreeByPath:function(e,t){var i=r(e,t),s=t.some(function(e){return n.includes(e)});return i?o({},i,{children:i.children.map(function(e){return o({},e,{disabled:s||n.includes(e.id)})})}):null}});return s.default.createElement(e,i)}},g=(0,f.compose)((0,d.connect)(function(e){return{disabledIDs:e.assetAdmin.gallery.selectedFiles}}),m),y=function(){p.default.transform("insert-media-modal",function(e){e.form.alterSchema("AssetAdmin.EditForm.fileInsertForm",h)}),p.default.transform("move-form-disabled",function(e){e.component("TreeDropdownField.AssetAdmin.MoveForm",g)})};t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=r(o),s=n(174),a=r(s),l=n(172),u=r(l),p=n(173),c=r(p),d=n(180),f=r(d),h=n(171),m=r(h),g=function(){i.default.component.register("UploadField",a.default),i.default.component.register("PreviewImageField",u.default),i.default.component.register("HistoryList",f.default),i.default.component.register("ProportionConstraintField",c.default),i.default.component.register("GalleryToolbar",m.default)};t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=r(o),s=n(6),a=n(192),l=r(a),u=n(199),p=r(u),c=n(201),d=r(c),f=n(198),h=r(f),m=n(196),g=r(m),y=function(){i.default.reducer.register("assetAdmin",(0,s.combineReducers)({gallery:l.default,queuedFiles:p.default,uploadField:d.default,previewField:h.default,imageLoad:g.default}))};t.default=y},function(e,t,n){"use strict";n(158),n(157),n(154),n(156)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),p=n(83),c=r(p),d=n(79),f=r(d),h=n(1),m=r(h),g=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,[{key:"render",value:function(){var e=this.props,t=e.enlarged,n=e.badge,r=e.onClick,o=["btn","btn-secondary","btn--no-text","font-icon-level-up","btn--icon-large","gallery__back"];t&&(o.push("z-depth-1"),o.push("gallery__back--droppable-hover"));var i=n?u.default.createElement(f.default,{className:"gallery__back-badge",status:n.status,message:n.message}):null;return u.default.createElement("button",{className:o.join(" "),title:m.default._t("AssetAdmin.BACK_DESCRIPTION","Navigate up a level"),onClick:r},i)}}]),t}(l.Component);g.propTypes={onClick:l.PropTypes.func,enlarged:l.PropTypes.bool,badge:l.PropTypes.shape(f.default.propTypes)},t.Component=g,t.default=(0,c.default)("GalleryItem")(g)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return{gallery:e.assetAdmin.gallery}}Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(7),p=r(u),c=n(0),d=r(c),f=n(5),h=r(f),m=n(150),g=r(m),y=n(3),v=n(4),b=n(81),_=r(b),E=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChangeValue=n.handleChangeValue.bind(n),n}return s(t,e),l(t,[{key:"componentDidMount",value:function(){var e=(0,p.default)(h.default.findDOMNode(this)).find(".dropdown");e.chosen({allow_single_deselect:!0,disable_search_threshold:20}),e.change(function(){return g.default.Simulate.click(e.find(":selected")[0])})}},{key:"getOptionByValue",value:function(e){return this.props.actions.find(function(t){return t.value===e})}},{key:"handleChangeValue",value:function(e){var t=this,n=null,r=this.getOptionByValue(e.target.value);return null===r?null:(n="function"==typeof r.confirm?r.confirm(this.props.items).then(function(){return r.callback(t.props.items)}).catch(function(e){if("cancelled"!==e)throw e}):r.callback(this.props.items)||Promise.resolve(),(0,p.default)(h.default.findDOMNode(this)).find(".dropdown").val("").trigger("liszt:updated"),n)}},{key:"render",value:function(){var e=this,t=this.props.actions.map(function(t,n){if(!e.props.items.length||t.canApply&&!t.canApply(e.props.items))return"";var r=(0,_.default)("bulk-actions__action","ss-ui-button","ui-corner-all",t.className||"font-icon-info-circled",{"bulk-actions__action--more":n>2});return d.default.createElement("button",{type:"button",className:r,key:t.value,onClick:e.handleChangeValue,value:t.value},t.label)}).filter(function(e){return e});if(!t.length)return null;var n=this.props.PopoverField;return d.default.createElement("div",{className:"bulk-actions fieldholder-small btn-group"},d.default.createElement("div",{className:"bulk-actions-counter"},this.props.items.length),t.slice(0,2),t.length>2&&n?d.default.createElement(n,{id:"BulkActions",popoverClassName:"bulk-actions__more-actions-menu",container:this,data:{placement:"bottom"}},t.slice(2)):t.slice(2))}}]),t}(c.Component);E.propTypes={items:d.default.PropTypes.array,actions:d.default.PropTypes.arrayOf(d.default.PropTypes.shape({value:d.default.PropTypes.string.isRequired,label:d.default.PropTypes.string.isRequired,className:d.default.PropTypes.string,destructive:d.default.PropTypes.bool,callback:d.default.PropTypes.func,canApply:d.default.PropTypes.func,confirm:d.default.PropTypes.func})),PopoverField:d.default.PropTypes.oneOfType([d.default.PropTypes.node,d.default.PropTypes.func])},E.defaultProps={items:[],actions:[],PopoverField:null};var S=(0,y.connect)(a)(E);t.Component=E,t.default=(0,v.inject)(["PopoverField"],function(e){return{PopoverField:e}},function(){return"BulkActions"})(S)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),p=n(54),c=n(82),d=r(c),f=n(79),h=r(f),m=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,[{key:"getOffset",value:function(){var e=this.props.offset;return{transform:e&&"translate("+e.x+"px, "+e.y+"px)"}}},{key:"render",value:function(){if(!this.props.isDragging)return null;var e=this.props.item;if(!e.selected)return null;var t=""+e.selected.length;return u.default.createElement("div",{className:"gallery-item__drag-layer"},u.default.createElement("div",{className:"gallery-item__drag-layer-item",style:this.getOffset()},t>1&&[u.default.createElement("div",{key:"1",className:"gallery-item__drag-shadow"}),u.default.createElement("div",{key:"2",className:"gallery-item__drag-shadow gallery-item__drag-shadow--second"}),u.default.createElement("div",{key:"3",className:"gallery-item__drag-shadow gallery-item__drag-shadow--third"})],u.default.createElement(d.default,e.props),t>1&&u.default.createElement(h.default,{className:"gallery-item__drag-layer-count",status:"primary",message:t})))}}]),t}(l.Component);m.propTypes={item:l.PropTypes.object,offset:l.PropTypes.shape({x:l.PropTypes.number.isRequired,y:l.PropTypes.number.isRequired}),isDragging:l.PropTypes.bool.isRequired};var g=function(e){return{item:e.getItem(),offset:e.getSourceClientOffset(),isDragging:e.isDragging()}};t.default=(0,p.DragLayer)(g)(m)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t={beginDrag:function(e){"function"==typeof e.onDrag&&e.onDrag(!0);var t=e.selectedFiles.concat([]);return 0===t.length&&t.push(e.item.id),{selected:t,props:e}},endDrag:function(e){"function"==typeof e.onDrag&&e.onDrag(!1)}},n=function(e,t){return{connectDragPreview:e.dragPreview(),connectDragSource:e.dragSource(),isDragging:t.isDragging()}},s=(0,p.DragSource)(e,t,n);return function(e){var t=function(t){function n(){return r(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return i(n,t),a(n,[{key:"componentDidMount",value:function(){this.props.connectDragPreview((0,c.getEmptyImage)(),{captureDraggingState:!0})}},{key:"render",value:function(){var t=this.props.connectDragSource,n=u.default.createElement(e,this.props);return t("string"==typeof n.type?n:u.default.createElement("div",{className:"gallery-item__draggable"},n))}}]),n}(l.Component);return t.propTypes={connectDragSource:l.PropTypes.func.isRequired,connectDragPreview:l.PropTypes.func.isRequired,item:l.PropTypes.shape({id:l.PropTypes.number.isRequired}).isRequired,onDrag:l.PropTypes.func,selectedFiles:l.PropTypes.arrayOf(l.PropTypes.number)},s(t)}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=s;var l=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(l),p=n(54),c=n(151)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),p=n(1),c=r(p),d=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.handleCreateFolder=e.handleCreateFolder.bind(e),e}return s(t,e),a(t,[{key:"handleCreateFolder",value:function(e){var t=this.props.onCreateFolder;e.preventDefault(),"function"==typeof t&&t()}},{key:"render",value:function(){var e=this.props.canEdit;return u.default.createElement("button",{id:"add-folder-button",className:"btn btn-secondary font-icon-folder-add btn--icon-xl",type:"button",onClick:this.handleCreateFolder,disabled:!e},u.default.createElement("span",{className:"btn__text btn__title"},c.default._t("AssetAdmin.ADD_FOLDER_BUTTON")))}}]),t}(l.Component);d.propTypes={canEdit:l.PropTypes.bool.isRequired,onCreateFolder:l.PropTypes.func.isRequired},t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),p=n(164),c=r(p),d=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleBackClick=n.handleBackClick.bind(n),n}return s(t,e),a(t,[{key:"handleBackClick",value:function(e){var t=this.props,n=t.onOpenFolder,r=t.folder;e.preventDefault(),"function"==typeof n&&n(r.parentId)}},{key:"render",value:function(){var e=this.props,t=e.folder,n=e.badges,r=e.onMoveFiles,o=t.parentId;if(null===o)return null;var i=n.find(function(e){return e.id===o});return u.default.createElement("div",{className:"gallery__back-container"},u.default.createElement(c.default,{item:{id:o},onClick:this.handleBackClick,onDropFiles:r,badge:i}))}}]),t}(l.Component);d.propTypes={folder:l.PropTypes.shape({id:l.PropTypes.number,title:l.PropTypes.string,parentId:l.PropTypes.number,canView:l.PropTypes.bool,canEdit:l.PropTypes.bool}).isRequired,badges:l.PropTypes.arrayOf(l.PropTypes.shape({id:l.PropTypes.number,message:l.PropTypes.node,status:l.PropTypes.string})).isRequired,onOpenFolder:l.PropTypes.func.isRequired,onMoveFiles:l.PropTypes.func.isRequired},t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),p=n(1),c=r(p),d=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,[{key:"render",value:function(){var e=this.props.canEdit;return u.default.createElement("button",{id:"upload-button",className:"btn btn-secondary font-icon-upload btn--icon-xl",type:"button",disabled:!e},u.default.createElement("span",{className:"btn__text btn__title"},c.default._t("AssetAdmin.DROPZONE_UPLOAD")))}}]),t}(l.Component);d.defaultProps={canEdit:l.PropTypes.func.isRequired},t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n=t.sort,r=e.assetAdmin.gallery,o=r.badges,i=r.sorters;return""===n&&(n=i[0].field+","+i[0].direction),{badges:o,sorters:i,sort:n}}Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),p=r(u),c=n(3),d=n(169),f=r(d),h=n(170),m=r(h),g=n(168),y=r(g),v=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSelectSort=n.handleSelectSort.bind(n),n.handleViewChange=n.handleViewChange.bind(n),n}return s(t,e),l(t,[{key:"handleSelectSort",value:function(e){this.props.onSort(e.currentTarget.value)}},{key:"handleViewChange",value:function(e){var t=e.currentTarget.value;this.props.onViewChange(t)}},{key:"renderSort",value:function(){var e=this;return"tile"!==this.props.view?null:p.default.createElement("div",{className:"gallery__sort fieldholder-small"},p.default.createElement("select",{className:"dropdown no-change-track no-chzn",tabIndex:"0",style:{width:"160px"},defaultValue:this.props.sort},this.props.sorters.map(function(t){return p.default.createElement("option",{key:t.field+"-"+t.direction,onClick:e.handleSelectSort,"data-field":t.field,"data-direction":t.direction,value:t.field+","+t.direction},t.label)})))}},{key:"renderViewChangeButtons",value:function(){var e=this;return["tile","table"].map(function(t){var n="table"===t?"list":"thumbnails",r=["gallery__view-change-button","btn btn-secondary","btn--icon-sm","btn--no-text"];return t===e.props.view?null:(r.push("font-icon-"+n),p.default.createElement("button",{id:"button-view-"+t,key:t,className:r.join(" "),type:"button",title:"Change view gallery/list",onClick:e.handleViewChange,value:t}))})}},{key:"render",value:function(){var e=this.props,t=e.badges,n=e.children,r=e.folder,o=e.onMoveFiles,i=e.onOpenFolder,s=e.onCreateFolder,a=e.BackButton,l=e.UploadButton,u=e.AddFolderButton,c=r.canEdit;return p.default.createElement("div",{className:"toolbar--content toolbar--space-save"},p.default.createElement("div",{className:"fill-width"},p.default.createElement("div",{className:"flexbox-area-grow"},p.default.createElement("div",{className:"btn-toolbar"},p.default.createElement(a,{folder:r,badges:t,onOpenFolder:i,onMoveFiles:o}),p.default.createElement(l,{canEdit:c}),p.default.createElement(u,{canEdit:c,onCreateFolder:s}),n)),p.default.createElement("div",{className:"gallery__state-buttons"},this.renderSort(),p.default.createElement("div",{className:"btn-group",role:"group","aria-label":"View mode"},this.renderViewChangeButtons()))))}}]),t}(u.Component);v.propTypes={onMoveFiles:u.PropTypes.func.isRequired,onCreateFolder:u.PropTypes.func.isRequired,onViewChange:u.PropTypes.func.isRequired,onOpenFolder:u.PropTypes.func.isRequired,onSort:u.PropTypes.func.isRequired,folder:u.PropTypes.shape({id:u.PropTypes.number,title:u.PropTypes.string,parentId:u.PropTypes.number,canView:u.PropTypes.bool,canEdit:u.PropTypes.bool}).isRequired,view:u.PropTypes.oneOf(["tile","table"]),sort:u.PropTypes.string,badges:u.PropTypes.arrayOf(u.PropTypes.shape({id:u.PropTypes.number,message:u.PropTypes.node,status:u.PropTypes.string})),BackButton:u.PropTypes.func,UploadButton:u.PropTypes.func,AddFolderButton:u.PropTypes.func},v.defaultProps={view:"tile",BackButton:f.default,UploadButton:m.default,AddFolderButton:y.default},t.Component=v,t.default=(0,c.connect)(a)(v)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n=e.config.SecurityID,r=t.id;return{securityID:n,upload:e.assetAdmin.previewField[r]||{},nameValue:(0,_.formValueSelector)(t.formid,w.default)(e,"Name")}}function l(e){return{actions:{previewField:(0,b.bindActionCreators)(S,e)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),c=r(p),d=n(0),f=r(d),h=n(56),m=r(h),g=n(12),y=r(g),v=n(3),b=n(6),_=n(152),E=n(197),S=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(E),C=n(37),P=n(153),w=r(P),O=n(81),T=r(O),F=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleAddedFile=n.handleAddedFile.bind(n),n.handleFailedUpload=n.handleFailedUpload.bind(n),n.handleSuccessfulUpload=n.handleSuccessfulUpload.bind(n),n.handleSending=n.handleSending.bind(n),n.handleUploadProgress=n.handleUploadProgress.bind(n),n.handleCancelUpload=n.handleCancelUpload.bind(n),n.handleRemoveErroredUpload=n.handleRemoveErroredUpload.bind(n),n.canFileUpload=n.canFileUpload.bind(n),n.updateFormData=n.updateFormData.bind(n),n}return s(t,e),u(t,[{key:"componentWillReceiveProps",value:function(e){(this.props.data.url&&e.data.url!==this.props.data.url||this.props.data.version&&e.data.version!==this.props.data.version)&&this.props.actions.previewField.removeFile(this.props.id)}},{key:"componentWillUnmount",value:function(){this.props.actions.previewField.removeFile(this.props.id)}},{key:"getDropzoneProps",value:function(){var e=this.props.data.uploadFileEndpoint,t=this.props.name,n={url:e&&e.url,method:e&&e.method,paramName:"Upload",clickable:"#preview-replace-button",maxFiles:1},r={height:y.default.THUMBNAIL_HEIGHT,width:y.default.THUMBNAIL_WIDTH},o=this.props.securityID;return{name:t,className:["asset-dropzone--button","preview-image-field__container",this.props.className,this.props.extraClass].join(" "),canUpload:e&&this.canEdit(),preview:r,folderId:this.props.data.parentid,options:n,securityID:o,uploadButton:!1,onAddedFile:this.handleAddedFile,onError:this.handleFailedUpload,onSuccess:this.handleSuccessfulUpload,onSending:this.handleSending,onUploadProgress:this.handleUploadProgress,canFileUpload:this.canFileUpload,updateFormData:this.updateFormData}}},{key:"getButtonClasses",value:function(e){return(0,T.default)(["preview-image-field__toolbar-button--"+e,"preview-image-field__toolbar-button"])}},{key:"updateFormData",value:function(e){e.append("ID",this.props.data.id),e.append("Name",this.props.nameValue)}},{key:"handleSending",value:function(e,t){this.props.actions.previewField.updateFile(this.props.id,{xhr:t})}},{key:"handleSuccessfulUpload",value:function(e){var t=JSON.parse(e.xhr.response);"function"==typeof this.props.onAutofill&&(this.props.onAutofill("FileFilename",t.Filename),this.props.onAutofill("FileHash",t.Hash),this.props.onAutofill("FileVariant",t.Variant),t.Name&&this.props.onAutofill(this.props.data.nameField,t.Name))}},{key:"handleFailedUpload",value:function(e,t){this.props.actions.previewField.failUpload(this.props.id,t)}},{key:"handleAddedFile",value:function(e){this.props.actions.previewField.addFile(this.props.id,e)}},{key:"handleRemoveErroredUpload",value:function(){if("function"==typeof this.props.onAutofill){var e=this.props.data.initialValues;this.props.onAutofill("FileFilename",e.FileFilename),this.props.onAutofill("FileHash",e.FileHash),this.props.onAutofill("FileVariant",e.FileVariant)}this.props.actions.previewField.removeFile(this.props.id)}},{key:"handleCancelUpload",value:function(){this.props.upload.xhr&&this.props.upload.xhr.abort(),this.handleRemoveErroredUpload()}},{key:"canFileUpload",value:function(e){var t=this.props.data.initialValues.FileFilename,n=(0,C.getFileExtension)(t),r=(0,C.getFileExtension)(e.name);if(!n||n===r)return!0;var o=c.default._t("AssetAdmin.CONFIRM_CHANGE_EXTENSION","Are you sure you want upload a file with a different extension?");return this.props.confirm(o)}},{key:"preventDefault",value:function(e){e.preventDefault()}},{key:"canEdit",value:function(){return!this.props.readOnly&&!this.props.disabled&&"folder"!==this.props.data.category}},{key:"handleUploadProgress",value:function(e,t){this.props.actions.previewField.updateFile(this.props.id,{progress:t})}},{key:"renderImage",value:function(){var e=this.props.data;if(!e.mock&&!e.exists&&!this.props.upload.url)return f.default.createElement("div",{className:"editor__file-preview-message--file-missing"},c.default._t("AssetAdmin.FILE_MISSING","File cannot be found"));var t=this.props.upload.category,n=t&&"image"!==t?y.default.DEFAULT_PREVIEW:this.props.upload.url||e.preview||e.url,r=f.default.createElement("img",{alt:"preview",src:n,className:"editor__thumbnail"}),o=this.props.upload.progress,i=e.url&&!o?f.default.createElement("a",{className:"editor__file-preview-link",href:e.url,target:"_blank"},r):null,s=o>0&&o<100?f.default.createElement("div",{className:"preview-image-field__progress"},f.default.createElement("div",{className:"preview-image-field__progress-bar",style:{width:o+"%"}})):null,a=this.props.upload.message,l=null;return a?l=f.default.createElement("div",{className:"preview-image-field__message preview-image-field__message--"+a.type},a.value):100===o&&(l=f.default.createElement("div",{className:"preview-image-field__message preview-image-field__message--success"},c.default._t("AssetAdmin.REPlACE_FILE_SUCCESS","Upload successful, the file will be replaced when you Save."))),f.default.createElement("div",{className:"editor__thumbnail-container"},i||r,s,l)}},{key:"renderToolbar",value:function(){var e=this.canEdit();return this.props.data.url||e?f.default.createElement("div",{className:"preview-image-field__toolbar fill-height"},this.props.data.url?f.default.createElement("a",{href:this.props.data.url,target:"_blank",className:this.getButtonClasses("link")},"Open"):null,e?f.default.createElement("button",{id:"preview-replace-button",onClick:this.preventDefault,className:this.getButtonClasses("replace"),type:"button"},"Replace"):null,this.props.upload.progress||this.props.upload.message?f.default.createElement("button",{onClick:this.handleCancelUpload,className:this.getButtonClasses("remove"),type:"button"},"Remove"):null):null}},{key:"render",value:function(){var e=this.getDropzoneProps();if(this.canEdit())return f.default.createElement(m.default,e,this.renderImage(),this.renderToolbar());var t=["preview-image-field__container",this.props.className,this.props.extraClass];return f.default.createElement("div",{className:t.join(" ")},this.renderImage(),this.renderToolbar())}}]),t}(d.Component);F.propTypes={id:d.PropTypes.string.isRequired,name:d.PropTypes.string,className:d.PropTypes.string,extraClass:d.PropTypes.string,readOnly:d.PropTypes.bool,disabled:d.PropTypes.bool,onAutofill:d.PropTypes.func,formid:d.PropTypes.string,nameValue:d.PropTypes.string,data:d.PropTypes.shape({id:d.PropTypes.number,parentid:d.PropTypes.number,version:d.PropTypes.number,url:d.PropTypes.string,mock:d.PropTypes.bool,exists:d.PropTypes.bool,preview:d.PropTypes.string,category:d.PropTypes.string,nameField:d.PropTypes.string,uploadFileEndpoint:d.PropTypes.shape({url:d.PropTypes.string.isRequired,method:d.PropTypes.string.isRequired,payloadFormat:d.PropTypes.string}),initialValues:d.PropTypes.object}).isRequired,upload:d.PropTypes.shape({url:d.PropTypes.string,progress:d.PropTypes.number,xhr:d.PropTypes.object,category:d.PropTypes.string,message:d.PropTypes.shape({type:d.PropTypes.string.isRequired,value:d.PropTypes.string.isRequired})}),actions:d.PropTypes.object,securityID:d.PropTypes.string,confirm:d.PropTypes.func},F.defaultProps={extraClass:"",className:"",data:{},upload:{},confirm:function(e){return window.confirm(e)}},t.Component=F,t.default=(0,v.connect)(a,l)(F)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(a),u=n(4),p=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(2!==a.Children.toArray(e.children).length)throw new Error("ProportionConstraintField must be passed two children -- one field for each value");return n}return i(t,e),s(t,[{key:"handleChange",value:function(e,t){var n=this.props,r=n.children,o=n.active,i=n.onAutofill,s=n.data.ratio,a=t.target.value,l=0===e?1:0,u=r[e].props.name,p=r[l].props.name,c=0===e?1/s:s,d=Math.round;i(u,a),o&&i(p,d(a*c))}},{key:"render",value:function(){var e=this,t=this.props.FieldGroup;return l.default.createElement(t,this.props,this.props.children.map(function(t,n){return(0,a.cloneElement)(t,{onChange:function(t){return e.handleChange(n,t)},key:n},t.props.children)}))}}]),t}(a.Component);p.propTypes={children:a.PropTypes.array,onAutofill:a.PropTypes.func,active:a.PropTypes.bool,data:a.PropTypes.shape({ratio:a.PropTypes.number.isRequired}),FieldGroup:a.PropTypes.oneOfType([a.PropTypes.element,a.PropTypes.func]).isRequired},p.defaultProps={active:!0},t.Component=p,t.default=(0,u.inject)(["FieldGroup"])(p)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n=t.id,r=[];return e.assetAdmin&&e.assetAdmin.uploadField&&e.assetAdmin.uploadField.fields&&e.assetAdmin.uploadField.fields[n]&&(r=e.assetAdmin.uploadField.fields[n].files||[]),{files:r,securityId:e.config.SecurityID}}function l(e){return{actions:{uploadField:(0,y.bindActionCreators)(x,e)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedUploadField=t.Component=void 0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),f=r(d),h=n(0),m=r(h),g=n(3),y=n(6),v=n(12),b=r(v),_=n(350),E=r(_),S=n(175),C=r(S),P=n(56),w=r(P),O=n(21),T=r(O),F=n(39),I=r(F),A=n(200),x=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(A),D=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderChild=n.renderChild.bind(n),n.handleAddShow=n.handleAddShow.bind(n),n.handleAddHide=n.handleAddHide.bind(n),n.handleAddInsert=n.handleAddInsert.bind(n),n.handleAddedFile=n.handleAddedFile.bind(n),n.handleSending=n.handleSending.bind(n),n.handleUploadProgress=n.handleUploadProgress.bind(n),n.handleFailedUpload=n.handleFailedUpload.bind(n),n.handleSuccessfulUpload=n.handleSuccessfulUpload.bind(n),n.handleItemRemove=n.handleItemRemove.bind(n),n.handleReplaceShow=n.handleReplaceShow.bind(n),n.handleChange=n.handleChange.bind(n),n.handleReplace=n.handleReplace.bind(n),n.state={selecting:!1,selectingItem:null},n}return s(t,e),c(t,[{key:"componentDidMount",value:function(){this.props.actions.uploadField.setFiles(this.props.id,this.props.data.files)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.files||[],n=e.files||[];this.compareValues(t,n)&&this.handleChange(e)}},{key:"compareValues",value:function(e,t){if(e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(e[n].id!==t[n].id)return!0;return!1}},{key:"handleAddedFile",value:function(e){var t=p({},e,{uploaded:!0});this.props.actions.uploadField.addFile(this.props.id,t)}},{key:"handleSending",value:function(e,t){this.props.actions.uploadField.updateQueuedFile(this.props.id,e._queuedId,{xhr:t})}},{key:"handleUploadProgress",value:function(e,t){this.props.actions.uploadField.updateQueuedFile(this.props.id,e._queuedId,{progress:t})}},{key:"handleSuccessfulUpload",value:function(e){var t=JSON.parse(e.xhr.response);if(void 0!==t[0].error)return void this.handleFailedUpload(e);this.props.actions.uploadField.succeedUpload(this.props.id,e._queuedId,t[0])}},{key:"handleFailedUpload",value:function(e,t){this.props.actions.uploadField.failUpload(this.props.id,e._queuedId,t)}},{key:"handleItemRemove",value:function(e,t){this.props.actions.uploadField.removeFile(this.props.id,t)}},{key:"handleReplaceShow",value:function(e,t){this.setState({selecting:!0,selectingItem:t})}},{key:"handleChange",value:function(e){if("function"==typeof e.onChange){var t=e.files.filter(function(e){return e.id}).map(function(e){return e.id}),n={Files:t};e.onChange(n)}}},{key:"handleSelect",value:function(e){e.preventDefault()}},{key:"handleAddShow",value:function(e){e.preventDefault(),this.setState({selecting:!0,selectingItem:null})}},{key:"handleAddHide",value:function(){this.setState({selecting:!1,selectingItem:null})}},{key:"handleAddInsert",value:function(e,t){return this.props.actions.uploadField.addFile(this.props.id,t),this.handleAddHide(),Promise.resolve({})}},{key:"handleReplace",value:function(e,t){var n=this.state.selectingItem,r=this.props,o=r.id,i=r.actions.uploadField,s=i.addFile,a=i.removeFile;if(!n)throw new Error("Tried to replace a file when none was selected.");return a(o,n),s(o,t),this.handleAddHide(),Promise.resolve({})}},{key:"canEdit",value:function(){return!this.props.disabled&&!this.props.readOnly}},{key:"renderDropzone",value:function(){if(!this.props.data.createFileEndpoint)return null;var e={height:b.default.SMALL_THUMBNAIL_HEIGHT,width:b.default.SMALL_THUMBNAIL_WIDTH},t=this.props.name,n={url:this.props.data.createFileEndpoint.url,method:this.props.data.createFileEndpoint.method,paramName:"Upload",thumbnailWidth:b.default.SMALL_THUMBNAIL_WIDTH,thumbnailHeight:b.default.SMALL_THUMBNAIL_HEIGHT};if(this.props.data.multi||(n.maxFiles=1),!this.canEdit())return this.props.files.length?null:m.default.createElement("p",null,f.default._t("AssetAdmin.EMPTY","No files"));var r=["uploadfield__dropzone"];this.props.files.length&&!this.props.data.multi&&r.push("uploadfield__dropzone--hidden");var o=this.props.securityId;return m.default.createElement(w.default,{name:t,canUpload:this.canEdit(),uploadButton:!1,uploadSelector:".uploadfield__upload-button, .uploadfield__backdrop",folderId:this.props.data.parentid,onAddedFile:this.handleAddedFile,onError:this.handleFailedUpload,onSuccess:this.handleSuccessfulUpload,onSending:this.handleSending,onUploadProgress:this.handleUploadProgress,preview:e,options:n,securityID:o,className:r.join(" ")},m.default.createElement("div",{className:"uploadfield__backdrop"}),m.default.createElement("span",{className:"uploadfield__droptext"},m.default.createElement("button",{type:"button",onClick:this.handleSelect,className:"uploadfield__upload-button"},f.default._t("AssetAdmin.BROWSE","Browse"))," ",f.default._t("AssetAdmin.OR","or")," ",m.default.createElement("button",{type:"button",onClick:this.handleAddShow,className:"uploadfield__add-button"},f.default._t("AssetAdmin.ADD_FILES","Add from files"))))}},{key:"renderDialog",value:function(){var e=this.state,t=e.selecting,n=e.selectingItem;return m.default.createElement(T.default,{title:!1,show:t,onInsert:n?this.handleReplace:this.handleAddInsert,onHide:this.handleAddHide,type:"select",bodyClassName:"modal__dialog",className:"insert-media-react__dialog-wrapper",fileAttributes:n?{ID:n.id}:null,folderId:n&&"object"===("undefined"==typeof item?"undefined":u(item))?n.parent.id:0})}},{key:"renderChild",value:function(e){var t={key:e.id,item:e,name:this.props.name,onRemove:this.handleItemRemove,canEdit:this.canEdit(),onView:this.handleReplaceShow};return m.default.createElement(C.default,t)}},{key:"render",value:function(){return m.default.createElement("div",{className:"uploadfield"},this.renderDropzone(),this.props.files.map(this.renderChild),this.renderDialog())}}]),t}(h.Component);D.propTypes={extraClass:m.default.PropTypes.string,id:m.default.PropTypes.string.isRequired,name:m.default.PropTypes.string.isRequired,onChange:m.default.PropTypes.func,value:m.default.PropTypes.shape({Files:m.default.PropTypes.arrayOf(m.default.PropTypes.number)}),files:m.default.PropTypes.arrayOf(I.default),readOnly:m.default.PropTypes.bool,disabled:m.default.PropTypes.bool,data:m.default.PropTypes.shape({createFileEndpoint:m.default.PropTypes.shape({url:m.default.PropTypes.string.isRequired,method:m.default.PropTypes.string.isRequired,payloadFormat:m.default.PropTypes.string.isRequired}),multi:m.default.PropTypes.bool,parentid:m.default.PropTypes.number})},D.defaultProps={value:{Files:[]},extraClass:"",className:""};var N=(0,g.connect)(a,l)(D);t.Component=D,t.ConnectedUploadField=N,t.default=(0,E.default)(N)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),p=n(0),c=r(p),d=n(204),f=r(d),h=n(39),m=r(h),g=n(37),y=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleRemove=n.handleRemove.bind(n),n.handleItemClick=n.handleItemClick.bind(n),n.handleView=n.handleView.bind(n),n}return s(t,e),a(t,[{key:"getThumbnailStyles",value:function(){return this.isImage()&&(this.exists()||this.uploading())?{backgroundImage:"url("+(this.props.item.smallThumbnail||this.props.item.url)+")"}:{}}},{key:"getThumbnailClassNames",value:function(){var e=["uploadfield-item__thumbnail"];return this.isImageSmallerThanThumbnail()&&e.push("uploadfield-item__thumbnail--small"),e.join(" ")}},{key:"getItemClassNames",value:function(){var e=this.props.item.category||"none",t=["fill-width","uploadfield-item","uploadfield-item--"+e];return this.exists()||this.uploading()||t.push("uploadfield-item--missing"),this.hasError()&&t.push("uploadfield-item--error"),t.join(" ")}},{key:"hasError",value:function(){return!!this.props.item.message&&"error"===this.props.item.message.type}},{key:"isImage",value:function(){return"image"===this.props.item.category}},{key:"exists",value:function(){return this.props.item.exists}},{key:"uploading",value:function(){return Boolean(this.props.item.uploaded)}},{key:"complete",value:function(){return this.uploading()&&this.props.item.id>0}},{key:"isImageSmallerThanThumbnail",value:function(){if(!this.isImage()||!this.exists()&&!this.uploading())return!1;var e=this.props.item.width,t=this.props.item.height;return t&&e&&t<f.default.SMALL_THUMBNAIL_HEIGHT&&e<f.default.SMALL_THUMBNAIL_WIDTH}},{key:"handleRemove",value:function(e){e.preventDefault(),this.props.onRemove&&this.props.onRemove(e,this.props.item)}},{key:"handleView",value:function(e){e.preventDefault(),this.props.onView&&this.props.onView(e,this.props.item)}},{key:"handleItemClick",value:function(e){e.preventDefault(),this.props.onItemClick&&this.props.onItemClick(e,this.props.item)}},{key:"renderErrorMessage",value:function(){var e=null;return this.hasError()?e=this.props.item.message.value:this.exists()||this.uploading()||(e=u.default._t("AssetAdmin.FILE_MISSING","File cannot be found")),null!==e?c.default.createElement("div",{className:"uploadfield-item__error-message"},e):null}},{key:"renderProgressBar",value:function(){var e={className:"uploadfield-item__progress-bar",style:{width:this.props.item.progress+"%"}};return!this.hasError()&&this.uploading()?this.complete()?c.default.createElement("div",{className:"uploadfield-item__complete-icon"}):c.default.createElement("div",{className:"uploadfield-item__upload-progress"},c.default.createElement("div",e)):null}},{key:"renderRemoveButton",value:function(){var e=this;if(!this.props.canEdit)return null;var t=["btn","uploadfield-item__remove-btn","btn-secondary","btn--no-text","font-icon-cancel","btn--icon-md"].join(" ");return c.default.createElement("button",{className:t,onClick:this.handleRemove,ref:function(t){e.backButton=t}})}},{key:"renderViewButton",value:function(){if(!this.props.canEdit)return null;var e=["btn","uploadfield-item__view-btn","btn-secondary","btn--no-text","font-icon-eye","btn--icon-md"].join(" ");return c.default.createElement("button",{className:e,onClick:this.handleView})}},{key:"renderFileDetails",value:function(){var e=this,t="";return this.props.item.size&&(t=", "+(0,g.fileSize)(this.props.item.size)),c.default.createElement("div",{className:"uploadfield-item__details fill-width flexbox-area-grow"},c.default.createElement("span",{className:"uploadfield-item__title",ref:function(t){e.title=t}},this.props.item.title),c.default.createElement("span",{className:"uploadfield-item__meta"},this.props.item.extension,t))}},{key:"render",value:function(){var e=this,t=this.props.name+"[Files][]";return c.default.createElement("div",{className:this.getItemClassNames()},c.default.createElement("input",{type:"hidden",value:this.props.item.id,name:t}),c.default.createElement("div",{ref:function(t){e.thumbnail=t},className:this.getThumbnailClassNames(),style:this.getThumbnailStyles(),onClick:this.handleItemClick,role:"button",tabIndex:this.props.onItemClick?0:-1}),this.renderFileDetails(),this.renderProgressBar(),this.renderErrorMessage(),this.renderViewButton(),this.renderRemoveButton())}}]),t}(p.Component);y.propTypes={canEdit:c.default.PropTypes.bool,name:c.default.PropTypes.string.isRequired,item:m.default,onRemove:c.default.PropTypes.func,onItemClick:c.default.PropTypes.func,onView:c.default.PropTypes.func},t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){function t(t){var n=t.config.sections.find(function(e){return e.name===m});return{Component:e,sectionConfig:n}}return(0,c.connect)(t)(y)}Object.defineProperty(t,"__esModule",{value:!0}),t.AssetAdminStateRouter=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),p=r(u),c=n(3),d=n(86),f=n(12),h=r(f),m="SilverStripe\\AssetAdmin\\Controller\\AssetAdmin",g={folderId:null,fileId:null,query:{},action:h.default.ACTIONS.EDIT_FILE},y=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleBrowse=n.handleBrowse.bind(n),n.getUrl=n.getUrl.bind(n),n.state=Object.assign({},g),n}return s(t,e),l(t,[{key:"getUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h.default.ACTIONS.EDIT_FILE,o=parseInt(e||0,10),i=parseInt(t||0,10),s=this.getFolderId(),a=o!==s&&null!==s,l=Object.assign({},n);return(a||l.page<=1)&&delete l.page,(0,d.buildUrl)({base:this.props.sectionConfig.url,folderId:o,fileId:i,query:l,action:r})}},{key:"getFolderId",value:function(){return null===this.state.folderId?null:parseInt(this.state.folderId||0,10)}},{key:"getFileId",value:function(){return parseInt(this.state.fileId||this.props.fileId||0,10)}},{key:"getViewAction",value:function(){return this.state.action||h.default.ACTIONS.EDIT_FILE}},{key:"getSectionProps",value:function(){var e=Object.assign({},this.props,{folderId:this.getFolderId(),fileId:this.getFileId(),viewAction:this.getViewAction(),query:this.state.query,getUrl:this.getUrl,onBrowse:this.handleBrowse});return delete e.Component,e}},{key:"handleBrowse",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h.default.ACTIONS.EDIT_FILE;if(r&&-1===Object.values(h.default.ACTIONS).indexOf(r))throw new Error("Invalid action provided: "+r);this.setState({folderId:e,fileId:t,query:n,action:r})}},{key:"render",value:function(){var e=this.getSectionProps(),t=this.props.Component;return p.default.createElement(t,e)}}]),t}(u.Component);y.propTypes={Component:u.PropTypes.oneOfType([u.PropTypes.element,u.PropTypes.func]),sectionConfig:u.PropTypes.shape({url:u.PropTypes.string.isRequired}).isRequired,fileId:u.PropTypes.number},t.AssetAdminStateRouter=y,t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return{actions:{unsavedForms:(0,d.bindActionCreators)(S,e)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),p=r(u),c=n(3),d=n(6),f=n(0),h=r(f),m=n(12),g=r(m),y=n(80),v=r(y),b=n(26),_=r(b),E=n(360),S=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(E),C=n(39),P=r(C),w=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleCancelKeyDown=n.handleCancelKeyDown.bind(n),n.handleClose=n.handleClose.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n.handleAction=n.handleAction.bind(n),n.handleLoadingSuccess=n.handleLoadingSuccess.bind(n),n.handleLoadingError=n.handleLoadingError.bind(n),n.handleFetchingSchema=n.handleFetchingSchema.bind(n),n.closeModal=n.closeModal.bind(n),n.openModal=n.openModal.bind(n),n.state={openModal:!1,loadingForm:!1,loadingError:null},n}return s(t,e),l(t,[{key:"handleAction",value:function(e,t){var n=e.currentTarget.name;if("action_addtocampaign"===n)return this.openModal(),void e.preventDefault();if("action_unpublish"===n){var r=p.default._t("AssetAdmin.CONFIRMUNPUBLISH","Are you sure you want to unpublish this record?");return void(confirm(r)||e.preventDefault())}if("action_delete"===n){var o=p.default._t("AssetAdmin.CONFIRMDELETE","Are you sure you want to delete this record?");this.props.file&&this.props.file.inUseCount>0&&(o=p.default.sprintf(p.default._t("AssetAdmin.BULK_ACTIONS_DELETE_SINGLE_CONFIRM","This file is currently used in %s place(s), are you sure you want to delete it?"),this.props.file.inUseCount),o+="\n\n",o+=p.default._t("AssetAdmin.BULK_ACTIONS_DELETE_WARNING","Ensure files are removed from content areas prior to deleting them, otherwise they will appear as broken links.")),confirm(o)&&(this.props.actions.unsavedForms.removeFormChanged("AssetAdmin.EditForm"),this.props.onDelete([t.ID])),e.preventDefault()}}},{key:"handleCancelKeyDown",value:function(e){e.keyCode!==g.default.SPACE_KEY_CODE&&e.keyCode!==g.default.RETURN_KEY_CODE||this.handleClose(e)}},{key:"handleSubmit",value:function(e,t,n){return"function"==typeof this.props.onSubmit?this.props.onSubmit(e,t,n):n()}},{key:"handleClose",value:function(e){this.props.onClose(),this.closeModal(),e&&e.preventDefault()}},{key:"openModal",value:function(){this.setState({openModal:!0})}},{key:"closeModal",value:function(){this.setState({openModal:!1})}},{key:"handleLoadingError",value:function(e){this.setState({loadingForm:!1,loadingError:e.errors[0]})}},{key:"handleLoadingSuccess",value:function(){this.setState({loadingForm:!1,loadingError:null})}},{key:"handleFetchingSchema",value:function(){this.setState({loadingForm:!0})}},{key:"renderCancelButton",value:function(){return h.default.createElement("a",{role:"button",tabIndex:0,className:"btn btn--close-panel btn--no-text font-icon-cancel btn--icon-xl",onClick:this.handleClose,onKeyDown:this.handleCancelKeyDown,type:"button","aria-label":p.default._t("AssetAdmin.CANCEL")})}},{key:"render",value:function(){var e=this.props.schemaUrlQueries.map(function(e){return e.name+"="+e.value}).join("&").trim();e=e?"?"+e:"";var t=this.props.schemaUrl+"/"+this.props.targetId+e,n=this.props.addToCampaignSchemaUrl+"/"+this.props.targetId,r=["panel","form--no-dividers","editor"];this.props.className&&r.push(this.props.className);var o=null;if(this.state.loadingError){var i=this.state.loadingError.value;404===this.state.loadingError.code&&(i=p.default._t("AssetAdmin.FILE_MISSING","File cannot be found")),i||(i=p.default._t("Admin.UNKNOWN_ERROR","An unknown error has occurred")),o=h.default.createElement("div",{className:"editor__file-preview-message--file-missing"},i)}var s=p.default._t("Admin.ADD_TO_CAMPAIGN","Add to campaign");return h.default.createElement("div",{className:r.join(" ")},h.default.createElement("div",{className:"editor__details fill-height"},h.default.createElement(v.default,{identifier:"AssetAdmin.EditForm",schemaUrl:t,afterMessages:this.renderCancelButton(),onSubmit:this.handleSubmit,onAction:this.handleAction,onLoadingSuccess:this.handleLoadingSuccess,onLoadingError:this.handleLoadingError,onFetchingSchema:this.handleFetchingSchema}),o,h.default.createElement(_.default,{title:s,identifier:"AssetAdmin.AddToCampaign",show:this.state.openModal,onHide:this.closeModal,schemaUrl:n,bodyClassName:"modal__dialog",responseClassBad:"modal__response modal__response--error",responseClassGood:"modal__response modal__response--good"}),this.state.loadingForm&&[h.default.createElement("div",{key:"overlay",className:"cms-content-loading-overlay ui-widget-overlay-light"}),h.default.createElement("div",{key:"spinner",className:"cms-content-loading-spinner"})]))}}]),t}(f.Component);w.propTypes={file:P.default,className:f.PropTypes.string,targetId:f.PropTypes.number.isRequired,onClose:f.PropTypes.func.isRequired,onSubmit:f.PropTypes.func.isRequired,onDelete:f.PropTypes.func.isRequired,schemaUrl:f.PropTypes.string.isRequired,schemaUrlQueries:f.PropTypes.arrayOf(f.PropTypes.shape({name:f.PropTypes.string,value:f.PropTypes.any})),addToCampaignSchemaUrl:f.PropTypes.string,actions:f.PropTypes.object},t.Component=w,t.default=(0,c.connect)(function(){return{}},a)(w)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=r(l),p=n(54),c=n(151),d=r(c),f=n(166),h=r(f),m=null,g=(0,p.DragDropContext)(function(e){return m=e,(0,d.default)(e)}),y=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),a(t,[{key:"componentDidMount",value:function(){window.addEventListener("drop",this.handleDrop,!0)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("drop",this.handleDrop,!0)}},{key:"handleDrop",value:function(){var e=m&&m.backend;e&&e.isDraggingNativeItem()&&e.endDragNativeItem()}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.children;return u.default.createElement("div",{className:t},n,u.default.createElement(h.default,null))}}]),t}(l.Component);y.propTypes={className:l.PropTypes.string,children:u.default.PropTypes.oneOfType([u.default.PropTypes.arrayOf(u.default.PropTypes.node),u.default.PropTypes.node])},t.default=g(y)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(a),u=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleClick=n.handleClick.bind(n),n}return i(t,e),s(t,[{key:"handleClick",value:function(e){e.preventDefault(),"function"==typeof this.props.onClick&&this.props.onClick(this.props.versionid)}},{key:"render",value:function(){var e=null;return"Published"===this.props.status&&(e=l.default.createElement("p",null,l.default.createElement("span",{className:"history-item__status-flag"},this.props.status)," at ",this.props.date_formatted)),l.default.createElement("li",{className:"list-group-item history-item",onClick:this.handleClick},l.default.createElement("p",null,l.default.createElement("span",{className:"history-item__version"},"v.",this.props.versionid),l.default.createElement("span",{className:"history-item__date"},this.props.date_ago," ",this.props.author),this.props.summary),e)}}]),t}(a.Component);u.propTypes={versionid:a.PropTypes.number.isRequired,summary:a.PropTypes.oneOfType([a.PropTypes.bool,a.PropTypes.string]).isRequired,status:a.PropTypes.string,author:a.PropTypes.string,date_formatted:a.PropTypes.string,date_ago:a.PropTypes.string,onClick:a.PropTypes.func},t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.config.sections.find(function(e){return e.name===E});return{sectionConfig:t,historySchemaUrl:t.form.fileHistoryForm.schemaUrl}}Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(0),c=r(p),d=n(3),f=n(148),h=r(f),m=n(149),g=r(m),y=n(179),v=r(y),b=n(80),_=r(b),E="SilverStripe\\AssetAdmin\\Controller\\AssetAdmin",S=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return h.default.createEndpointFetcher(Object.assign({},e,t?{defaultData:{SecurityID:g.default.get("SecurityID")}}:{}))},C=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={detailView:null,history:[],loadedDetails:!1},n.handleClick=n.handleClick.bind(n),n.handleBack=n.handleBack.bind(n),n.timer=null,n.api=S(e.sectionConfig.historyEndpoint),n}return s(t,e),u(t,[{key:"componentDidMount",value:function(){this.refreshHistoryIfNeeded()}},{key:"componentWillReceiveProps",value:function(e){this.refreshHistoryIfNeeded(e)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer),this.timer=null}},{key:"refreshHistoryIfNeeded",value:function(e){var t=this;if(!e&&!this.state.loadedDetails||e.data.fileId!==this.props.data.fileId||e.data.latestVersionId!==this.props.data.latestVersionId){this.setState({loadedDetails:!1});var n=e?e.data.fileId:this.props.data.fileId;clearTimeout(this.timer),this.timer=setTimeout(function(){t.api({fileId:n}).then(function(e){t.timer&&t.setState({history:e,loadedDetails:!0})})},250)}}},{key:"handleClick",value:function(e){this.setState({viewDetails:e})}},{key:"handleBack",value:function(e){e.preventDefault(),this.setState({viewDetails:null})}},{key:"render",value:function(){var e=this;if(!this.state.loadedDetails)return c.default.createElement("div",{className:"history-list history-list--loading"},"Loading...");if(this.state.viewDetails){var t=[this.props.historySchemaUrl,this.props.data.fileId,this.state.viewDetails].join("/"),n=["btn","btn-secondary","btn--icon-xl","btn--no-text","font-icon-left-open-big","history-list__back"].join(" ");return c.default.createElement("div",{className:"history-list"},c.default.createElement("a",{href:"#",className:n,onClick:this.handleBack}),c.default.createElement(_.default,{identifier:"AssetAdmin.HistoryList",schemaUrl:t}))}var r=this.state.history||[];return c.default.createElement("div",{className:"history-list"},c.default.createElement("ul",{className:"list-group list-group-flush history-list__list"},r.map(function(t){return c.default.createElement(v.default,l({key:t.versionid},t,{onClick:e.handleClick}))})))}}]),t}(p.Component);C.propTypes={sectionConfig:c.default.PropTypes.shape({form:c.default.PropTypes.object,historyEndpoint:c.default.PropTypes.shape({url:c.default.PropTypes.string,method:c.default.PropTypes.string,responseFormat:c.default.PropTypes.string})}),historySchemaUrl:c.default.PropTypes.string,data:c.default.PropTypes.object},C.defaultProps={data:{fieldId:0}},t.Component=C,t.default=(0,d.connect)(a)(C)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=e.assetAdmin.gallery,n=t.modal,r=t.selectedFiles;return{show:n===y.default.MODAL_MOVE,selectedFiles:r,title:m.default.sprintf(m.default._t("AssetAdmin.MOVE_ITEMS_TO","Move %s item(s) to..."),r.length)}}function l(e){return{onHide:function(){e((0,v.deactivateModal)())},setNotice:function(t){e((0,v.setNoticeMessage)(t))},setError:function(t){e((0,v.setErrorMessage)(t))},setBadge:function(){e(v.setFileBadge.apply(void 0,arguments))}}}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(0),c=r(p),d=n(3),f=n(6),h=n(1),m=r(h),g=n(12),y=r(g),v=n(58),b=n(26),_=r(b),E=n(28),S=r(E),C=n(89),P=r(C),w=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSubmit=n.handleSubmit.bind(n),n.timeout=null,n}return s(t,e),u(t,[{key:"handleSubmit",value:function(e){var t=this,n=e.FolderID,r=this.props.actions.files.moveFiles,o=this.props,i=o.selectedFiles,s=o.onSuccess,a=o.onHide,l=o.setNotice,u=o.setError,p=o.setBadge;return r(n||0,i).then(function(e){var r=e.data.moveFiles,o=r.id,u=r.filename;"function"==typeof s&&s(n,i),p(o,""+i.length,"success",y.default.MOVE_SUCCESS_DURATION);var d=function(e){e.preventDefault(),t.props.onOpenFolder(o),l(null)};l({react:c.default.createElement("span",null,m.default.sprintf(m.default._t("AssetAdmin.MOVED_ITEMS_TO","Moved %s item(s) to "),i.length),c.default.createElement("a",{href:"#",onClick:d},u))}),t.timeout=setTimeout(function(){return l(null)},y.default.MOVE_SUCCESS_DURATION),a()}).catch(function(){u(m.default._t("AssetAdmin.FAILED_MOVE","There was an error moving the selected items."))})}},{key:"render",value:function(){var e=this.props,t=e.show,n=e.onHide,r=e.title,o=e.folderId,i=e.sectionConfig,s=i.form.moveForm.schemaUrl;return c.default.createElement(_.default,{title:r,show:t,onHide:n,onSubmit:this.handleSubmit,identifier:"AssetAdmin.MoveForm",schemaUrl:s+"/"+o})}}]),t}(c.default.Component);w.propTypes={sectionConfig:S.default,folderId:c.default.PropTypes.number.isRequired,show:c.default.PropTypes.bool,onHide:c.default.PropTypes.func,setNotice:c.default.PropTypes.func,setBadge:c.default.PropTypes.func,setError:c.default.PropTypes.func,title:c.default.PropTypes.string,onSuccess:c.default.PropTypes.func,onOpenFolder:c.default.PropTypes.func.isRequired,selectedFiles:c.default.PropTypes.array.isRequired,actions:c.default.PropTypes.shape({files:c.default.PropTypes.shape({moveFiles:c.default.PropTypes.func})}).isRequired},w.defaultProps={show:!1},t.default=(0,f.compose)((0,d.connect)(a,l),P.default)(w)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(0),c=r(p),d=n(99),f=r(d),h=n(1),m=r(h),g=n(57),y=n(37),v=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getColumns=n.getColumns.bind(n),n.handleSort=n.handleSort.bind(n),n.handleSetPage=n.handleSetPage.bind(n),n.handleRowClick=n.handleRowClick.bind(n),n.renderSelect=n.renderSelect.bind(n),n.renderTitle=n.renderTitle.bind(n),n.renderNoItemsNotice=n.renderNoItemsNotice.bind(n),n.state={enableSort:!1},n}return s(t,e),u(t,[{key:"componentDidMount",value:function(){this.setState({enableSort:!0})}},{key:"componentWillUnmount",value:function(){this.setState({enableSort:!1})}},{key:"getColumns",value:function(){var e=["thumbnail","title","size","lastEdited"];return this.props.selectableItems&&e.unshift("selected"),e}},{key:"getColumnConfig",value:function(){return[{columnName:"selected",sortable:!1,displayName:"",cssClassName:"gallery__table-column--select",customComponent:this.renderSelect},{columnName:"thumbnail",sortable:!1,displayName:"",cssClassName:"gallery__table-column--image",customComponent:this.renderThumbnail},{columnName:"title",customCompareFn:function(){return 0},cssClassName:"gallery__table-column--title",customComponent:this.renderTitle},{columnName:"lastEdited",displayName:"Modified",customComponent:this.renderDate},{columnName:"size",sortable:!1,displayName:"Size",cssClassName:"sort--disabled",customComponent:this.renderSize}]}},{key:"getRowMetadata",value:function(e){return"gallery__table-row "+(e.highlighted?"gallery__table-row--highlighted":"")}},{key:"getTableProps",value:function(){var e=this.props.sort.split(","),t=l(e,2),n=t[0],r=t[1];return{tableClassName:"gallery__table table table-hover",gridClassName:"gallery__main-view--table",rowMetadata:{bodyCssClassName:this.getRowMetadata},sortAscendingComponent:"",sortDescendingComponent:"",useExternal:!0,externalSetPage:this.handleSetPage,externalChangeSort:this.handleSort,externalSetFilter:function(){return null},externalSetPageSize:function(){return null},externalCurrentPage:this.props.page-1,externalMaxPage:Math.ceil(this.props.totalCount/this.props.limit),externalSortColumn:n,externalSortAscending:this.state.enableSort?"asc"===r:"asc"!==r,initialSort:n,columns:this.getColumns(),columnMetadata:this.getColumnConfig(),useGriddleStyles:!1,onRowClick:this.handleRowClick,results:this.props.files,customNoDataComponent:this.renderNoItemsNotice}}},{key:"handleActivate",value:function(e,t){"folder"===t.type?this.props.onOpenFolder(e,t):this.props.onOpenFile(e,t)}},{key:"handleRowClick",value:function(e,t){var n=e.props.data;if(t.currentTarget.classList.contains("gallery__table-column--select")&&(t.stopPropagation(),t.preventDefault(),"function"==typeof this.props.onSelect))return void this.props.onSelect(t,n);this.handleActivate(t,n)}},{key:"handleSort",value:function(e,t){var n=t?"asc":"desc";this.state.enableSort&&this.props.onSort(e+","+n)}},{key:"handleSetPage",value:function(e){this.props.onSetPage(e+1)}},{key:"preventFocus",value:function(e){e.preventDefault()}},{key:"renderNoItemsNotice",value:function(){return 0!==this.props.files.length||this.props.loading?null:c.default.createElement("p",{className:"gallery__no-item-notice"},m.default._t("AssetAdmin.NOITEMSFOUND"))}},{key:"renderSize",value:function(e){if("folder"===e.rowData.type)return null;var t=(0,y.fileSize)(e.data);return c.default.createElement("span",null,t)}},{key:"renderProgressBar",value:function(e){if(!e.uploading||e.message&&"error"===e.message.type)return null;if(e.id>0)return c.default.createElement("div",{className:"gallery__progress-bar--complete"});var t={className:"gallery__progress-bar-progress",style:{width:e.progress+"%"}};return c.default.createElement("div",{className:"gallery__progress-bar"},c.default.createElement("div",t))}},{key:"renderTitle",value:function(e){var t=this.renderProgressBar(e.rowData);return c.default.createElement("div",{className:"fill-width"},c.default.createElement("div",{className:"flexbox-area-grow"},e.data),t)}},{key:"renderSelect",value:function(e){return c.default.createElement("input",{type:"checkbox",title:m.default._t("AssetAdmin.SELECT"),checked:e.data,tabIndex:"-1",onMouseDown:this.preventFocus})}},{key:"renderDate",value:function(e){return"folder"===e.rowData.type?null:c.default.createElement("span",null,e.data)}},{key:"renderThumbnail",value:function(e){var t=e.data||e.rowData.url,n=e.rowData.uploading,r=e.rowData.category||"false",o="gallery__table-image",i=[o],s={};return i.push(o+"--"+r),"image"===r&&t&&(s.backgroundImage='url("'+t+'")'),n||t||"folder"===r||i.push(o+"--error"),c.default.createElement("div",{className:i.join(" "),style:s})}},{key:"render",value:function(){return c.default.createElement(f.default,this.getTableProps())}}]),t}(p.Component);v.defaultProps=g.galleryViewDefaultProps,v.propTypes=a({},g.galleryViewPropTypes,{sort:p.PropTypes.string.isRequired}),t.Component=v,t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),p=n(0),c=r(p),d=n(82),f=n(57),h=n(99),m=r(h),g=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderItem=n.renderItem.bind(n),n.handleSetPage=n.handleSetPage.bind(n),n.handlePrevPage=n.handlePrevPage.bind(n),n.handleNextPage=n.handleNextPage.bind(n),n.handleDrag=n.handleDrag.bind(n),n}return s(t,e),a(t,[{key:"handleDrag",value:function(e){this.props.onEnableDropzone(!e)}},{key:"handleSetPage",value:function(e){this.props.onSetPage(e+1)}},{key:"handleNextPage",value:function(){var e=this.props.page-1;this.handleSetPage(e+1)}},{key:"handlePrevPage",value:function(){var e=this.props.page-1;if(0===e)return void this.handleSetPage(e);this.handleSetPage(e-1)}},{key:"folderFilter",value:function(e){return"folder"===e.type}},{key:"fileFilter",value:function(e){return"folder"!==e.type}},{key:"renderPagination",value:function(){if(this.props.totalCount<=this.props.limit)return null;var e={setPage:this.handleSetPage,maxPage:Math.ceil(this.props.totalCount/this.props.limit),next:this.handleNextPage,nextText:u.default._t("AssetAdmin.NEXT","Next"),previous:this.handlePrevPage,previousText:u.default._t("AssetAdmin.PREVIOUS","Previous"),currentPage:this.props.page-1,useGriddleStyles:!1};return c.default.createElement("div",{className:"griddle-footer"},c.default.createElement(m.default.GridPagination,e))}},{key:"renderItem",value:function(e){var t=this.props.badges.find(function(t){return t.id===e.id}),n={sectionConfig:this.props.sectionConfig,key:e.id,selectableKey:e.id,item:e,selectedFiles:this.props.selectedFiles,onDrag:this.handleDrag,badge:t};return e.uploading?Object.assign(n,{onCancelUpload:this.props.onCancelUpload,onRemoveErroredUpload:this.props.onRemoveErroredUpload}):Object.assign(n,{onActivate:"folder"===e.type?this.props.onOpenFolder:this.props.onOpenFile}),this.props.selectableItems&&Object.assign(n,{selectable:!0,onSelect:this.props.onSelect}),"folder"===e.type?(Object.assign(n,{onDropFiles:this.props.onDropFiles}),c.default.createElement(d.Folder,n)):c.default.createElement(d.File,n)}},{key:"render",value:function(){return c.default.createElement("div",{className:"gallery__main-view--tile"},c.default.createElement("div",{className:"gallery__folders"},this.props.files.filter(this.folderFilter).map(this.renderItem)),c.default.createElement("div",{className:"gallery__files"},this.props.files.filter(this.fileFilter).map(this.renderItem)),0===this.props.files.length&&!this.props.loading&&c.default.createElement("p",{className:"gallery__no-item-notice"},u.default._t("AssetAdmin.NOITEMSFOUND")),c.default.createElement("div",{className:"gallery__load"},this.renderPagination()))}}]),t}(p.Component);g.defaultProps=f.galleryViewDefaultProps,g.propTypes=f.galleryViewPropTypes,t.default=g},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.mutation=void 0;var r=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  mutation CreateFolder($folder:FolderInput!) {\n    createFolder(folder: $folder) {\n      ...FileInterfaceFields\n      ...FileFields\n    }\n  }\n  ","\n  ","\n"],["\n  mutation CreateFolder($folder:FolderInput!) {\n    createFolder(folder: $folder) {\n      ...FileInterfaceFields\n      ...FileFields\n    }\n  }\n  ","\n  ","\n"]),o=n(15),i=n(27),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=n(38),l=(0,s.default)(r,a.fileInterface,a.file),u={props:function(e){var t=e.mutate,n=e.ownProps,r=n.errors,o=n.actions,i=n.errorMessage,s=function(e,n){return t({variables:{folder:{parentId:e,name:n}}})};return{errorMessage:i||r&&r[0].message,actions:Object.assign({},o,{files:Object.assign({},o.files,{createFolder:s})})}}};t.mutation=l,t.config=u,t.default=(0,o.graphql)(l,u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.mutation=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["mutation DeleteFiles($IDs:[ID]!) {\n  deleteFiles(IDs: $IDs)\n}"],["mutation DeleteFiles($IDs:[ID]!) {\n  deleteFiles(IDs: $IDs)\n}"]),i=n(15),s=n(27),a=function(e){return e&&e.__esModule?e:{default:e}}(s),l=(0,a.default)(o),u={props:function(e){var t=e.mutate,n=e.ownProps.actions,o=function(e,n){return t({variables:{IDs:e},resultBehaviors:n.map(function(e){return{type:"DELETE",dataId:e}})})};return{actions:r({},n,{files:r({},n.files,{deleteFiles:o})})}}};t.mutation=l,t.config=u,t.default=(0,i.graphql)(l,u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.mutation=void 0;var r=n(15),o=n(88),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s=(0,i.default)("publishFiles"),a=s.mutation,l=s.config;t.mutation=a,t.config=l,t.default=(0,r.graphql)(a,l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.query=void 0;var r=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  query ReadFiles($limit:Int!, $offset:Int!, $rootFilter: FileFilterInput, \n    $childrenFilter: FileFilterInput, $sortBy:[ChildrenSortInputType]\n  ) {\n    readFiles(filter: $rootFilter) {\n      pageInfo {\n        totalCount\n      }\n      edges {\n        node {\n          ...FileInterfaceFields\n          ...FileFields\n          ...on Folder {\n            children(limit:$limit, offset:$offset, filter: $childrenFilter, sortBy:$sortBy) {\n              pageInfo {\n                totalCount\n              }\n              edges {\n                node {\n                  ...FileInterfaceFields\n                  ...FileFields\n                  ...FolderFields\n                }\n              }\n            }\n            parents {\n              id\n              title\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"],["\n  query ReadFiles($limit:Int!, $offset:Int!, $rootFilter: FileFilterInput, \n    $childrenFilter: FileFilterInput, $sortBy:[ChildrenSortInputType]\n  ) {\n    readFiles(filter: $rootFilter) {\n      pageInfo {\n        totalCount\n      }\n      edges {\n        node {\n          ...FileInterfaceFields\n          ...FileFields\n          ...on Folder {\n            children(limit:$limit, offset:$offset, filter: $childrenFilter, sortBy:$sortBy) {\n              pageInfo {\n                totalCount\n              }\n              edges {\n                node {\n                  ...FileInterfaceFields\n                  ...FileFields\n                  ...FolderFields\n                }\n              }\n            }\n            parents {\n              id\n              title\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]),i=n(15),s=n(27),a=function(e){return e&&e.__esModule?e:{default:e}}(s),l=n(38),u=n(84),p=(0,a.default)(o,l.fileInterface,l.file,l.folder),c={options:function(e){var t=e.sectionConfig,n=e.folderId,o=e.fileId,i=e.query,s=Object.assign({},i.filter),a=Object.assign({},s,{parentId:void 0,recursive:(0,u.hasFilters)(s),currentFolderOnly:void 0}),l=(0,u.hasFilters)(s)?null:o||null,p=l?null:n||0,c={id:p,anyChildId:l},d=i.sort?i.sort.split(","):["",""],f=r(d,2),h=f[0],m=f[1],g=i.limit||t.limit;return{variables:{rootFilter:c,childrenFilter:a,limit:g,offset:((i.page||1)-1)*g,sortBy:h&&m?[{field:h,direction:m.toUpperCase()}]:void 0}}},props:function(e){var t=e.data,n=t.error,r=t.refetch,o=t.readFiles,i=t.loading,s=e.ownProps.actions,a=o&&o.edges[0]?o.edges[0].node:null,l=a&&a.children?a.children.edges.map(function(e){return e.node}).filter(function(e){return e}):[],u=a&&a.children?a.children.pageInfo.totalCount:0,p=a&&!a.children,c=n&&n.graphQLErrors&&n.graphQLErrors.map(function(e){return e.message});return{loading:i||p,folder:a,files:l,filesTotalCount:u,graphQLErrors:c,actions:Object.assign({},s,{files:Object.assign({},s.files,{readFiles:r})})}}};t.query=p,t.config=c,t.default=(0,i.graphql)(p,c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.mutation=void 0;var r=n(15),o=n(88),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s=(0,i.default)("unpublishFiles"),a=s.mutation,l=s.config;t.mutation=a,t.config=l,t.default=(0,r.graphql)(a,l)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,r=t.payload;switch(n){case u.default.SET_FILE_BADGE:return i({},e,{badges:e.badges.filter(function(e){return e.id!==r.id}).concat([r])});case u.default.CLEAR_FILE_BADGE:return i({},e,{badges:e.badges.filter(function(e){return e.id!==r.id})});case u.default.SET_ENABLE_DROPZONE:return i({},e,{enableDropzone:r.enableDropzone});case u.default.SET_NOTICE_MESSAGE:return i({},e,{noticeMessage:r.message});case u.default.SET_ERROR_MESSAGE:return i({},e,{errorMessage:r.message});case u.default.LOAD_FILE_SUCCESS:var o=e.files.find(function(e){return e.id===r.id});if(o){var s=i({},o,r.file);return(0,a.default)(i({},e,{files:e.files.map(function(e){return e.id===s.id?s:e})}))}return e.folder.id===r.id?(0,a.default)(i({},e,{folder:i({},e.folder,r.file)})):e;case u.default.SELECT_FILES:var l=null;return l=null===r.ids?e.files.map(function(e){return e.id}):e.selectedFiles.concat(r.ids.filter(function(t){return-1===e.selectedFiles.indexOf(t)})),(0,a.default)(i({},e,{selectedFiles:l}));case u.default.DESELECT_FILES:var p=null;return p=null===r.ids?[]:e.selectedFiles.filter(function(e){return-1===r.ids.indexOf(e)}),(0,a.default)(i({},e,{selectedFiles:p}));case u.default.ACTIVATE_MODAL:return(0,a.default)(i({},e,{modal:r}));case u.default.DEACTIVATE_MODAL:return(0,a.default)(i({},e,{modal:null}));case u.default.CONCATENATE_SELECT:return(0,a.default)(i({},e,{concatenateSelect:r}));case u.default.SET_LOADING:return(0,a.default)(i({},e,{loading:r}));default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=o;var s=n(53),a=r(s),l=n(90),u=r(l),p=n(1),c=r(p),d={selectedFiles:[],errorMessage:null,noticeMessage:null,enableDropzone:!0,modal:null,badges:[],concatenateSelect:!1,loading:!1,sorters:[{field:"title",direction:"asc",label:c.default._t("AssetAdmin.FILTER_TITLE_ASC","title a-z")},{field:"title",direction:"desc",label:c.default._t("AssetAdmin.FILTER_TITLE_DESC","title z-a")},{field:"lastEdited",direction:"desc",label:c.default._t("AssetAdmin.FILTER_DATE_DESC","newest")},{field:"lastEdited",direction:"asc",label:c.default._t("AssetAdmin.FILTER_DATE_ASC","oldest")}]}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultImageFactory=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(92),l=r(a),u=n(195),p=r(u),c={minRetry:0,maxRetry:0,expiry:0,onStatusChange:function(){return null},onRetry:function(){return null},onReset:function(){return null},onTimeout:function(){return null}},d=function(e,t,n){var r=new Image;r.onload=t,r.onerror=n,r.src=e},f=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;o(this,e),this.options=i({},c,t),this.factory=n}return s(e,[{key:"loadImage",value:function(e){return this.options.minRetry&&p.default.lock(e)?this.loadImageLoop(e,this.options.minRetry):null}},{key:"loadImageLoop",value:function(e,t){var n=this;return this.options.onStatusChange(e,l.default.LOADING),new Promise(function(t,r){return n.factory(e,t,r)}).then(function(){return n.handleSuccess(e)}).catch(function(){return n.handleError(e,t)})}},{key:"handleReset",value:function(e,t){this.options.onReset(e),t()}},{key:"handleTimeout",value:function(e,t){var n=setTimeout(e,t);return this.options.onTimeout(n,t),n}},{key:"handleSuccess",value:function(e){p.default.unlock(e),this.options.onStatusChange(e,l.default.SUCCESS)}},{key:"handleFailure",value:function(e){var t=this;return p.default.unlock(e),this.options.onStatusChange(e,l.default.FAILED),this.options.expiry?new Promise(function(n){t.handleTimeout(function(){return t.handleReset(e,n)},1e3*t.options.expiry)}):null}},{key:"handleError",value:function(e,t){return t>this.options.maxRetry?this.handleFailure(e):(this.options.onStatusChange(e,l.default.WAITING),this.handleRetry(e,t))}},{key:"handleRetry",value:function(e,t){var n=this,r=new Promise(function(r){n.handleTimeout(function(){return r(n.loadImageLoop(e,2*t))},1e3*t)});return this.options.onRetry(e,t,r),r}},{key:"setOnRetry",value:function(e){this.options.onRetry=e}},{key:"setOnReset",value:function(e){this.options.onReset=e}},{key:"setOnStatusChange",value:function(e){this.options.onStatusChange=e}},{key:"setOnTimeout",value:function(e){this.options.onTimeout=e}}]),e}();t.defaultImageFactory=d,t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return function(n,r){if(!e)return null;if(r().assetAdmin.imageLoad.files.find(function(t){return t.url===e}))return null;var o=i({},t,{onStatusChange:function(e,t){return n({type:a.default.SET_STATUS,payload:{status:t,url:e}})},onReset:function(e){return n({type:a.default.RESET,payload:{url:e}})}});return new u.default(o).loadImage(e)}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.loadImage=o;var s=n(91),a=r(s),l=n(193),u=r(l)},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(){o(this,e),this.urls=[]}return i(e,[{key:"lock",value:function(e){return!(this.urls.indexOf(e)>=0||(this.urls=[].concat(r(this.urls),[e]),0))}},{key:"unlock",value:function(e){this.urls=this.urls.filter(function(t){return t!==e})}}]),e}();window.ss=window.ss||{},window.ss.imagelocker=window.ss.imagelocker||new s,t.Component=s,t.default=window.ss.imagelocker},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,o=t.payload;switch(n){case a.default.SET_STATUS:return i({},e,{files:[].concat(r(e.files.filter(function(e){return e.url!==o.url})),[o])});case a.default.RESET:return i({},e,{files:[].concat(r(e.files.filter(function(e){return e.url!==o.url})))});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=o;var s=n(91),a=function(e){return e&&e.__esModule?e:{default:e}}(s),l={files:[]}},function(e,t,n){"use strict";function r(e){return{type:l.default.PREVIEWFIELD_REMOVE_FILE,payload:{id:e}}}function o(e,t){return{type:l.default.PREVIEWFIELD_ADD_FILE,payload:{id:e,file:t}}}function i(e,t){return{type:l.default.PREVIEWFIELD_FAIL_UPLOAD,payload:{id:e,message:t}}}function s(e,t){return{type:l.default.PREVIEWFIELD_UPDATE_FILE,payload:{id:e,data:t}}}Object.defineProperty(t,"__esModule",{value:!0}),t.removeFile=r,t.addFile=o,t.failUpload=i,t.updateFile=s;var a=n(93),l=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments[1];switch(t.type){case u.default.PREVIEWFIELD_ADD_FILE:return(0,a.default)(Object.assign({},e,o({},t.payload.id,t.payload.file)));case u.default.PREVIEWFIELD_FAIL_UPLOAD:return(0,a.default)(Object.assign({},e,o({},t.payload.id,Object.assign({},e[t.payload.id],t.payload.message))));case u.default.PREVIEWFIELD_REMOVE_FILE:return(0,a.default)(Object.assign({},e,o({},t.payload.id,void 0)));case u.default.PREVIEWFIELD_UPDATE_FILE:return(0,a.default)(Object.assign({},e,o({},t.payload.id,Object.assign({},e[t.payload.id],t.payload.data))));default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(53),a=r(s),l=n(93),u=r(l),p={};t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments[1];switch(t.type){case p.default.ADD_QUEUED_FILE:return(0,l.default)(s({},e,{items:[].concat(o(e.items),[s({},d.default,t.payload.file)])}));case p.default.FAIL_UPLOAD:return(0,l.default)(s({},e,{items:e.items.map(function(e){return e.queuedId===t.payload.queuedId?s({},e,{message:t.payload.message}):e})}));case p.default.PURGE_UPLOAD_QUEUE:return(0,l.default)(s({},e,{items:e.items.filter(function(e){return!e.id})}));case p.default.REMOVE_QUEUED_FILE:return(0,l.default)(s({},e,{items:e.items.filter(function(e){return e.queuedId!==t.payload.queuedId})}));case p.default.SUCCEED_UPLOAD:return(0,l.default)(s({},e,{items:e.items.map(function(e){return e.queuedId===t.payload.queuedId?s({},e,t.payload.json,{messages:[{value:h.default._t("AssetAdmin.DROPZONE_SUCCESS_UPLOAD"),type:"success",extraClass:"success"}]}):e})}));case p.default.UPDATE_QUEUED_FILE:return(0,l.default)(s({},e,{items:e.items.map(function(e){return e.queuedId===t.payload.queuedId?s({},e,t.payload.updates):e})}));default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(53),l=r(a),u=n(94),p=r(u),c=n(87),d=r(c),f=n(1),h=r(f),m={items:[]};t.default=i},function(e,t,n){"use strict";function r(e,t){return function(n){return n({type:p.default.UPLOADFIELD_ADD_FILE,payload:{fieldId:e,file:t}})}}function o(e,t){return function(n){return n({type:p.default.UPLOADFIELD_SET_FILES,payload:{fieldId:e,files:t}})}}function i(e,t,n){return function(r){var o=n.message;return"string"==typeof n&&(o={value:n,type:"error"}),r({type:p.default.UPLOADFIELD_UPLOAD_FAILURE,payload:{fieldId:e,queuedId:t,message:o}})}}function s(e,t){return function(n){return n({type:p.default.UPLOADFIELD_REMOVE_FILE,payload:{fieldId:e,file:t}})}}function a(e,t,n){return function(r){return r({type:p.default.UPLOADFIELD_UPLOAD_SUCCESS,payload:{fieldId:e,queuedId:t,json:n}})}}function l(e,t,n){return function(r){return r({type:p.default.UPLOADFIELD_UPDATE_QUEUED_FILE,payload:{fieldId:e,queuedId:t,updates:n}})}}Object.defineProperty(t,"__esModule",{value:!0}),t.addFile=r,t.setFiles=o,t.failUpload=i,t.removeFile=s,t.succeedUpload=a,t.updateQueuedFile=l;var u=n(96),p=function(e){return e&&e.__esModule?e:{default:e}}(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments[1],n=(0,c.default)(e,t,f);switch(t.type){case a.default.UPLOADFIELD_ADD_FILE:return n(function(e){return{files:[].concat(o(e.files),[Object.assign({},u.default,t.payload.file)])}});case a.default.UPLOADFIELD_SET_FILES:return n(function(){return{files:t.payload.files}});case a.default.UPLOADFIELD_UPLOAD_FAILURE:return n(function(e){return{files:e.files.map(function(e){return e.queuedId===t.payload.queuedId?Object.assign({},e,{message:t.payload.message}):e})}});case a.default.UPLOADFIELD_REMOVE_FILE:return n(function(e){return{files:e.files.filter(function(e){return!(t.payload.file.queuedId&&e.queuedId===t.payload.file.queuedId||t.payload.file.id&&e.id===t.payload.file.id)})}});case a.default.UPLOADFIELD_UPLOAD_SUCCESS:return n(function(e){return{files:e.files.map(function(e){return e.queuedId===t.payload.queuedId?Object.assign({},e,t.payload.json):e})}});case a.default.UPLOADFIELD_UPDATE_QUEUED_FILE:return n(function(e){return{files:e.files.map(function(e){return e.queuedId===t.payload.queuedId?Object.assign({},e,t.payload.updates):e})}});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(96),a=r(s),l=n(87),u=r(l),p=n(362),c=r(p),d={fields:{}},f={files:[]};t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n=e.config.sections.find(function(e){return e.name===E}),r=t.fileAttributes?t.fileAttributes.Url:"",o=n.form.remoteEditForm.schemaUrl,i=r&&o+"/?embedurl="+encodeURIComponent(r),s=n.form.remoteCreateForm.schemaUrl;return{sectionConfig:n,schemaUrl:i||s,targetUrl:r}}function l(e){return{actions:{schema:(0,m.bindActionCreators)(_,e)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;var u=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),d=r(c),f=n(0),h=r(f),m=n(6),g=n(3),y=n(26),v=r(y),b=n(55),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(b),E="SilverStripe\\AssetAdmin\\Controller\\AssetAdmin",S=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSubmit=n.handleSubmit.bind(n),n}return s(t,e),p(t,[{key:"componentWillMount",value:function(){this.setOverrides(this.props)}},{key:"componentWillReceiveProps",value:function(e){e.show&&!this.props.show&&this.setOverrides(e)}},{key:"componentWillUnmount",value:function(){this.clearOverrides()}},{key:"setOverrides",value:function(e){if(this.props.schemaUrl!==e.schemaUrl&&this.clearOverrides(),e.schemaUrl){var t=Object.assign({},e.fileAttributes);delete t.ID;var n={fields:Object.entries(t).map(function(e){var t=u(e,2);return{name:t[0],value:t[1]}})};this.props.actions.schema.setSchemaStateOverrides(e.schemaUrl,n)}}},{key:"getModalProps",value:function(){var e=Object.assign({onSubmit:this.handleSubmit,onLoadingError:this.handleLoadingError,showErrorMessage:!0,responseClassBad:"alert alert-danger",identifier:"AssetAdmin.InsertEmbedModal"},this.props,{className:"insert-embed-modal "+this.props.className,bsSize:"lg",onHide:this.props.onHide,title:this.props.targetUrl?d.default._t("AssetAdmin.EditTitle","Media from the web"):d.default._t("AssetAdmin.CreateTitle","Insert new media from the web")});return delete e.sectionConfig,delete e.onInsert,delete e.fileAttributes,e}},{key:"clearOverrides",value:function(){this.props.actions.schema.setSchemaStateOverrides(this.props.schemaUrl,null)}},{key:"handleLoadingError",value:function(e){"function"==typeof this.props.onLoadingError&&this.props.onLoadingError(e)}},{key:"handleSubmit",value:function(e,t){switch(t){case"action_addmedia":this.props.onCreate(e);break;case"action_insertmedia":this.props.onInsert(e);break;case"action_cancel":this.props.onHide()}return Promise.resolve()}},{key:"render",value:function(){return h.default.createElement(v.default,this.getModalProps())}}]),t}(f.Component);S.propTypes={sectionConfig:f.PropTypes.shape({url:f.PropTypes.string,form:f.PropTypes.object}),show:f.PropTypes.bool,onInsert:f.PropTypes.func.isRequired,onCreate:f.PropTypes.func.isRequired,fileAttributes:f.PropTypes.shape({Url:f.PropTypes.string,CaptionText:f.PropTypes.string,PreviewUrl:f.PropTypes.string,Placement:f.PropTypes.string,Width:f.PropTypes.number,Height:f.PropTypes.number}),onHide:f.PropTypes.func.isRequired,className:f.PropTypes.string,actions:f.PropTypes.object,schemaUrl:f.PropTypes.string.isRequired,targetUrl:f.PropTypes.string,onLoadingError:f.PropTypes.func},S.defaultProps={className:"",fileAttributes:{}},t.Component=S,t.default=(0,g.connect)(a,l)(S)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n=t.sectionConfig;if(!n)return{};var r=0;null!==t.folderId?r=t.folderId:t.folder&&(r=t.folder.id);var o=t.fileAttributes?t.fileAttributes.ID:t.fileId,i={config:n,viewAction:t.viewAction,folderId:r,type:t.type,fileId:o},s=(0,g.getFormSchema)(i),a=s.schemaUrl,l=s.targetId;return a?{schemaUrl:a+"/"+l}:{}}Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),c=r(p),d=n(0),f=r(d),h=n(6),m=n(3),g=n(85),y=r(g),v=n(176),b=r(v),_=n(351),E=r(_),S=n(26),C=r(S),P=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSubmit=n.handleSubmit.bind(n),n}return s(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.show,n=e.onBrowse,r=e.setOverrides,o=e.fileAttributes,i=e.folderId;t||n(0),"function"==typeof r&&t&&o.ID&&(r(this.props),n(i,o.ID))}},{key:"componentWillReceiveProps",value:function(e){!e.show&&this.props.show&&e.onBrowse(0),"function"==typeof this.props.setOverrides&&e.show&&!this.props.show&&(this.props.setOverrides(e),e.onBrowse(e.folderId,e.fileAttributes?e.fileAttributes.ID:null))}},{key:"getSectionProps",value:function(){return l({},this.props,{dialog:!0,toolbarChildren:this.renderToolbarChildren(),onSubmitEditor:this.handleSubmit,onReplaceUrl:this.props.onBrowse})}},{key:"getModalProps",value:function(){var e=Object.assign({},this.props,{className:"insert-media-modal "+this.props.className,bsSize:"lg"});return delete e.onHide,delete e.onInsert,delete e.sectionConfig,delete e.schemaUrl,e}},{key:"handleSubmit",value:function(e,t,n,r){return"action_createfolder"===t?n():this.props.onInsert(e,r)}},{key:"renderToolbarChildren",value:function(){return f.default.createElement("button",{type:"button",className:"close insert-media-modal__close-button",onClick:this.props.onHide,"aria-label":c.default._t("FormBuilderModal.CLOSE","Close")},f.default.createElement("span",{"aria-hidden":"true"},""))}},{key:"render",value:function(){var e=this.getModalProps(),t=this.getSectionProps(),n=this.props.show?f.default.createElement(y.default,t):null;return f.default.createElement(C.default,e,n)}}]),t}(d.Component);P.propTypes={sectionConfig:d.PropTypes.shape({url:d.PropTypes.string,form:d.PropTypes.object}),type:d.PropTypes.oneOf(["insert-media","insert-link","select","admin"]),schemaUrl:d.PropTypes.string,show:d.PropTypes.bool,setOverrides:d.PropTypes.func,onInsert:d.PropTypes.func.isRequired,fileAttributes:d.PropTypes.shape({ID:d.PropTypes.number,AltText:d.PropTypes.string,Width:d.PropTypes.number,Height:d.PropTypes.number,TitleTooltip:d.PropTypes.string,Alignment:d.PropTypes.string,Description:d.PropTypes.string,TargetBlank:d.PropTypes.bool}),folderId:d.PropTypes.number,fileId:d.PropTypes.number,viewAction:d.PropTypes.string,query:d.PropTypes.object,getUrl:d.PropTypes.func,onBrowse:d.PropTypes.func.isRequired,onHide:d.PropTypes.func,className:d.PropTypes.string,actions:d.PropTypes.object},P.defaultProps={className:"",fileAttributes:{},type:"insert-media",folderId:0},t.Component=P,t.default=(0,h.compose)(b.default,(0,m.connect)(a),E.default)(P)},function(e,t){e.exports={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:512,O_EXCL:2048,O_NOCTTY:131072,O_TRUNC:1024,O_APPEND:8,O_DIRECTORY:1048576,O_NOFOLLOW:256,O_SYNC:128,O_SYMLINK:2097152,O_NONBLOCK:4,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,E2BIG:7,EACCES:13,EADDRINUSE:48,EADDRNOTAVAIL:49,EAFNOSUPPORT:47,EAGAIN:35,EALREADY:37,EBADF:9,EBADMSG:94,EBUSY:16,ECANCELED:89,ECHILD:10,ECONNABORTED:53,ECONNREFUSED:61,ECONNRESET:54,EDEADLK:11,EDESTADDRREQ:39,EDOM:33,EDQUOT:69,EEXIST:17,EFAULT:14,EFBIG:27,EHOSTUNREACH:65,EIDRM:90,EILSEQ:92,EINPROGRESS:36,EINTR:4,EINVAL:22,EIO:5,EISCONN:56,EISDIR:21,ELOOP:62,EMFILE:24,EMLINK:31,EMSGSIZE:40,EMULTIHOP:95,ENAMETOOLONG:63,ENETDOWN:50,ENETRESET:52,ENETUNREACH:51,ENFILE:23,ENOBUFS:55,ENODATA:96,ENODEV:19,ENOENT:2,ENOEXEC:8,ENOLCK:77,ENOLINK:97,ENOMEM:12,ENOMSG:91,ENOPROTOOPT:42,ENOSPC:28,ENOSR:98,ENOSTR:99,ENOSYS:78,ENOTCONN:57,ENOTDIR:20,ENOTEMPTY:66,ENOTSOCK:38,ENOTSUP:45,ENOTTY:25,ENXIO:6,EOPNOTSUPP:102,EOVERFLOW:84,EPERM:1,EPIPE:32,EPROTO:100,EPROTONOSUPPORT:43,EPROTOTYPE:41,ERANGE:34,EROFS:30,ESPIPE:29,ESRCH:3,ESTALE:70,ETIME:101,ETIMEDOUT:60,ETXTBSY:26,EWOULDBLOCK:35,EXDEV:18,SIGHUP:1,SIGINT:2,SIGQUIT:3,SIGILL:4,SIGTRAP:5,SIGABRT:6,SIGIOT:6,SIGBUS:10,SIGFPE:8,SIGKILL:9,SIGUSR1:30,SIGSEGV:11,SIGUSR2:31,SIGPIPE:13,SIGALRM:14,SIGTERM:15,SIGCHLD:20,SIGCONT:19,SIGSTOP:17,SIGTSTP:18,SIGTTIN:21,SIGTTOU:22,SIGURG:16,SIGXCPU:24,SIGXFSZ:25,SIGVTALRM:26,SIGPROF:27,SIGWINCH:28,SIGIO:23,SIGSYS:12,SSL_OP_ALL:2147486719,SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION:262144,SSL_OP_CIPHER_SERVER_PREFERENCE:4194304,SSL_OP_CISCO_ANYCONNECT:32768,SSL_OP_COOKIE_EXCHANGE:8192,SSL_OP_CRYPTOPRO_TLSEXT_BUG:2147483648,SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS:2048,SSL_OP_EPHEMERAL_RSA:0,SSL_OP_LEGACY_SERVER_CONNECT:4,SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER:32,SSL_OP_MICROSOFT_SESS_ID_BUG:1,SSL_OP_MSIE_SSLV2_RSA_PADDING:0,SSL_OP_NETSCAPE_CA_DN_BUG:536870912,SSL_OP_NETSCAPE_CHALLENGE_BUG:2,SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG:1073741824,SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG:8,SSL_OP_NO_COMPRESSION:131072,SSL_OP_NO_QUERY_MTU:4096,SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION:65536,SSL_OP_NO_SSLv2:16777216,SSL_OP_NO_SSLv3:33554432,SSL_OP_NO_TICKET:16384,SSL_OP_NO_TLSv1:67108864,SSL_OP_NO_TLSv1_1:268435456,SSL_OP_NO_TLSv1_2:134217728,SSL_OP_PKCS1_CHECK_1:0,SSL_OP_PKCS1_CHECK_2:0,SSL_OP_SINGLE_DH_USE:1048576,SSL_OP_SINGLE_ECDH_USE:524288,SSL_OP_SSLEAY_080_CLIENT_DH_BUG:128,SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG:0,SSL_OP_TLS_BLOCK_PADDING_BUG:512,SSL_OP_TLS_D5_BUG:256,SSL_OP_TLS_ROLLBACK_BUG:8388608,ENGINE_METHOD_DSA:2,ENGINE_METHOD_DH:4,ENGINE_METHOD_RAND:8,ENGINE_METHOD_ECDH:16,ENGINE_METHOD_ECDSA:32,ENGINE_METHOD_CIPHERS:64,ENGINE_METHOD_DIGESTS:128,ENGINE_METHOD_STORE:256,ENGINE_METHOD_PKEY_METHS:512,ENGINE_METHOD_PKEY_ASN1_METHS:1024,ENGINE_METHOD_ALL:65535,ENGINE_METHOD_NONE:0,DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_UDP_REUSEADDR:4}},function(e,t,n){(function(e,t){(function(){var n,r,o,i,s,a,l,u,p=[].slice,c={}.hasOwnProperty,d=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};l=function(){},r=function(){function e(){}return e.prototype.addEventListener=e.prototype.on,e.prototype.on=function(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this},e.prototype.emit=function(){var e,t,n,r,o,i;if(r=arguments[0],e=2<=arguments.length?p.call(arguments,1):[],this._callbacks=this._callbacks||{},n=this._callbacks[r])for(o=0,i=n.length;o<i;o++)t=n[o],t.apply(this,e);return this},e.prototype.removeListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.off=function(e,t){var n,r,o,i;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;if(!(n=this._callbacks[e]))return this;if(1===arguments.length)return delete this._callbacks[e],this;for(r=o=0,i=n.length;o<i;r=++o)if(n[r]===t){n.splice(r,1);break}return this},e}(),n=function(e){function t(e,r){var o,i,s;if(this.element=e,this.version=t.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(t.instances.push(this),this.element.dropzone=this,o=null!=(s=t.optionsForElement(this.element))?s:{},this.options=n({},this.defaultOptions,o,null!=r?r:{}),this.options.forceFallback||!t.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(i=this.getExistingFallback())&&i.parentNode&&i.parentNode.removeChild(i),!1!==this.options.previewsContainer&&(this.options.previewsContainer?this.previewsContainer=t.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element),this.options.clickable&&(!0===this.options.clickable?this.clickableElements=[this.element]:this.clickableElements=t.getElements(this.options.clickable,"clickable")),this.init()}var n,o;return d(t,e),t.prototype.Emitter=r,t.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],t.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(e,t){return t()},init:function(){return l},forceFallback:!1,fallback:function(){var e,n,r,o,i,s;for(this.element.className=this.element.className+" dz-browser-not-supported",s=this.element.getElementsByTagName("div"),o=0,i=s.length;o<i;o++)e=s[o],/(^| )dz-message($| )/.test(e.className)&&(n=e,e.className="dz-message");return n||(n=t.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(n)),r=n.getElementsByTagName("span")[0],r&&(null!=r.textContent?r.textContent=this.options.dictFallbackMessage:null!=r.innerText&&(r.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(e){var t,n,r;return t={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},n=e.width/e.height,t.optWidth=this.options.thumbnailWidth,t.optHeight=this.options.thumbnailHeight,null==t.optWidth&&null==t.optHeight?(t.optWidth=t.srcWidth,t.optHeight=t.srcHeight):null==t.optWidth?t.optWidth=n*t.optHeight:null==t.optHeight&&(t.optHeight=1/n*t.optWidth),r=t.optWidth/t.optHeight,e.height<t.optHeight||e.width<t.optWidth?(t.trgHeight=t.srcHeight,t.trgWidth=t.srcWidth):n>r?(t.srcHeight=e.height,t.srcWidth=t.srcHeight*r):(t.srcWidth=e.width,t.srcHeight=t.srcWidth/r),t.srcX=(e.width-t.srcWidth)/2,t.srcY=(e.height-t.srcHeight)/2,t},drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:l,dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:l,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var n,r,o,i,s,a,l,u,p,c,d,f,h;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(e.previewElement=t.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement),c=e.previewElement.querySelectorAll("[data-dz-name]"),i=0,l=c.length;i<l;i++)n=c[i],n.textContent=this._renameFilename(e.name);for(d=e.previewElement.querySelectorAll("[data-dz-size]"),s=0,u=d.length;s<u;s++)n=d[s],n.innerHTML=this.filesize(e.size);for(this.options.addRemoveLinks&&(e._removeLink=t.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),e.previewElement.appendChild(e._removeLink)),r=function(n){return function(r){return r.preventDefault(),r.stopPropagation(),e.status===t.UPLOADING?t.confirm(n.options.dictCancelUploadConfirmation,function(){return n.removeFile(e)}):n.options.dictRemoveFileConfirmation?t.confirm(n.options.dictRemoveFileConfirmation,function(){return n.removeFile(e)}):n.removeFile(e)}}(this),f=e.previewElement.querySelectorAll("[data-dz-remove]"),h=[],a=0,p=f.length;a<p;a++)o=f[a],h.push(o.addEventListener("click",r));return h}},removedfile:function(e){var t;return e.previewElement&&null!=(t=e.previewElement)&&t.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){var n,r,o,i;if(e.previewElement){for(e.previewElement.classList.remove("dz-file-preview"),i=e.previewElement.querySelectorAll("[data-dz-thumbnail]"),r=0,o=i.length;r<o;r++)n=i[r],n.alt=e.name,n.src=t;return setTimeout(function(t){return function(){return e.previewElement.classList.add("dz-image-preview")}}(),1)}},error:function(e,t){var n,r,o,i,s;if(e.previewElement){for(e.previewElement.classList.add("dz-error"),"String"!=typeof t&&t.error&&(t=t.error),i=e.previewElement.querySelectorAll("[data-dz-errormessage]"),s=[],r=0,o=i.length;r<o;r++)n=i[r],s.push(n.textContent=t);return s}},errormultiple:l,processing:function(e){if(e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink))return e._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:l,uploadprogress:function(e,t,n){var r,o,i,s,a;if(e.previewElement){for(s=e.previewElement.querySelectorAll("[data-dz-uploadprogress]"),a=[],o=0,i=s.length;o<i;o++)r=s[o],"PROGRESS"===r.nodeName?a.push(r.value=t):a.push(r.style.width=t+"%");return a}},totaluploadprogress:l,sending:l,sendingmultiple:l,success:function(e){if(e.previewElement)return e.previewElement.classList.add("dz-success")},successmultiple:l,canceled:function(e){return this.emit("error",e,"Upload canceled.")},canceledmultiple:l,complete:function(e){if(e._removeLink&&(e._removeLink.textContent=this.options.dictRemoveFile),e.previewElement)return e.previewElement.classList.add("dz-complete")},completemultiple:l,maxfilesexceeded:l,maxfilesreached:l,queuecomplete:l,addedfiles:l,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'},n=function(){var e,t,n,r,o,i,s;for(r=arguments[0],n=2<=arguments.length?p.call(arguments,1):[],i=0,s=n.length;i<s;i++){t=n[i];for(e in t)o=t[e],r[e]=o}return r},t.prototype.getAcceptedFiles=function(){var e,t,n,r,o;for(r=this.files,o=[],t=0,n=r.length;t<n;t++)e=r[t],e.accepted&&o.push(e);return o},t.prototype.getRejectedFiles=function(){var e,t,n,r,o;for(r=this.files,o=[],t=0,n=r.length;t<n;t++)e=r[t],e.accepted||o.push(e);return o},t.prototype.getFilesWithStatus=function(e){var t,n,r,o,i;for(o=this.files,i=[],n=0,r=o.length;n<r;n++)t=o[n],t.status===e&&i.push(t);return i},t.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(t.QUEUED)},t.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(t.UPLOADING)},t.prototype.getAddedFiles=function(){return this.getFilesWithStatus(t.ADDED)},t.prototype.getActiveFiles=function(){var e,n,r,o,i;for(o=this.files,i=[],n=0,r=o.length;n<r;n++)e=o[n],e.status!==t.UPLOADING&&e.status!==t.QUEUED||i.push(e);return i},t.prototype.init=function(){var e,n,r,o,i,s,a;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(t.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(r=function(e){return function(){return e.hiddenFileInput&&e.hiddenFileInput.parentNode.removeChild(e.hiddenFileInput),e.hiddenFileInput=document.createElement("input"),e.hiddenFileInput.setAttribute("type","file"),(null==e.options.maxFiles||e.options.maxFiles>1)&&e.hiddenFileInput.setAttribute("multiple","multiple"),e.hiddenFileInput.className="dz-hidden-input",null!=e.options.acceptedFiles&&e.hiddenFileInput.setAttribute("accept",e.options.acceptedFiles),null!=e.options.capture&&e.hiddenFileInput.setAttribute("capture",e.options.capture),e.hiddenFileInput.style.visibility="hidden",e.hiddenFileInput.style.position="absolute",e.hiddenFileInput.style.top="0",e.hiddenFileInput.style.left="0",e.hiddenFileInput.style.height="0",e.hiddenFileInput.style.width="0",document.querySelector(e.options.hiddenInputContainer).appendChild(e.hiddenFileInput),e.hiddenFileInput.addEventListener("change",function(){var t,n,o,i;if(n=e.hiddenFileInput.files,n.length)for(o=0,i=n.length;o<i;o++)t=n[o],e.addFile(t);return e.emit("addedfiles",n),r()})}}(this))(),this.URL=null!=(s=window.URL)?s:window.webkitURL,a=this.events,o=0,i=a.length;o<i;o++)e=a[o],this.on(e,this.options[e]);return this.on("uploadprogress",function(e){return function(){return e.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(e){return function(){return e.updateTotalUploadProgress()}}(this)),this.on("canceled",function(e){return function(t){return e.emit("complete",t)}}(this)),this.on("complete",function(e){return function(t){if(0===e.getAddedFiles().length&&0===e.getUploadingFiles().length&&0===e.getQueuedFiles().length)return setTimeout(function(){return e.emit("queuecomplete")},0)}}(this)),n=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(e){return function(t){return e.emit("dragstart",t)}}(this),dragenter:function(e){return function(t){return n(t),e.emit("dragenter",t)}}(this),dragover:function(e){return function(t){var r;try{r=t.dataTransfer.effectAllowed}catch(e){}return t.dataTransfer.dropEffect="move"===r||"linkMove"===r?"move":"copy",n(t),e.emit("dragover",t)}}(this),dragleave:function(e){return function(t){return e.emit("dragleave",t)}}(this),drop:function(e){return function(t){return n(t),e.drop(t)}}(this),dragend:function(e){return function(t){return e.emit("dragend",t)}}(this)}}],this.clickableElements.forEach(function(e){return function(n){return e.listeners.push({element:n,events:{click:function(r){return(n!==e.element||r.target===e.element||t.elementInside(r.target,e.element.querySelector(".dz-message")))&&e.hiddenFileInput.click(),!0}}})}}(this)),this.enable(),this.options.init.call(this)},t.prototype.destroy=function(){var e;return this.disable(),this.removeAllFiles(!0),(null!=(e=this.hiddenFileInput)?e.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,t.instances.splice(t.instances.indexOf(this),1)},t.prototype.updateTotalUploadProgress=function(){var e,t,n,r,o,i,s,a;if(r=0,n=0,e=this.getActiveFiles(),e.length){for(a=this.getActiveFiles(),i=0,s=a.length;i<s;i++)t=a[i],r+=t.upload.bytesSent,n+=t.upload.total;o=100*r/n}else o=100;return this.emit("totaluploadprogress",o,n,r)},t.prototype._getParamName=function(e){return"function"==typeof this.options.paramName?this.options.paramName(e):this.options.paramName+(this.options.uploadMultiple?"["+e+"]":"")},t.prototype._renameFilename=function(e){return"function"!=typeof this.options.renameFilename?e:this.options.renameFilename(e)},t.prototype.getFallbackForm=function(){var e,n,r,o;return(e=this.getExistingFallback())?e:(r='<div class="dz-fallback">',this.options.dictFallbackText&&(r+="<p>"+this.options.dictFallbackText+"</p>"),r+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',n=t.createElement(r),"FORM"!==this.element.tagName?(o=t.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),o.appendChild(n)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=o?o:n)},t.prototype.getExistingFallback=function(){var e,t,n,r,o,i;for(t=function(e){var t,n,r;for(n=0,r=e.length;n<r;n++)if(t=e[n],/(^| )fallback($| )/.test(t.className))return t},i=["div","form"],r=0,o=i.length;r<o;r++)if(n=i[r],e=t(this.element.getElementsByTagName(n)))return e},t.prototype.setupEventListeners=function(){var e,t,n,r,o,i,s;for(i=this.listeners,s=[],r=0,o=i.length;r<o;r++)e=i[r],s.push(function(){var r,o;r=e.events,o=[];for(t in r)n=r[t],o.push(e.element.addEventListener(t,n,!1));return o}());return s},t.prototype.removeEventListeners=function(){var e,t,n,r,o,i,s;for(i=this.listeners,s=[],r=0,o=i.length;r<o;r++)e=i[r],s.push(function(){var r,o;r=e.events,o=[];for(t in r)n=r[t],o.push(e.element.removeEventListener(t,n,!1));return o}());return s},t.prototype.disable=function(){var e,t,n,r,o;for(this.clickableElements.forEach(function(e){return e.classList.remove("dz-clickable")}),this.removeEventListeners(),r=this.files,o=[],t=0,n=r.length;t<n;t++)e=r[t],o.push(this.cancelUpload(e));return o},t.prototype.enable=function(){return this.clickableElements.forEach(function(e){return e.classList.add("dz-clickable")}),this.setupEventListeners()},t.prototype.filesize=function(e){var t,n,r,o,i,s,a,l;if(r=0,o="b",e>0){for(s=["TB","GB","MB","KB","b"],n=a=0,l=s.length;a<l;n=++a)if(i=s[n],t=Math.pow(this.options.filesizeBase,4-n)/10,e>=t){r=e/Math.pow(this.options.filesizeBase,4-n),o=i;break}r=Math.round(10*r)/10}return"<strong>"+r+"</strong> "+o},t.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},t.prototype.drop=function(e){var t,n;e.dataTransfer&&(this.emit("drop",e),t=e.dataTransfer.files,this.emit("addedfiles",t),t.length&&(n=e.dataTransfer.items,n&&n.length&&null!=n[0].webkitGetAsEntry?this._addFilesFromItems(n):this.handleFiles(t)))},t.prototype.paste=function(e){var t,n;if(null!=(null!=e&&null!=(n=e.clipboardData)?n.items:void 0))return this.emit("paste",e),t=e.clipboardData.items,t.length?this._addFilesFromItems(t):void 0},t.prototype.handleFiles=function(e){var t,n,r,o;for(o=[],n=0,r=e.length;n<r;n++)t=e[n],o.push(this.addFile(t));return o},t.prototype._addFilesFromItems=function(e){var t,n,r,o,i;for(i=[],r=0,o=e.length;r<o;r++)n=e[r],null!=n.webkitGetAsEntry&&(t=n.webkitGetAsEntry())?t.isFile?i.push(this.addFile(n.getAsFile())):t.isDirectory?i.push(this._addFilesFromDirectory(t,t.name)):i.push(void 0):null==n.getAsFile||null!=n.kind&&"file"!==n.kind?i.push(void 0):i.push(this.addFile(n.getAsFile()));return i},t.prototype._addFilesFromDirectory=function(e,t){var n,r,o;return n=e.createReader(),r=function(e){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(e):void 0},(o=function(e){return function(){return n.readEntries(function(n){var r,i,s;if(n.length>0){for(i=0,s=n.length;i<s;i++)r=n[i],r.isFile?r.file(function(n){if(!e.options.ignoreHiddenFiles||"."!==n.name.substring(0,1))return n.fullPath=t+"/"+n.name,e.addFile(n)}):r.isDirectory&&e._addFilesFromDirectory(r,t+"/"+r.name);o()}return null},r)}}(this))()},t.prototype.accept=function(e,n){return e.size>1024*this.options.maxFilesize*1024?n(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):t.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(n(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,n):n(this.options.dictInvalidFileType)},t.prototype.addFile=function(e){return e.upload={progress:0,total:e.size,bytesSent:0},this.files.push(e),e.status=t.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,function(t){return function(n){return n?(e.accepted=!1,t._errorProcessing([e],n)):(e.accepted=!0,t.options.autoQueue&&t.enqueueFile(e)),t._updateMaxFilesReachedClass()}}(this))},t.prototype.enqueueFiles=function(e){var t,n,r;for(n=0,r=e.length;n<r;n++)t=e[n],this.enqueueFile(t);return null},t.prototype.enqueueFile=function(e){if(e.status!==t.ADDED||!0!==e.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(e.status=t.QUEUED,this.options.autoProcessQueue)return setTimeout(function(e){return function(){return e.processQueue()}}(this),0)},t.prototype._thumbnailQueue=[],t.prototype._processingThumbnail=!1,t.prototype._enqueueThumbnail=function(e){if(this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(e),setTimeout(function(e){return function(){return e._processThumbnailQueue()}}(this),0)},t.prototype._processThumbnailQueue=function(){if(!this._processingThumbnail&&0!==this._thumbnailQueue.length)return this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(e){return function(){return e._processingThumbnail=!1,e._processThumbnailQueue()}}(this))},t.prototype.removeFile=function(e){if(e.status===t.UPLOADING&&this.cancelUpload(e),this.files=u(this.files,e),this.emit("removedfile",e),0===this.files.length)return this.emit("reset")},t.prototype.removeAllFiles=function(e){var n,r,o,i;for(null==e&&(e=!1),i=this.files.slice(),r=0,o=i.length;r<o;r++)n=i[r],(n.status!==t.UPLOADING||e)&&this.removeFile(n);return null},t.prototype.createThumbnail=function(e,t){var n;return n=new FileReader,n.onload=function(r){return function(){return"image/svg+xml"===e.type?(r.emit("thumbnail",e,n.result),void(null!=t&&t())):r.createThumbnailFromUrl(e,n.result,t)}}(this),n.readAsDataURL(e)},t.prototype.createThumbnailFromUrl=function(e,t,n,r){var o;return o=document.createElement("img"),r&&(o.crossOrigin=r),o.onload=function(t){return function(){var r,i,s,l,u,p,c,d;if(e.width=o.width,e.height=o.height,s=t.options.resize.call(t,e),null==s.trgWidth&&(s.trgWidth=s.optWidth),null==s.trgHeight&&(s.trgHeight=s.optHeight),r=document.createElement("canvas"),i=r.getContext("2d"),r.width=s.trgWidth,r.height=s.trgHeight,a(i,o,null!=(u=s.srcX)?u:0,null!=(p=s.srcY)?p:0,s.srcWidth,s.srcHeight,null!=(c=s.trgX)?c:0,null!=(d=s.trgY)?d:0,s.trgWidth,s.trgHeight),l=r.toDataURL("image/png"),t.emit("thumbnail",e,l),null!=n)return n()}}(this),null!=n&&(o.onerror=n),o.src=t},t.prototype.processQueue=function(){var e,t,n,r;if(t=this.options.parallelUploads,n=this.getUploadingFiles().length,e=n,!(n>=t)&&(r=this.getQueuedFiles(),r.length>0)){if(this.options.uploadMultiple)return this.processFiles(r.slice(0,t-n));for(;e<t;){if(!r.length)return;this.processFile(r.shift()),e++}}},t.prototype.processFile=function(e){return this.processFiles([e])},t.prototype.processFiles=function(e){var n,r,o;for(r=0,o=e.length;r<o;r++)n=e[r],n.processing=!0,n.status=t.UPLOADING,this.emit("processing",n);return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)},t.prototype._getFilesWithXhr=function(e){var t;return function(){var n,r,o,i;for(o=this.files,i=[],n=0,r=o.length;n<r;n++)t=o[n],t.xhr===e&&i.push(t);return i}.call(this)},t.prototype.cancelUpload=function(e){var n,r,o,i,s,a,l;if(e.status===t.UPLOADING){for(r=this._getFilesWithXhr(e.xhr),o=0,s=r.length;o<s;o++)n=r[o],n.status=t.CANCELED;for(e.xhr.abort(),i=0,a=r.length;i<a;i++)n=r[i],this.emit("canceled",n);this.options.uploadMultiple&&this.emit("canceledmultiple",r)}else(l=e.status)!==t.ADDED&&l!==t.QUEUED||(e.status=t.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));if(this.options.autoProcessQueue)return this.processQueue()},o=function(){var e,t;return t=arguments[0],e=2<=arguments.length?p.call(arguments,1):[],"function"==typeof t?t.apply(this,e):t},t.prototype.uploadFile=function(e){return this.uploadFiles([e])},t.prototype.uploadFiles=function(e){var r,i,s,a,l,u,p,c,d,f,h,m,g,y,v,b,_,E,S,C,P,w,O,T,F,I,A,x,D,N,k,R,L,U;for(S=new XMLHttpRequest,C=0,T=e.length;C<T;C++)r=e[C],r.xhr=S;m=o(this.options.method,e),_=o(this.options.url,e),S.open(m,_,!0),S.withCredentials=!!this.options.withCredentials,v=null,s=function(t){return function(){var n,o,i;for(i=[],n=0,o=e.length;n<o;n++)r=e[n],i.push(t._errorProcessing(e,v||t.options.dictResponseError.replace("{{statusCode}}",S.status),S));return i}}(this),b=function(t){return function(n){var o,i,s,a,l,u,p,c,d;if(null!=n)for(i=100*n.loaded/n.total,s=0,u=e.length;s<u;s++)r=e[s],r.upload={progress:i,total:n.total,bytesSent:n.loaded};else{for(o=!0,i=100,a=0,p=e.length;a<p;a++)r=e[a],100===r.upload.progress&&r.upload.bytesSent===r.upload.total||(o=!1),r.upload.progress=i,r.upload.bytesSent=r.upload.total;if(o)return}for(d=[],l=0,c=e.length;l<c;l++)r=e[l],d.push(t.emit("uploadprogress",r,i,r.upload.bytesSent));return d}}(this),S.onload=function(n){return function(r){var o;if(e[0].status!==t.CANCELED&&4===S.readyState){if(v=S.responseText,S.getResponseHeader("content-type")&&~S.getResponseHeader("content-type").indexOf("application/json"))try{v=JSON.parse(v)}catch(e){r=e,v="Invalid JSON response from server."}return b(),200<=(o=S.status)&&o<300?n._finished(e,v,r):s()}}}(this),S.onerror=function(n){return function(){if(e[0].status!==t.CANCELED)return s()}}(),y=null!=(D=S.upload)?D:S,y.onprogress=b,u={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&n(u,this.options.headers);for(a in u)(l=u[a])&&S.setRequestHeader(a,l);if(i=new FormData,this.options.params){N=this.options.params;for(h in N)E=N[h],i.append(h,E)}for(P=0,F=e.length;P<F;P++)r=e[P],this.emit("sending",r,S,i);if(this.options.uploadMultiple&&this.emit("sendingmultiple",e,S,i),"FORM"===this.element.tagName)for(k=this.element.querySelectorAll("input, textarea, select, button"),w=0,I=k.length;w<I;w++)if(c=k[w],d=c.getAttribute("name"),f=c.getAttribute("type"),"SELECT"===c.tagName&&c.hasAttribute("multiple"))for(R=c.options,O=0,A=R.length;O<A;O++)g=R[O],g.selected&&i.append(d,g.value);else(!f||"checkbox"!==(L=f.toLowerCase())&&"radio"!==L||c.checked)&&i.append(d,c.value);for(p=x=0,U=e.length-1;0<=U?x<=U:x>=U;p=0<=U?++x:--x)i.append(this._getParamName(p),e[p],this._renameFilename(e[p].name));return this.submitRequest(S,i,e)},t.prototype.submitRequest=function(e,t,n){return e.send(t)},t.prototype._finished=function(e,n,r){var o,i,s;for(i=0,s=e.length;i<s;i++)o=e[i],o.status=t.SUCCESS,this.emit("success",o,n,r),this.emit("complete",o);if(this.options.uploadMultiple&&(this.emit("successmultiple",e,n,r),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()},t.prototype._errorProcessing=function(e,n,r){var o,i,s;for(i=0,s=e.length;i<s;i++)o=e[i],o.status=t.ERROR,this.emit("error",o,n,r),this.emit("complete",o);if(this.options.uploadMultiple&&(this.emit("errormultiple",e,n,r),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()},t}(r),n.version="4.3.0",n.options={},n.optionsForElement=function(e){return e.getAttribute("id")?n.options[o(e.getAttribute("id"))]:void 0},n.instances=[],n.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},n.autoDiscover=!0,n.discover=function(){var e,t,r,o,i,s;for(document.querySelectorAll?r=document.querySelectorAll(".dropzone"):(r=[],e=function(e){var t,n,o,i;for(i=[],n=0,o=e.length;n<o;n++)t=e[n],/(^| )dropzone($| )/.test(t.className)?i.push(r.push(t)):i.push(void 0);return i},e(document.getElementsByTagName("div")),e(document.getElementsByTagName("form"))),s=[],o=0,i=r.length;o<i;o++)t=r[o],!1!==n.optionsForElement(t)?s.push(new n(t)):s.push(void 0);return s},n.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],n.isBrowserSupported=function(){var e,t,r,o,i;if(e=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(i=n.blacklistedBrowsers,r=0,o=i.length;r<o;r++)t=i[r],t.test(navigator.userAgent)&&(e=!1);else e=!1;else e=!1;return e},u=function(e,t){var n,r,o,i;for(i=[],r=0,o=e.length;r<o;r++)(n=e[r])!==t&&i.push(n);return i},o=function(e){return e.replace(/[\-_](\w)/g,function(e){return e.charAt(1).toUpperCase()})},n.createElement=function(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.childNodes[0]},n.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},n.getElement=function(e,t){var n;if("string"==typeof e?n=document.querySelector(e):null!=e.nodeType&&(n=e),null==n)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector or a plain HTML element.");return n},n.getElements=function(e,t){var n,r,o,i,s,a,l;if(e instanceof Array){r=[];try{for(o=0,s=e.length;o<s;o++)n=e[o],r.push(this.getElement(n,t))}catch(e){r=null}}else if("string"==typeof e)for(r=[],l=document.querySelectorAll(e),i=0,a=l.length;i<a;i++)n=l[i],r.push(n);else null!=e.nodeType&&(r=[e]);if(null==r||!r.length)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return r},n.confirm=function(e,t,n){return window.confirm(e)?t():null!=n?n():void 0},n.isValidFile=function(e,t){var n,r,o,i,s;if(!t)return!0;for(t=t.split(","),r=e.type,n=r.replace(/\/.*$/,""),i=0,s=t.length;i<s;i++)if(o=t[i],o=o.trim(),"."===o.charAt(0)){if(-1!==e.name.toLowerCase().indexOf(o.toLowerCase(),e.name.length-o.length))return!0}else if(/\/\*$/.test(o)){if(n===o.replace(/\/.*$/,""))return!0}else if(r===o)return!0;return!1},void 0!==e&&null!==e&&(e.fn.dropzone=function(e){return this.each(function(){return new n(this,e)})}),void 0!==t&&null!==t?t.exports=n:window.Dropzone=n,n.ADDED="added",n.QUEUED="queued",n.ACCEPTED=n.QUEUED,n.UPLOADING="uploading",n.PROCESSING=n.UPLOADING,n.CANCELED="canceled",n.ERROR="error",n.SUCCESS="success",s=function(e){var t,n,r,o,i,s,a,l,u;for(e.naturalWidth,s=e.naturalHeight,n=document.createElement("canvas"),n.width=1,n.height=s,r=n.getContext("2d"),r.drawImage(e,0,0),o=r.getImageData(0,0,1,s).data,u=0,i=s,a=s;a>u;)t=o[4*(a-1)+3],0===t?i=a:u=a,a=i+u>>1;return l=a/s,0===l?1:l},a=function(e,t,n,r,o,i,a,l,u,p){var c;return c=s(t),e.drawImage(t,n,r,o,i,a,l,u,p/c)},i=function(e,t){var n,r,o,i,s,a,l,u,p;if(o=!1,p=!0,r=e.document,u=r.documentElement,n=r.addEventListener?"addEventListener":"attachEvent",l=r.addEventListener?"removeEventListener":"detachEvent",a=r.addEventListener?"":"on",i=function(n){if("readystatechange"!==n.type||"complete"===r.readyState)return("load"===n.type?e:r)[l](a+n.type,i,!1),!o&&(o=!0)?t.call(e,n.type||n):void 0},s=function(){try{u.doScroll("left")}catch(e){return void setTimeout(s,50)}return i("poll")},"complete"!==r.readyState){if(r.createEventObject&&u.doScroll){try{p=!e.frameElement}catch(e){}p&&s()}return r[n](a+"DOMContentLoaded",i,!1),r[n](a+"readystatechange",i,!1),e[n](a+"load",i,!1)}},n._autoDiscoverFunction=function(){if(n.autoDiscover)return n.discover()},i(window,n._autoDiscoverFunction)}).call(this)}).call(t,n(7),n(52)(e))},function(e,t,n){"use strict";var r=n(0),o=r.createClass({displayName:"CustomFilterContainer",getDefaultProps:function(){return{placeholderText:""}},render:function(){var e=this;return"function"!=typeof e.props.customFilterComponent?(console.log("Couldn't find valid template."),r.createElement("div",null)):r.createElement(e.props.customFilterComponent,{changeFilter:this.props.changeFilter,results:this.props.results,currentResults:this.props.currentResults,placeholderText:this.props.placeholderText})}});e.exports=o},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(0),i=o.createClass({displayName:"CustomPaginationContainer",getDefaultProps:function(){return{maxPage:0,nextText:"",previousText:"",currentPage:0,customPagerComponent:{},customPagerComponentOptions:{}}},render:function(){var e=this;return"function"!=typeof e.props.customPagerComponent?(console.log("Couldn't find valid template."),o.createElement("div",null)):o.createElement(e.props.customPagerComponent,r({},this.props.customPagerComponentOptions,{maxPage:this.props.maxPage,nextText:this.props.nextText,previousText:this.props.previousText,currentPage:this.props.currentPage,setPage:this.props.setPage,previous:this.props.previous,next:this.props.next}))}});e.exports=i},function(e,t,n){"use strict";var r=n(0),o=r.createClass({displayName:"CustomRowComponentContainer",getDefaultProps:function(){return{data:[],metadataColumns:[],className:"",customComponent:{},globalData:{}}},render:function(){var e=this;if("function"!=typeof e.props.customComponent)return console.log("Couldn't find valid template."),r.createElement("div",{className:this.props.className});var t=this.props.data.map(function(t,n){return r.createElement(e.props.customComponent,{data:t,metadataColumns:e.props.metadataColumns,key:n,globalData:e.props.globalData})});return this.props.showPager&&this.props.pagingContent,r.createElement("div",{className:this.props.className,style:this.props.style},t)}});e.exports=o},function(e,t,n){"use strict";var r=n(0),o=r.createClass({displayName:"GridFilter",getDefaultProps:function(){return{placeholderText:""}},handleChange:function(e){this.props.changeFilter(e.target.value)},render:function(){return r.createElement("div",{className:"filter-container"},r.createElement("input",{type:"text",name:"filter",placeholder:this.props.placeholderText,className:"form-control",onChange:this.handleChange}))}});e.exports=o},function(e,t,n){"use strict";var r=n(0),o=r.createClass({displayName:"GridNoData",getDefaultProps:function(){return{noDataMessage:"No Data"}},render:function(){return r.createElement("div",null,this.props.noDataMessage)}});e.exports=o},function(e,t,n){"use strict";var r=n(0),o=n(48),i=r.createClass({displayName:"GridPagination",getDefaultProps:function(){return{maxPage:0,nextText:"",previousText:"",currentPage:0,useGriddleStyles:!0,nextClassName:"griddle-next",previousClassName:"griddle-previous",nextIconComponent:null,previousIconComponent:null}},pageChange:function(e){this.props.setPage(parseInt(e.target.value,10)-1)},render:function(){var e="",t="";this.props.currentPage>0&&(e=r.createElement("button",{type:"button",onClick:this.props.previous,style:this.props.useGriddleStyles?{color:"#222",border:"none",background:"none",margin:"0 0 0 10px"}:null},this.props.previousIconComponent,this.props.previousText)),this.props.currentPage!==this.props.maxPage-1&&(t=r.createElement("button",{type:"button",onClick:this.props.next,style:this.props.useGriddleStyles?{color:"#222",border:"none",background:"none",margin:"0 10px 0 0"}:null},this.props.nextText,this.props.nextIconComponent));var n=null,i=null,s=null;if(!0===this.props.useGriddleStyles){var a={float:"left",minHeight:"1px",marginTop:"5px"};s=o({textAlign:"right",width:"34%"},a),i=o({textAlign:"center",width:"33%"},a),n=o({width:"33%"},a)}for(var l=[],u=1;u<=this.props.maxPage;u++)l.push(r.createElement("option",{value:u,key:u},u));return r.createElement("div",{style:this.props.useGriddleStyles?{minHeight:"35px"}:null},r.createElement("div",{className:this.props.previousClassName,style:n},e),r.createElement("div",{className:"griddle-page",style:i},r.createElement("select",{value:this.props.currentPage+1,onChange:this.pageChange},l)," / ",this.props.maxPage),r.createElement("div",{className:this.props.nextClassName,style:s},t))}});e.exports=i},function(e,t,n){"use strict";var r=n(0),o=(n(29),n(97)),i=n(51),s=n(346),a=n(48),l=n(318),u=n(342),p=n(146),c=r.createClass({displayName:"GridRow",getDefaultProps:function(){return{isChildRow:!1,showChildren:!1,data:{},columnSettings:null,rowSettings:null,hasChildren:!1,useGriddleStyles:!0,useGriddleIcons:!0,isSubGriddle:!1,paddingHeight:null,rowHeight:null,parentRowCollapsedClassName:"parent-row",parentRowExpandedClassName:"parent-row expanded",parentRowCollapsedComponent:"",parentRowExpandedComponent:"",onRowClick:null,multipleSelectionSettings:null}},handleClick:function(e){null!==this.props.onRowClick&&i(this.props.onRowClick)?this.props.onRowClick(this,e):this.props.hasChildren&&this.props.toggleChildren()},handleSelectionChange:function(e){},handleSelectClick:function(e){this.props.multipleSelectionSettings.isMultipleSelection&&("checkbox"===e.target.type?this.props.multipleSelectionSettings.toggleSelectRow(this.props.data,this.refs.selected.checked):this.props.multipleSelectionSettings.toggleSelectRow(this.props.data,!this.refs.selected.checked))},verifyProps:function(){null===this.props.columnSettings&&console.error("gridRow: The columnSettings prop is null and it shouldn't be")},formatData:function(e){return"boolean"==typeof e?String(e):e},render:function(){var e=this;this.verifyProps();var t=this,n=null;this.props.useGriddleStyles&&(n={margin:"0px",padding:t.props.paddingHeight+"px 5px "+t.props.paddingHeight+"px 5px",height:t.props.rowHeight?this.props.rowHeight-2*t.props.paddingHeight+"px":null,backgroundColor:"#FFF",borderTopColor:"#DDD",color:"#222"});var c=this.props.columnSettings.getColumns(),d=s(c,[]),f=a({},this.props.data);l(f,d);var h,m,g=u(o.pick(f,p(c,"children"))),y=g.map(function(t,o){var i=null,s=e.props.columnSettings.getColumnMetadataByName(t[0]),l=0===o&&e.props.hasChildren&&!1===e.props.showChildren&&e.props.useGriddleIcons?r.createElement("span",{style:e.props.useGriddleStyles?{fontSize:"10px",marginRight:"5px"}:null},e.props.parentRowCollapsedComponent):0===o&&e.props.hasChildren&&e.props.showChildren&&e.props.useGriddleIcons?r.createElement("span",{style:e.props.useGriddleStyles?{fontSize:"10px"}:null},e.props.parentRowExpandedComponent):"";if(0===o&&e.props.isChildRow&&e.props.useGriddleStyles&&(n=a(n,{paddingLeft:10})),e.props.columnSettings.hasColumnMetadata()&&void 0!==s&&null!==s)if(void 0!==s.customComponent&&null!==s.customComponent){var u=r.createElement(s.customComponent,{data:t[1],rowData:f,metadata:s});i=r.createElement("td",{onClick:e.handleClick,className:s.cssClassName,key:o,style:n},u)}else i=r.createElement("td",{onClick:e.handleClick,className:s.cssClassName,key:o,style:n},l,e.formatData(t[1]));return i||r.createElement("td",{onClick:e.handleClick,key:o,style:n},l,t[1])});null!==this.props.onRowClick&&i(this.props.onRowClick)?(h=null,m=this.handleSelectClick):this.props.multipleSelectionSettings&&this.props.multipleSelectionSettings.isMultipleSelection?(h=this.handleSelectClick,m=null):(h=null,m=null),y&&this.props.multipleSelectionSettings&&this.props.multipleSelectionSettings.isMultipleSelection&&(this.props.multipleSelectionSettings.getSelectedRowIds(),y.unshift(r.createElement("td",{key:"selection",style:n,className:"griddle-select griddle-select-cell",onClick:m},r.createElement("input",{type:"checkbox",checked:this.props.multipleSelectionSettings.getIsRowChecked(f),onChange:this.handleSelectionChange,ref:"selected"}))));var v=t.props.rowSettings&&t.props.rowSettings.getBodyRowMetadataClass(t.props.data)||"standard-row";return t.props.isChildRow?v="child-row":t.props.hasChildren&&(v=t.props.showChildren?this.props.parentRowExpandedClassName:this.props.parentRowCollapsedClassName),r.createElement("tr",{onClick:h,className:v},y)}});e.exports=c},function(e,t,n){"use strict";var r=n(0),o=n(325),i=n(146),s=n(72),a=r.createClass({displayName:"GridSettings",getDefaultProps:function(){return{columns:[],columnMetadata:[],selectedColumns:[],settingsText:"",maxRowsText:"",resultsPerPage:0,enableToggleCustom:!1,useCustomComponent:!1,useGriddleStyles:!0,toggleCustomComponent:function(){}}},setPageSize:function(e){var t=parseInt(e.target.value,10);this.props.setPageSize(t)},handleChange:function(e){var t=e.target.dataset?e.target.dataset.name:e.target.getAttribute("data-name");!0===e.target.checked&&!1===o(this.props.selectedColumns,t)?(this.props.selectedColumns.push(t),this.props.setColumns(this.props.selectedColumns)):this.props.setColumns(i(this.props.selectedColumns,t))},render:function(){var e=this,t=[];!1===e.props.useCustomComponent&&(t=this.props.columns.map(function(t,n){var i=o(e.props.selectedColumns,t),a=s(e.props.columnMetadata,{columnName:t}),l=t;return void 0!==a&&void 0!==a.displayName&&null!=a.displayName&&(l=a.displayName),void 0!==a&&null!=a&&a.locked?r.createElement("div",{className:"column checkbox"},r.createElement("label",null,r.createElement("input",{type:"checkbox",disabled:!0,name:"check",checked:i,"data-name":t}),l)):void 0!==a&&null!=a&&void 0!==a.visible&&!1===a.visible?null:r.createElement("div",{className:"griddle-column-selection checkbox",key:t,style:e.props.useGriddleStyles?{float:"left",width:"20%"}:null},r.createElement("label",null,r.createElement("input",{type:"checkbox",name:"check",onChange:e.handleChange,checked:i,"data-name":t}),l))}));var n=e.props.enableToggleCustom?r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"maxRows"},r.createElement("input",{type:"checkbox",checked:this.props.useCustomComponent,onChange:this.props.toggleCustomComponent})," ",this.props.enableCustomFormatText)):"",i=this.props.showSetPageSize?r.createElement("div",null,r.createElement("label",{htmlFor:"maxRows"},this.props.maxRowsText,":",r.createElement("select",{onChange:this.setPageSize,value:this.props.resultsPerPage},r.createElement("option",{value:"5"},"5"),r.createElement("option",{value:"10"},"10"),r.createElement("option",{value:"25"},"25"),r.createElement("option",{value:"50"},"50"),r.createElement("option",{value:"100"},"100")))):"";return r.createElement("div",{className:"griddle-settings",style:this.props.useGriddleStyles?{backgroundColor:"#FFF",border:"1px solid #DDD",color:"#222",padding:"10px",marginBottom:"10px"}:null},r.createElement("h6",null,this.props.settingsText),r.createElement("div",{className:"griddle-columns",style:this.props.useGriddleStyles?{clear:"both",display:"table",width:"100%",borderBottom:"1px solid #EDEDED",marginBottom:"10px"}:null},t),i,n)}});e.exports=a},function(e,t,n){"use strict";var r=n(0),o=n(215),i=n(98),s=(n(29),n(100),r.createClass({displayName:"GridTable",getDefaultProps:function(){return{data:[],columnSettings:null,rowSettings:null,sortSettings:null,multipleSelectionSettings:null,className:"",enableInfiniteScroll:!1,nextPage:null,hasMorePages:!1,useFixedHeader:!1,useFixedLayout:!0,paddingHeight:null,rowHeight:null,filterByColumn:null,infiniteScrollLoadTreshold:null,bodyHeight:null,useGriddleStyles:!0,useGriddleIcons:!0,isSubGriddle:!1,parentRowCollapsedClassName:"parent-row",parentRowExpandedClassName:"parent-row expanded",parentRowCollapsedComponent:"",parentRowExpandedComponent:"",externalLoadingComponent:null,externalIsLoading:!1,onRowClick:null}},getInitialState:function(){return{scrollTop:0,scrollHeight:this.props.bodyHeight,clientHeight:this.props.bodyHeight}},componentDidMount:function(){this.gridScroll()},componentDidUpdate:function(e,t){this.gridScroll()},gridScroll:function(){if(this.props.enableInfiniteScroll&&!this.props.externalIsLoading){var e=this.refs.scrollable,t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;if(null!==this.props.rowHeight&&this.state.scrollTop!==t&&Math.abs(this.state.scrollTop-t)>=this.getAdjustedRowHeight()){var o={scrollTop:t,scrollHeight:n,clientHeight:r};this.setState(o)}.6*(n-(t+r)-this.props.infiniteScrollLoadTreshold)<=this.props.infiniteScrollLoadTreshold&&this.props.nextPage()}},verifyProps:function(){null===this.props.columnSettings&&console.error("gridTable: The columnSettings prop is null and it shouldn't be"),null===this.props.rowSettings&&console.error("gridTable: The rowSettings prop is null and it shouldn't be")},getAdjustedRowHeight:function(){return this.props.rowHeight+2*this.props.paddingHeight},getNodeContent:function(){this.verifyProps();var e=this,t=!1;if(!this.props.externalIsLoading||this.props.enableInfiniteScroll){var n=e.props.data,o=null,s=null;if(this.props.enableInfiniteScroll&&null!==this.props.rowHeight&&void 0!==this.refs.scrollable){var a=e.getAdjustedRowHeight(),l=Math.ceil(e.state.clientHeight/a),u=Math.max(0,Math.floor(e.state.scrollTop/a)-.25*l),p=Math.min(u+1.25*l,this.props.data.length-1);n=n.slice(u,p+1);var c={height:u*a+"px"};o=r.createElement("tr",{key:"above-"+c.height,style:c});var d={height:(this.props.data.length-p)*a+"px"};s=r.createElement("tr",{key:"below-"+d.height,style:d})}var f=n.map(function(n,o){var s=void 0!==n.children&&n.children.length>0,a=e.props.rowSettings.getRowKey(n,o);return s&&(t=s),r.createElement(i,{useGriddleStyles:e.props.useGriddleStyles,isSubGriddle:e.props.isSubGriddle,parentRowExpandedClassName:e.props.parentRowExpandedClassName,parentRowCollapsedClassName:e.props.parentRowCollapsedClassName,parentRowExpandedComponent:e.props.parentRowExpandedComponent,parentRowCollapsedComponent:e.props.parentRowCollapsedComponent,data:n,key:a+"-container",uniqueId:a,columnSettings:e.props.columnSettings,rowSettings:e.props.rowSettings,paddingHeight:e.props.paddingHeight,multipleSelectionSettings:e.props.multipleSelectionSettings,rowHeight:e.props.rowHeight,hasChildren:s,tableClassName:e.props.className,onRowClick:e.props.onRowClick})});if(this.props.showNoData){var h=this.props.columnSettings.getVisibleColumnCount();f.push(r.createElement("tr",{key:"no-data-section"},r.createElement("td",{colSpan:h},this.props.noDataSection)))}return o&&f.unshift(o),s&&f.push(s),{nodes:f,anyHasChildren:t}}return null},render:function(){var e=[],t=!1,n=this.getNodeContent();n&&(e=n.nodes,t=n.anyHasChildren);var i=null,s=null,a={width:"100%"};if(this.props.useFixedLayout&&(a.tableLayout="fixed"),this.props.enableInfiniteScroll&&(i={position:"relative",overflowY:"scroll",height:this.props.bodyHeight+"px",width:"100%"}),this.props.externalIsLoading){var l=null,u=null;this.props.useGriddleStyles&&(l={textAlign:"center",paddingBottom:"40px"}),u=this.props.columnSettings.getVisibleColumnCount();var p=this.props.externalLoadingComponent?r.createElement(this.props.externalLoadingComponent,null):r.createElement("div",null,"Loading...");s=r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",{style:l,colSpan:u},p)))}var c=this.props.showTableHeading?r.createElement(o,{useGriddleStyles:this.props.useGriddleStyles,useGriddleIcons:this.props.useGriddleIcons,sortSettings:this.props.sortSettings,multipleSelectionSettings:this.props.multipleSelectionSettings,columnSettings:this.props.columnSettings,filterByColumn:this.props.filterByColumn,rowSettings:this.props.rowSettings}):void 0;t||(e=r.createElement("tbody",null,e));var d=r.createElement("tbody",null);if(this.props.showPager){var f=this.props.useGriddleStyles?{padding:"0px",backgroundColor:"#EDEDED",border:"0px",color:"#222",height:this.props.showNoData?"20px":null}:null;d=r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",{colSpan:this.props.multipleSelectionSettings.isMultipleSelection?this.props.columnSettings.getVisibleColumnCount()+1:this.props.columnSettings.getVisibleColumnCount(),style:f,className:"footer-container"},this.props.showNoData?null:this.props.pagingContent)))}return this.props.useFixedHeader?(this.props.useGriddleStyles&&(a.tableLayout="fixed"),r.createElement("div",null,r.createElement("table",{className:this.props.className,style:this.props.useGriddleStyles&&a||null},c),r.createElement("div",{ref:"scrollable",onScroll:this.gridScroll,style:i},r.createElement("table",{className:this.props.className,style:this.props.useGriddleStyles&&a||null},e,s,d)))):r.createElement("div",{ref:"scrollable",onScroll:this.gridScroll,style:i},r.createElement("table",{className:this.props.className,style:this.props.useGriddleStyles&&a||null},c,e,s,d))}}));e.exports=s},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(0),i=(n(29),n(48)),s=o.createClass({displayName:"DefaultHeaderComponent",render:function(){return o.createElement("span",null,this.props.displayName)}}),a=o.createClass({displayName:"GridTitle",getDefaultProps:function(){return{columnSettings:null,filterByColumn:function(){},rowSettings:null,sortSettings:null,multipleSelectionSettings:null,headerStyle:null,useGriddleStyles:!0,useGriddleIcons:!0,headerStyles:{}}},componentWillMount:function(){this.verifyProps()},sort:function(e){var t=this;return function(n){t.props.sortSettings.changeSort(e)}},toggleSelectAll:function(e){this.props.multipleSelectionSettings.toggleSelectAll()},handleSelectionChange:function(e){},verifyProps:function(){null===this.props.columnSettings&&console.error("gridTitle: The columnSettings prop is null and it shouldn't be"),null===this.props.sortSettings&&console.error("gridTitle: The sortSettings prop is null and it shouldn't be")},render:function(){this.verifyProps();var e=this,t={},n=this.props.columnSettings.getColumns().map(function(n,a){var l={},u="",p=e.props.columnSettings.getMetadataColumnProperty(n,"sortable",!0),c=p?e.props.sortSettings.sortDefaultComponent:null;e.props.sortSettings.sortColumn==n&&"asc"===e.props.sortSettings.sortDirection?(u=e.props.sortSettings.sortAscendingClassName,c=e.props.useGriddleIcons&&e.props.sortSettings.sortAscendingComponent):e.props.sortSettings.sortColumn==n&&"desc"===e.props.sortSettings.sortDirection&&(u+=e.props.sortSettings.sortDescendingClassName,c=e.props.useGriddleIcons&&e.props.sortSettings.sortDescendingComponent);var d=e.props.columnSettings.getColumnMetadataByName(n),f=e.props.columnSettings.getMetadataColumnProperty(n,"displayName",n),h=e.props.columnSettings.getMetadataColumnProperty(n,"customHeaderComponent",s),m=e.props.columnSettings.getMetadataColumnProperty(n,"customHeaderComponentProps",{});u=null==d?u:(u&&u+" "||u)+e.props.columnSettings.getMetadataColumnProperty(n,"cssClassName",""),e.props.useGriddleStyles&&(l={backgroundColor:"#EDEDEF",border:"0px",borderBottom:"1px solid #DDD",color:"#222",padding:"5px",cursor:p?"pointer":"default"}),t=d&&d.titleStyles?i({},l,d.titleStyles):i({},l);var g=f?"th":"td";return o.createElement(g,{onClick:p?e.sort(n):null,"data-title":n,className:u,key:n,style:t},o.createElement(h,r({columnName:n,displayName:f,filterByColumn:e.props.filterByColumn},m)),c)});n&&this.props.multipleSelectionSettings.isMultipleSelection&&n.unshift(o.createElement("th",{key:"selection",onClick:this.toggleSelectAll,style:t,className:"griddle-select griddle-select-title"},o.createElement("input",{type:"checkbox",checked:this.props.multipleSelectionSettings.getIsSelectAllChecked(),onChange:this.handleSelectionChange})));var a=e.props.rowSettings&&e.props.rowSettings.getHeaderRowMetadataClass()||null;return o.createElement("thead",null,o.createElement("tr",{className:a,style:this.props.headerStyles},n))}});e.exports=a},function(e,t,n){var r=n(19),o=n(9),i=r(o,"DataView");e.exports=i},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var o=n(279),i=n(280),s=n(281),a=n(282),l=n(283);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=s,r.prototype.has=a,r.prototype.set=l,e.exports=r},function(e,t,n){var r=n(19),o=n(9),i=r(o,"Promise");e.exports=i},function(e,t,n){var r=n(19),o=n(9),i=r(o,"Set");e.exports=i},function(e,t,n){var r=n(19),o=n(9),i=r(o,"WeakMap");e.exports=i},function(e,t){function n(e,t){return e.set(t[0],t[1]),e}e.exports=n},function(e,t){function n(e,t){return e.add(t),e}e.exports=n},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}e.exports=n},function(e,t,n){function r(e,t){return e&&o(t,i(t),e)}var o=n(18),i=n(13);e.exports=r},function(e,t,n){function r(e,t){return e&&o(t,i(t),e)}var o=n(18),i=n(76);e.exports=r},function(e,t,n){function r(e,t,n,x,D,N){var k,R=t&C,L=t&P,U=t&w;if(n&&(k=D?n(e,x,D,N):n(e)),void 0!==k)return k;if(!E(e))return e;var M=b(e);if(M){if(k=g(e),!R)return p(e,k)}else{var j=m(e),B=j==T||j==F;if(_(e))return u(e,R);if(j==I||j==O||B&&!D){if(k=L||B?{}:v(e),!R)return L?d(e,l(k,e)):c(e,a(k,e))}else{if(!A[j])return D?e:{};k=y(e,j,r,R)}}N||(N=new o);var G=N.get(e);if(G)return G;N.set(e,k);var H=U?L?h:f:L?keysIn:S,q=M?void 0:H(e);return i(q||e,function(o,i){q&&(i=o,o=e[i]),s(k,i,r(o,t,n,i,e,N))}),k}var o=n(62),i=n(103),s=n(30),a=n(224),l=n(225),u=n(255),p=n(120),c=n(264),d=n(265),f=n(126),h=n(127),m=n(45),g=n(284),y=n(285),v=n(286),b=n(2),_=n(50),E=n(11),S=n(13),C=1,P=2,w=4,O="[object Arguments]",T="[object Function]",F="[object GeneratorFunction]",I="[object Object]",A={};A[O]=A["[object Array]"]=A["[object ArrayBuffer]"]=A["[object DataView]"]=A["[object Boolean]"]=A["[object Date]"]=A["[object Float32Array]"]=A["[object Float64Array]"]=A["[object Int8Array]"]=A["[object Int16Array]"]=A["[object Int32Array]"]=A["[object Map]"]=A["[object Number]"]=A[I]=A["[object RegExp]"]=A["[object Set]"]=A["[object String]"]=A["[object Symbol]"]=A["[object Uint8Array]"]=A["[object Uint8ClampedArray]"]=A["[object Uint16Array]"]=A["[object Uint32Array]"]=!0,A["[object Error]"]=A[T]=A["[object WeakMap]"]=!1,e.exports=r},function(e,t,n){var r=n(11),o=Object.create,i=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=i},function(e,t,n){function r(e,t){var n=[];return o(e,function(e,r,o){t(e,r,o)&&n.push(e)}),n}var o=n(64);e.exports=r},function(e,t,n){var r=n(268),o=r();e.exports=o},function(e,t){function n(e,t){return null!=e&&t in Object(e)}e.exports=n},function(e,t,n){function r(e,t,n){for(var r=n?s:i,c=e[0].length,d=e.length,f=d,h=Array(d),m=1/0,g=[];f--;){var y=e[f];f&&t&&(y=a(y,l(t))),m=p(y.length,m),h[f]=!n&&(t||c>=120&&y.length>=120)?new o(f&&y):void 0}y=e[0];var v=-1,b=h[0];e:for(;++v<c&&g.length<m;){var _=y[v],E=t?t(_):_;if(_=n||0!==_?_:0,!(b?u(b,E):r(g,E,n))){for(f=d;--f;){var S=h[f];if(!(S?u(S,E):r(e[f],E,n)))continue e}b&&b.push(E),g.push(_)}}return g}var o=n(61),i=n(105),s=n(106),a=n(8),l=n(43),u=n(66),p=Math.min;e.exports=r},function(e,t,n){function r(e){return i(e)&&o(e)==s}var o=n(17),i=n(14),s="[object Arguments]";e.exports=r},function(e,t,n){function r(e,t,n,r,g,v){var b=u(e),_=u(t),E=b?h:l(e),S=_?h:l(t);E=E==f?m:E,S=S==f?m:S;var C=E==m,P=S==m,w=E==S;if(w&&p(e)){if(!p(t))return!1;b=!0,C=!1}if(w&&!C)return v||(v=new o),b||c(e)?i(e,t,n,r,g,v):s(e,t,E,n,r,g,v);if(!(n&d)){var O=C&&y.call(e,"__wrapped__"),T=P&&y.call(t,"__wrapped__");if(O||T){var F=O?e.value():e,I=T?t.value():t;return v||(v=new o),g(F,I,n,r,v)}}return!!w&&(v||(v=new o),a(e,t,n,r,g,v))}var o=n(62),i=n(123),s=n(273),a=n(274),l=n(45),u=n(2),p=n(50),c=n(75),d=1,f="[object Arguments]",h="[object Array]",m="[object Object]",g=Object.prototype,y=g.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t,n,r){var l=n.length,u=l,p=!r;if(null==e)return!u;for(e=Object(e);l--;){var c=n[l];if(p&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++l<u;){c=n[l];var d=c[0],f=e[d],h=c[1];if(p&&c[2]){if(void 0===f&&!(d in e))return!1}else{var m=new o;if(r)var g=r(f,h,d,e,t,m);if(!(void 0===g?i(h,f,s|a,r,m):g))return!1}}return!0}var o=n(62),i=n(115),s=1,a=2;e.exports=r},function(e,t){function n(e){return e!==e}e.exports=n},function(e,t,n){function r(e){return!(!s(e)||i(e))&&(o(e)?h:u).test(a(e))}var o=n(51),i=n(289),s=n(11),a=n(137),l=/[\\^$.*+?()[\]{}|]/g,u=/^\[object .+?Constructor\]$/,p=Function.prototype,c=Object.prototype,d=p.toString,f=c.hasOwnProperty,h=RegExp("^"+d.call(f).replace(l,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=r},function(e,t,n){function r(e){return s(e)&&i(e.length)&&!!a[o(e)]}var o=n(17),i=n(74),s=n(14),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=r},function(e,t,n){function r(e){if(!o(e))return s(e);var t=i(e),n=[];for(var r in e)("constructor"!=r||!t&&l.call(e,r))&&n.push(r);return n}var o=n(11),i=n(33),s=n(302),a=Object.prototype,l=a.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){var t=i(e);return 1==t.length&&t[0][2]?s(t[0][0],t[0][1]):function(n){return n===e||o(n,e,t)}}var o=n(234),i=n(275),s=n(131);e.exports=r},function(e,t,n){function r(e,t){return a(e)&&l(t)?u(p(e),t):function(n){var r=i(n,e);return void 0===r&&r===t?s(n,e):o(t,r,c|d)}}var o=n(115),i=n(140),s=n(141),a=n(70),l=n(130),u=n(131),p=n(20),c=1,d=2;e.exports=r},function(e,t,n){function r(e,t){return o(e,t,function(t,n){return i(e,n)})}var o=n(242),i=n(141);e.exports=r},function(e,t,n){function r(e,t,n){for(var r=-1,a=t.length,l={};++r<a;){var u=t[r],p=o(e,u);n(p,u)&&i(l,s(u,e),p)}return l}var o=n(42),i=n(245),s=n(24);e.exports=r},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}e.exports=n},function(e,t,n){function r(e){return function(t){return o(t,e)}}var o=n(42);e.exports=r},function(e,t,n){function r(e,t,n,r){if(!a(e))return e;t=i(t,e);for(var u=-1,p=t.length,c=p-1,d=e;null!=d&&++u<p;){var f=l(t[u]),h=n;if(u!=c){var m=d[f];void 0===(h=r?r(m,f,d):void 0)&&(h=a(m)?m:s(t[u+1])?[]:{})}o(d,f,h),d=d[f]}return e}var o=n(30),i=n(24),s=n(46),a=n(11),l=n(20);e.exports=r},function(e,t,n){var r=n(317),o=n(122),i=n(35),s=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:i;e.exports=s},function(e,t){function n(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}e.exports=n},function(e,t){function n(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}e.exports=n},function(e,t,n){function r(e,t){return o(t,function(t){return[t,e[t]]})}var o=n(8);e.exports=r},function(e,t,n){function r(e){if("string"==typeof e)return e;if(s(e))return i(e,r)+"";if(a(e))return p?p.call(e):"";var t=e+"";return"0"==t&&1/e==-l?"-0":t}var o=n(22),i=n(8),s=n(2),a=n(25),l=1/0,u=o?o.prototype:void 0,p=u?u.toString:void 0;e.exports=r},function(e,t,n){function r(e,t){return t=o(t,e),null==(e=s(e,t))||delete e[a(i(t))]}var o=n(24),i=n(332),s=n(305),a=n(20);e.exports=r},function(e,t,n){function r(e,t){return o(t,function(t){return e[t]})}var o=n(8);e.exports=r},function(e,t){function n(e,t,n){for(var r=-1,o=e.length,i=t.length,s={};++r<o;){var a=r<i?t[r]:void 0;n(s,e[r],a)}return s}e.exports=n},function(e,t,n){function r(e){return o(e)?e:[]}var o=n(73);e.exports=r},function(e,t,n){(function(e){function r(e,t){if(t)return e.slice();var n=e.length,r=u?u(n):new e.constructor(n);return e.copy(r),r}var o=n(9),i="object"==typeof t&&t&&!t.nodeType&&t,s=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=s&&s.exports===i,l=a?o.Buffer:void 0,u=l?l.allocUnsafe:void 0;e.exports=r}).call(t,n(52)(e))},function(e,t,n){function r(e,t){var n=t?o(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var o=n(67);e.exports=r},function(e,t,n){function r(e,t,n){var r=t?n(s(e),a):s(e);return i(r,o,new e.constructor)}var o=n(221),i=n(108),s=n(71),a=1;e.exports=r},function(e,t){function n(e){var t=new e.constructor(e.source,r.exec(e));return t.lastIndex=e.lastIndex,t}var r=/\w*$/;e.exports=n},function(e,t,n){function r(e,t,n){var r=t?n(s(e),a):s(e);return i(r,o,new e.constructor)}var o=n(222),i=n(108),s=n(134),a=1;e.exports=r},function(e,t,n){function r(e){return s?Object(s.call(e)):{}}var o=n(22),i=o?o.prototype:void 0,s=i?i.valueOf:void 0;e.exports=r},function(e,t,n){function r(e,t){var n=t?o(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var o=n(67);e.exports=r},function(e,t,n){function r(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e===e,s=o(e),a=void 0!==t,l=null===t,u=t===t,p=o(t);if(!l&&!p&&!s&&e>t||s&&a&&u&&!l&&!p||r&&a&&u||!n&&u||!i)return 1;if(!r&&!s&&!p&&e<t||p&&n&&i&&!r&&!s||l&&n&&i||!a&&i||!u)return-1}return 0}var o=n(25);e.exports=r},function(e,t,n){function r(e,t,n){for(var r=-1,i=e.criteria,s=t.criteria,a=i.length,l=n.length;++r<a;){var u=o(i[r],s[r]);if(u)return r>=l?u:u*("desc"==n[r]?-1:1)}return e.index-t.index}var o=n(262);e.exports=r},function(e,t,n){function r(e,t){return o(e,i(e),t)}var o=n(18),i=n(69);e.exports=r},function(e,t,n){function r(e,t){return o(e,i(e),t)}var o=n(18),i=n(128);e.exports=r},function(e,t,n){var r=n(9),o=r["__core-js_shared__"];e.exports=o},function(e,t,n){function r(e,t){return function(n,r){if(null==n)return n;if(!o(n))return e(n,r);for(var i=n.length,s=t?i:-1,a=Object(n);(t?s--:++s<i)&&!1!==r(a[s],s,a););return n}}var o=n(10);e.exports=r},function(e,t){function n(e){return function(t,n,r){for(var o=-1,i=Object(t),s=r(t),a=s.length;a--;){var l=s[e?a:++o];if(!1===n(i[l],l,i))break}return t}}e.exports=n},function(e,t,n){function r(e){return function(t,n,r){var a=Object(t);if(!i(t)){var l=o(n,3);t=s(t),n=function(e){return l(a[e],e,a)}}var u=e(t,n,r);return u>-1?a[l?t[u]:u]:void 0}}var o=n(31),i=n(10),s=n(13);e.exports=r},function(e,t,n){function r(e){return function(t){var n=i(t);return n==l?s(t):n==u?a(t):o(t,e(t))}}var o=n(249),i=n(45),s=n(71),a=n(308),l="[object Map]",u="[object Set]";e.exports=r},function(e,t,n){function r(e,t,n,r){return void 0===e||o(e,i[n])&&!s.call(r,n)?t:e}var o=n(34),i=Object.prototype,s=i.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){return o(e)?void 0:e}var o=n(142);e.exports=r},function(e,t,n){function r(e,t,n,r,o,C,w){switch(n){case S:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case E:return!(e.byteLength!=t.byteLength||!C(new i(e),new i(t)));case d:case f:case g:return s(+e,+t);case h:return e.name==t.name&&e.message==t.message;case y:case b:return e==t+"";case m:var O=l;case v:var T=r&p;if(O||(O=u),e.size!=t.size&&!T)return!1;var F=w.get(e);if(F)return F==t;r|=c,w.set(e,t);var I=a(O(e),O(t),r,o,C,w);return w.delete(e),I;case _:if(P)return P.call(e)==P.call(t)}return!1}var o=n(22),i=n(101),s=n(34),a=n(123),l=n(71),u=n(134),p=1,c=2,d="[object Boolean]",f="[object Date]",h="[object Error]",m="[object Map]",g="[object Number]",y="[object RegExp]",v="[object Set]",b="[object String]",_="[object Symbol]",E="[object ArrayBuffer]",S="[object DataView]",C=o?o.prototype:void 0,P=C?C.valueOf:void 0;e.exports=r},function(e,t,n){function r(e,t,n,r,s,l){var u=n&i,p=o(e),c=p.length;if(c!=o(t).length&&!u)return!1;for(var d=c;d--;){var f=p[d];if(!(u?f in t:a.call(t,f)))return!1}var h=l.get(e);if(h&&l.get(t))return h==t;var m=!0;l.set(e,t),l.set(t,e);for(var g=u;++d<c;){f=p[d];var y=e[f],v=t[f];if(r)var b=u?r(v,y,f,t,e,l):r(y,v,f,e,t,l);if(!(void 0===b?y===v||s(y,v,n,r,l):b)){m=!1;break}g||(g="constructor"==f)}if(m&&!g){var _=e.constructor,E=t.constructor;_!=E&&"constructor"in e&&"constructor"in t&&!("function"==typeof _&&_ instanceof _&&"function"==typeof E&&E instanceof E)&&(m=!1)}return l.delete(e),l.delete(t),m}var o=n(126),i=1,s=Object.prototype,a=s.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){for(var t=i(e),n=t.length;n--;){var r=t[n],s=e[r];t[n]=[r,s,o(s)]}return t}var o=n(130),i=n(13);e.exports=r},function(e,t,n){function r(e){var t=s.call(e,l),n=e[l];try{e[l]=void 0;var r=!0}catch(e){}var o=a.call(e);return r&&(t?e[l]=n:delete e[l]),o}var o=n(22),i=Object.prototype,s=i.hasOwnProperty,a=i.toString,l=o?o.toStringTag:void 0;e.exports=r},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},function(e,t,n){function r(e,t,n){t=o(t,e);for(var r=-1,p=t.length,c=!1;++r<p;){var d=u(t[r]);if(!(c=null!=e&&n(e,d)))break;e=e[d]}return c||++r!=p?c:!!(p=null==e?0:e.length)&&l(p)&&a(d,p)&&(s(e)||i(e))}var o=n(24),i=n(49),s=n(2),a=n(46),l=n(74),u=n(20);e.exports=r},function(e,t,n){function r(){this.__data__=o?o(null):{},this.size=0}var o=n(47);e.exports=r},function(e,t){function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}e.exports=n},function(e,t,n){function r(e){var t=this.__data__;if(o){var n=t[e];return n===i?void 0:n}return a.call(t,e)?t[e]:void 0}var o=n(47),i="__lodash_hash_undefined__",s=Object.prototype,a=s.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){var t=this.__data__;return o?void 0!==t[e]:s.call(t,e)}var o=n(47),i=Object.prototype,s=i.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=o&&void 0===t?i:t,this}var o=n(47),i="__lodash_hash_undefined__";e.exports=r},function(e,t){function n(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&o.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var r=Object.prototype,o=r.hasOwnProperty;e.exports=n},function(e,t,n){function r(e,t,n,r){var A=e.constructor;switch(t){case b:return o(e);case c:case d:return new A(+e);case _:return i(e,r);case E:case S:case C:case P:case w:case O:case T:case F:case I:return p(e,r);case f:return s(e,r,n);case h:case y:return new A(e);case m:return a(e);case g:return l(e,r,n);case v:return u(e)}}var o=n(67),i=n(256),s=n(257),a=n(258),l=n(259),u=n(260),p=n(261),c="[object Boolean]",d="[object Date]",f="[object Map]",h="[object Number]",m="[object RegExp]",g="[object Set]",y="[object String]",v="[object Symbol]",b="[object ArrayBuffer]",_="[object DataView]",E="[object Float32Array]",S="[object Float64Array]",C="[object Int8Array]",P="[object Int16Array]",w="[object Int32Array]",O="[object Uint8Array]",T="[object Uint8ClampedArray]",F="[object Uint16Array]",I="[object Uint32Array]";e.exports=r},function(e,t,n){function r(e){return"function"!=typeof e.constructor||s(e)?{}:o(i(e))}var o=n(227),i=n(68),s=n(33);e.exports=r},function(e,t,n){function r(e){return s(e)||i(e)||!!(a&&e&&e[a])}var o=n(22),i=n(49),s=n(2),a=o?o.isConcatSpreadable:void 0;e.exports=r},function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},function(e,t,n){function r(e){return!!i&&i in e}var o=n(266),i=function(){var e=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=r},function(e,t){function n(){this.__data__=[],this.size=0}e.exports=n},function(e,t,n){function r(e){var t=this.__data__,n=o(t,e);return!(n<0||(n==t.length-1?t.pop():s.call(t,n,1),--this.size,0))}var o=n(41),i=Array.prototype,s=i.splice;e.exports=r},function(e,t,n){function r(e){var t=this.__data__,n=o(t,e);return n<0?void 0:t[n][1]}var o=n(41);e.exports=r},function(e,t,n){function r(e){return o(this.__data__,e)>-1}var o=n(41);e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__,r=o(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var o=n(41);e.exports=r},function(e,t,n){function r(){this.size=0,this.__data__={hash:new o,map:new(s||i),string:new o}}var o=n(217),i=n(40),s=n(59);e.exports=r},function(e,t,n){function r(e){var t=o(this,e).delete(e);return this.size-=t?1:0,t}var o=n(44);e.exports=r},function(e,t,n){function r(e){return o(this,e).get(e)}var o=n(44);e.exports=r},function(e,t,n){function r(e){return o(this,e).has(e)}var o=n(44);e.exports=r},function(e,t,n){function r(e,t){var n=o(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var o=n(44);e.exports=r},function(e,t,n){function r(e){var t=o(e,function(e){return n.size===i&&n.clear(),e}),n=t.cache;return t}var o=n(333),i=500;e.exports=r},function(e,t,n){var r=n(132),o=r(Object.keys,Object);e.exports=o},function(e,t){function n(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}e.exports=n},function(e,t,n){(function(e){var r=n(125),o="object"==typeof t&&t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===o,a=s&&r.process,l=function(){try{return a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=l}).call(t,n(52)(e))},function(e,t){function n(e){return o.call(e)}var r=Object.prototype,o=r.toString;e.exports=n},function(e,t,n){function r(e,t){return t.length<2?e:o(e,i(t,0,-1))}var o=n(42),i=n(32);e.exports=r},function(e,t){function n(e){return this.__data__.set(e,r),this}var r="__lodash_hash_undefined__";e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}e.exports=n},function(e,t){function n(e){var t=0,n=0;return function(){var s=i(),a=o-(s-n);if(n=s,a>0){if(++t>=r)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var r=800,o=16,i=Date.now;e.exports=n},function(e,t,n){function r(){this.__data__=new o,this.size=0}var o=n(40);e.exports=r},function(e,t){function n(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}e.exports=n},function(e,t){function n(e){return this.__data__.get(e)}e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t,n){function r(e,t){var n=this.__data__;if(n instanceof o){var r=n.__data__;if(!i||r.length<a-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new s(r)}return n.set(e,t),this.size=n.size,this}var o=n(40),i=n(59),s=n(60),a=200;e.exports=r},function(e,t){function n(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}e.exports=n},function(e,t,n){var r=n(18),o=n(121),i=n(76),s=o(function(e,t,n,o){r(t,i(t),e,o)});e.exports=s},function(e,t){function n(e){return function(){return e}}e.exports=n},function(e,t,n){var r=n(102),o=n(316),i=n(23),s=n(271),a=i(function(e){return e.push(void 0,s),r(o,void 0,e)});e.exports=a},function(e,t,n){var r=n(110),o=n(65),i=n(23),s=n(73),a=i(function(e,t){return s(e)?r(e,o(t,1,s,!0)):[]});e.exports=a},function(e,t,n){function r(e,t,n){var r=null==e?0:e.length;return r?(t=n||void 0===t?1:i(t),o(e,t<0?0:t,r)):[]}var o=n(32),i=n(36);e.exports=r},function(e,t,n){function r(e,t,n){var r=null==e?0:e.length;return r?(t=n||void 0===t?1:i(t),t=r-t,o(e,0,t<0?0:t)):[]}var o=n(32),i=n(36);e.exports=r},function(e,t,n){function r(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var l=null==n?0:s(n);return l<0&&(l=a(r+l,0)),o(e,i(t,3),l)}var o=n(111),i=n(31),s=n(36),a=Math.max;e.exports=r},function(e,t,n){function r(e){return(null==e?0:e.length)?o(e,1):[]}var o=n(65);e.exports=r},function(e,t,n){function r(e,t){return e&&o(e,i(t))}var o=n(112),i=n(119);e.exports=r},function(e,t,n){function r(e,t,n,r){e=i(e)?e:l(e),n=n&&!r?a(n):0;var p=e.length;return n<0&&(n=u(p+n,0)),s(e)?n<=p&&e.indexOf(t,n)>-1:!!p&&o(e,t,n)>-1}var o=n(114),i=n(10),s=n(330),a=n(36),l=n(345),u=Math.max;e.exports=r},function(e,t,n){function r(e){return(null==e?0:e.length)?o(e,0,-1):[]}var o=n(32);e.exports=r},function(e,t,n){var r=n(8),o=n(231),i=n(23),s=n(254),a=i(function(e){var t=r(e,s);return t.length&&t[0]===e[0]?o(t):[]});e.exports=a},function(e,t,n){function r(e){if(null==e)return!0;if(l(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||u(e)||c(e)||s(e)))return!e.length;var t=i(e);if(t==d||t==f)return!e.size;if(p(e))return!o(e).length;for(var n in e)if(m.call(e,n))return!1;return!0}var o=n(116),i=n(45),s=n(49),a=n(2),l=n(10),u=n(50),p=n(33),c=n(75),d="[object Map]",f="[object Set]",h=Object.prototype,m=h.hasOwnProperty;e.exports=r},function(e,t){function n(e){return null===e}e.exports=n},function(e,t,n){function r(e){return"string"==typeof e||!i(e)&&s(e)&&o(e)==a}var o=n(17),i=n(2),s=n(14),a="[object String]";e.exports=r},function(e,t){function n(e){return void 0===e}e.exports=n},function(e,t){function n(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}e.exports=n},function(e,t,n){function r(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(i);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var s=e.apply(this,r);return n.cache=i.set(o,s)||i,s};return n.cache=new(r.Cache||o),n}var o=n(60),i="Expected a function";r.Cache=o,e.exports=r},function(e,t,n){var r=n(8),o=n(226),i=n(251),s=n(24),a=n(18),l=n(272),u=n(124),p=n(127),c=u(function(e,t){var n={};if(null==e)return n;var u=!1;t=r(t,function(t){return t=s(t,e),u||(u=t.length>1),t}),a(e,p(e),n),u&&(n=o(n,7,l));for(var c=t.length;c--;)i(n,t[c]);return n});e.exports=c},function(e,t,n){function r(e,t,n,r){return null==e?[]:(i(t)||(t=null==t?[]:[t]),n=r?void 0:n,i(n)||(n=null==n?[]:[n]),o(e,t,n))}var o=n(118),i=n(2);e.exports=r},function(e,t,n){var r=n(241),o=n(124),i=o(function(e,t){return null==e?{}:r(e,t)});e.exports=i},function(e,t,n){var r=n(65),o=n(118),i=n(23),s=n(129),a=i(function(e,t){if(null==e)return[];var n=t.length;return n>1&&s(e,t[0],t[1])?t=[]:n>2&&s(t[0],t[1],t[2])&&(t=[t[0]]),o(e,r(t,1),[])});e.exports=a},function(e,t){function n(){return!1}e.exports=n},function(e,t,n){function r(e,t,n){return e&&e.length?(t=n||void 0===t?1:i(t),o(e,0,t<0?0:t)):[]}var o=n(32),i=n(36);e.exports=r},function(e,t,n){function r(e){return e?(e=o(e))===i||e===-i?(e<0?-1:1)*s:e===e?e:0:0===e?e:0}var o=n(341),i=1/0,s=1.7976931348623157e308;e.exports=r},function(e,t,n){function r(e){if("number"==typeof e)return e;if(i(e))return s;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var n=u.test(e);return n||p.test(e)?c(e.slice(2),n?2:8):l.test(e)?s:+e}var o=n(11),i=n(25),s=NaN,a=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,p=/^0o[0-7]+$/i,c=parseInt;e.exports=r},function(e,t,n){var r=n(270),o=n(13),i=r(o);e.exports=i},function(e,t,n){function r(e){return s(e)?o(e,u):a(e)?[e]:i(l(p(e)))}var o=n(8),i=n(120),s=n(2),a=n(25),l=n(136),u=n(20),p=n(77);e.exports=r},function(e,t,n){function r(e){var t=++i;return o(e)+t}var o=n(77),i=0;e.exports=r},function(e,t,n){function r(e){return null==e?[]:o(e,i(e))}var o=n(252),i=n(13);e.exports=r},function(e,t,n){function r(e,t){return i(e||[],t||[],o)}var o=n(30),i=n(253);e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(343),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(e,t){if(!e)return e;var n=(0,o.default)(t),r=n.length;if(r){for(var i=e,s=0;s<r&&i;++s)i=i[n[s]];return i}};t.default=i},function(e,t){e.exports=Breadcrumb},function(e,t){e.exports=BreadcrumbsActions},function(e,t){e.exports=FieldHolder},function(e,t){e.exports=FileSchemaModalHandler},function(e,t){e.exports=Focusedzone},function(e,t){e.exports=FormAlert},function(e,t){e.exports=ReactAddonsCssTransitionGroup},function(e,t){e.exports=ReactBootstrap},function(e,t){e.exports=ReactRouteRegister},function(e,t){e.exports=ReactRouter},function(e,t){e.exports=Toolbar},function(e,t){e.exports=TreeDropdownField},function(e,t){e.exports=UnsavedFormsActions},function(e,t){e.exports=qs},function(e,t){e.exports=reduxFieldReducer},function(e,t){e.exports=schemaFieldValues}]);