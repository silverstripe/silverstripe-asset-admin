{"version":3,"sources":["bundle.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","_interopRequireDefault","obj","__esModule","default","_jQuery","_jQuery2","_react","_react2","_reactDom","_reactDom2","_reactRedux","_configureStore","_configureStore2","_AssetAdmin","_AssetAdmin2","_Backend","_Backend2","entwine","onadd","store","filesByParentApi","createEndpointFetcher","method","responseFormat","url","this","data","deleteApi","payloadFormat","addFolderApi","updateApi","limit","bulkActions","name","section","render","createElement","Provider","sectionConfigKey","onremove","unmountComponentAtNode","containers/AssetAdmin/AssetAdmin","jQuery","lib/Backend","react","react-dom","react-redux","state/configureStore",2,"_defaults","defaults","keys","Object","getOwnPropertyNames","key","value","getOwnPropertyDescriptor","configurable","undefined","defineProperty","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","prototype","create","constructor","enumerable","writable","setPrototypeOf","_extends","assign","target","arguments","source","hasOwnProperty","_SilverStripeComponent","_SilverStripeComponent2","_i18n","_i18n2","_dropzone","_dropzone2","AssetDropzone","_SilverStripeComponen","props","_this","dropzone","dragging","componentDidMount","defaultOptions","getDefaultOptions","uploadButton","clickable","findDOMNode","find","options","promptOnRemove","setPromptOnRemove","componentWillUnmount","disable","className","buttonProps","type","canUpload","disabled","push","join","_t","children","autoProcessQueue","addedfile","handleAddedFile","bind","dragenter","handleDragEnter","dragleave","handleDragLeave","drop","handleDrop","uploadprogress","handleUploadProgress","dictDefaultMessage","dictFallbackMessage","dictFallbackText","dictInvalidFileType","dictResponseError","dictCancelUpload","dictCancelUploadConfirmation","dictRemoveFile","dictMaxFilesExceeded","error","handleError","sending","handleSending","success","handleSuccess","thumbnailHeight","thumbnailWidth","getFileCategory","fileType","split","event","forceUpdate","componentNode","file","progress","bytesSent","xhr","formData","append","securityID","folderId","_this2","reader","FileReader","queuedAtTime","Date","now","onload","thumbnailURL","img","document","canvas","ctx","getContext","src","result","width","height","drawImage","toDataURL","attributes","dimensions","category","filename","size","title","processFile","_queuedAtTime","readAsDataURL","errorMessage","userPrompt","dictRemoveFileConfirmation","propTypes","PropTypes","number","isRequired","func","shape","string","bool","defaultProps","i18n","lib/SilverStripeComponent",3,"_interopRequireWildcard","newObj","mapStateToProps","state","gallery","assetAdmin","mapDispatchToProps","dispatch","actions","_redux","bindActionCreators","galleryActions","BulkActions","_reactAddonsTestUtils","_reactAddonsTestUtils2","_GalleryActions","onChangeValue","$select","chosen","allow_single_deselect","disable_search_threshold","change","Simulate","click","map","option","onClick","label","getSelectedFiles","getOptionByValue","selectedFiles","applyAction","deleteAction","destructive","confirm","sprintf","val","trigger","connect","react-addons-test-utils","redux","state/gallery/GalleryActions",4,"_index","_index2","GalleryItem","handleToggleSelect","handleDelete","handleActivate","handleKeyDown","handleCancelUpload","preventFocus","stopPropagation","item","preventDefault","getThumbnailStyles","backgroundImage","hasError","Array","isArray","messages","filter","message","getErrorMessage","getThumbnailClassNames","thumbnailClassNames","isImageSmallerThanThumbnail","getItemClassNames","itemClassNames","selected","highlighted","THUMBNAIL_HEIGHT","THUMBNAIL_WIDTH","spaceKey","keyCode","returnKey","handleRemoveErroredUpload","getProgressBar","progressBar","progressBarProps","style","uploading","actionInputCheckbox","tabIndex","onMouseDown","data-dz-remove","data-id","id","onKeyDown","ref","object","array","constants/index",5,"CSS_TRANSITION_TIME","BULK_ACTIONS","BULK_ACTIONS_PLACEHOLDER",6,"_state$assetAdmin$gal","files","fileId","next","parseInt","editor","editorActions","_Gallery","_Gallery2","_Editor","_Editor2","_EditorActions","_Config","_Config2","AssetAdmin","_didHandleUrl","handleOpenFile","handleCloseFile","handleFileSave","handleURL","getConfig","getSection","captureRoute","route","window","ss","router","resolveURLToBase","assetsRoute","exit","applies","routeAppliesToCurrentLocation","componentWillReceiveProps","nextProps","refreshURL","desiredURL","replace","current","show","context","params","folderAction","setFolder","defaultRoute","assetsRouteHome","setFile","updates","updateFile","onClose","onFileSave","onOpenFile","config","forms","editForm","schemaUrl","containers/Editor/Editor","containers/Gallery/Gallery","lib/Config","state/editor/EditorActions",7,"_defineProperty","formState","_TextField","_TextField2","_FormAction","_FormAction2","Editor","_Component","handleFieldUpdate","isSaving","editorFields","updateFormState","setState","reduce","prev","curr","then","_this3","headerExtraParts","headerExtraPartsStr","preview","href","alt","aria-label","role","data-toggle","field","leftTitle","onChange","htmlFor","readOnly","bootstrapButtonStyle","icon","handleClick","onFilePublish","loading","data-container","data-placement","data-content","created","lastUpdated","scope","Component","basename","components/FormAction/FormAction","components/TextField/TextField",8,"getComparator","direction","b","fieldA","toLowerCase","fieldB","count","loadedfolderId","parentfolderId","highlightedFiles","page","canEdit","canDelete","queuedFiles","queuedFilesActions","Gallery","_reactAddonsCssTransitionGroup","_reactAddonsCssTransitionGroup2","_AssetDropzone","_AssetDropzone2","_GalleryItem","_GalleryItem2","_BulkActions","_BulkActions2","_QueuedFilesActions","sort","sorters","handleFolderActivate","handleFileActivate","handleItemDelete","handleBackClick","handleMoreClick","handleSort","handleSuccessfulUpload","handleFailedUpload","handleAddFolder","refreshFolderIfNeeded","componentWillUpdate","off","componentDidUpdate","on","checkLoadingIndicator","getNoItemsNotice","items","getBackButton","classes","getBulkActionsComponent","ids","deleteItems","getMoreButton","$sectionWrapper","hasClass","addClass","removeClass","isNaN","loadFolderContents","dataset","purgeUploadQueue","sortFiles","fileData","abort","removeQueuedFile","addQueuedFile","updateQueuedFile","folderName","prompt","addFolder","json","JSON","parse","response","addFiles","failUpload","itemIsSelected","indexOf","itemIsHighlighted","folder","selectFiles","deselectFiles","dropzoneOptions","paramName","transitionName","transitionEnterTimeout","transitionLeaveTimeout","sorter","data-field","data-direction","component","components/AssetDropzone/AssetDropzone","components/BulkActions/BulkActions","components/GalleryItem/GalleryItem","react-addons-css-transition-group","state/queuedFiles/QueuedFilesActions",9,"configureStore","initialState","createStoreWithMiddleware","_reducer2","_reduxThunk","_reduxThunk2","_reduxLogger","_reduxLogger2","_reducer","applyMiddleware","createStore","./reducer","redux-logger","redux-thunk",10,11,"_EditorActionTypes2","UPDATE_FORM_STATE","payload","_EditorActionTypes","./EditorActionTypes",12,"editorReducer","action","_deepFreezeStrict2","_deepFreezeStrict","deep-freeze-strict",13,14,"_GalleryActionTypes2","SET_FOLDER","SET_FILE","HIGHLIGHT_FILES","ADD_FILES","DELETE_ITEM_REQUEST","DELETE_ITEM_SUCCESS","DELETE_ITEM_FAILURE","LOAD_FOLDER_REQUEST","viewingFolder","LOAD_FOLDER_SUCCESS","parent","UPDATE_FILE_REQUEST","UPDATE_FILE_SUCCESS","SELECT_FILES","DESELECT_FILES","highlightFiles","comparator","SORT_FILES","ADD_FOLDER_REQUEST","ADD_FOLDER_SUCCESS","folderID","err","ADD_FOLDER_FAILURE","setFolderPermissions","folderPermissions","SET_FOLDER_PERMISSIONS","_GalleryActionTypes","./GalleryActionTypes",15,"galleryReducer","nextState","_ret","nextFilesState","forEach","payloadFile","fileInState","stateFile","v","concat","_typeof","REMOVE_FILES","_ret2","fileIndex","updatedFile","folders","Symbol","iterator","placeholder","focus","path",16,"ADD_QUEUED_FILE","FAIL_UPLOAD","PURGE_UPLOAD_QUEUE","REMOVE_QUEUED_FILE","SUCCEED_UPLOAD","UPDATE_QUEUED_FILE",17,"_QueuedFilesActionTypes2","succeedUpload","_QueuedFilesActionTypes","./QueuedFilesActionTypes",18,"fileFactory","extension","owner","queuedFilesReducer","extraClass",19,"_GalleryReducer","_GalleryReducer2","_QueuedFilesReducer","_QueuedFilesReducer2","_EditorReducer","_EditorReducer2","rootReducer","combineReducers","./editor/EditorReducer","./gallery/GalleryReducer","./queuedFiles/QueuedFilesReducer",20,"Dropzone","Emitter","camelize","contentLoaded","detectVerticalSquash","drawImageIOSFix","noop","without","__slice","slice","__hasProp","__extends","child","ctor","__super__","addEventListener","fn","_callbacks","emit","args","callback","callbacks","_i","_len","apply","removeListener","removeAllListeners","removeEventListener","splice","_super","element","elementOptions","fallback","_ref","version","previewTemplate","clickableElements","listeners","querySelector","nodeType","instances","optionsForElement","extend","forceFallback","isBrowserSupported","getAttribute","acceptedFiles","acceptedMimeTypes","toUpperCase","getExistingFallback","parentNode","removeChild","previewsContainer","getElement","getElements","init","resolveOption","events","withCredentials","parallelUploads","uploadMultiple","maxFilesize","createImageThumbnails","maxThumbnailFilesize","filesizeBase","maxFiles","ignoreHiddenFiles","autoQueue","addRemoveLinks","hiddenInputContainer","capture","renameFilename","dictFileTooBig","accept","done","messageElement","span","getElementsByTagName","test","appendChild","textContent","innerText","getFallbackForm","resize","info","srcRatio","trgRatio","srcX","srcY","srcWidth","srcHeight","optWidth","optHeight","trgHeight","trgWidth","classList","remove","dragstart","dragend","add","dragover","paste","reset","node","removeFileEvent","removeLink","_j","_k","_len1","_len2","_ref1","_ref2","_results","previewElement","trim","querySelectorAll","_renameFilename","innerHTML","filesize","_removeLink","status","UPLOADING","removeFile","removedfile","_updateMaxFilesReachedClass","thumbnail","dataUrl","thumbnailElement","setTimeout","errormultiple","processing","processingmultiple","nodeName","totaluploadprogress","sendingmultiple","successmultiple","canceled","canceledmultiple","complete","completemultiple","maxfilesexceeded","maxfilesreached","queuecomplete","addedfiles","objects","getAcceptedFiles","accepted","getRejectedFiles","getFilesWithStatus","getQueuedFiles","QUEUED","getUploadingFiles","getAddedFiles","ADDED","getActiveFiles","eventName","noPropagation","setupHiddenFileInput","tagName","setAttribute","contains","hiddenFileInput","visibility","position","top","left","addFile","URL","webkitURL","updateTotalUploadProgress","returnValue","efct","dataTransfer","effectAllowed","_error","dropEffect","clickableElement","evt","elementInside","enable","destroy","removeAllFiles","activeFiles","totalBytes","totalBytesSent","totalUploadProgress","upload","total","_getParamName","existingFallback","fields","fieldsString","form","getFallback","elements","el","setupEventListeners","elementListeners","listener","_results1","removeEventListeners","cancelUpload","cutoff","selectedSize","selectedUnit","unit","units","Math","pow","round","webkitGetAsEntry","_addFilesFromItems","handleFiles","clipboardData","entry","isFile","getAsFile","isDirectory","_addFilesFromDirectory","kind","directory","dirReader","errorHandler","readEntries","createReader","console","log","entries","substring","fullPath","isValidFile","_enqueueThumbnail","_errorProcessing","enqueueFile","enqueueFiles","processQueue","_thumbnailQueue","_processingThumbnail","match","_processThumbnailQueue","createThumbnail","shift","cancelIfNecessary","fileReader","createThumbnailFromUrl","imageUrl","crossOrigin","resizeInfo","_ref3","trgX","trgY","onerror","processingLength","processFiles","uploadFiles","_getFilesWithXhr","groupedFile","groupedFiles","CANCELED","uploadFile","headerName","headerValue","headers","input","inputName","inputType","progressObj","updateProgress","_l","_len3","_m","_ref4","_ref5","XMLHttpRequest","open","allFilesFinished","loaded","readyState","responseText","getResponseHeader","_finished","onprogress","Accept","Cache-Control","X-Requested-With","setRequestHeader","FormData","hasAttribute","checked","submitRequest","send","SUCCESS","ERROR","forElement","autoDiscover","discover","checkElements","dropzones","blacklistedBrowsers","capableBrowser","regex","File","FileList","Blob","navigator","userAgent","list","rejectedItem","str","charAt","div","childNodes","container","els","question","rejected","baseMimeType","mimeType","validType","each","ACCEPTED","PROCESSING","alpha","ey","ih","iw","py","ratio","sy","naturalWidth","naturalHeight","getImageData","sx","sw","sh","dx","dy","dw","dh","vertSquashRatio","win","doc","poll","pre","rem","root","documentElement","doScroll","createEventObject","frameElement","_autoDiscoverFunction",21,"createLogger","printBuffer","logBuffer","logEntry","started","startedTime","prevState","took","nextEntry","formattedAction","actionTransformer","isCollapsed","collapsed","formattedTime","formatTime","titleCSS","colors","timestamp","duration","toFixed","logger","groupCollapsed","group","level","groupEnd","_options$level","_options$logger","_options$logErrors","logErrors","predicate","_options$duration","_options$timestamp","transformer","_options$stateTransfo","stateTransformer","_options$actionTransf","actn","_options$errorTransfo","errorTransformer","_options$colors","getState","timer","returnedValue","repeat","times","pad","num","maxLength","toString","time","getHours","getMinutes","getSeconds","getMilliseconds","performance"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _jQuery = require('jQuery');\n\nvar _jQuery2 = _interopRequireDefault(_jQuery);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _reactRedux = require('react-redux');\n\nvar _configureStore = require('state/configureStore');\n\nvar _configureStore2 = _interopRequireDefault(_configureStore);\n\nvar _AssetAdmin = require('containers/AssetAdmin/AssetAdmin');\n\nvar _AssetAdmin2 = _interopRequireDefault(_AssetAdmin);\n\nvar _Backend = require('lib/Backend');\n\nvar _Backend2 = _interopRequireDefault(_Backend);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_jQuery2.default.entwine('ss', function () {\n  (0, _jQuery2.default)('.asset-gallery-component-wrapper').entwine({\n    onadd: function onadd() {\n      var store = (0, _configureStore2.default)();\n\n      var filesByParentApi = _Backend2.default.createEndpointFetcher({\n        method: 'get',\n        responseFormat: 'json',\n        url: this.data('asset-gallery-files-by-parent-url')\n      });\n\n      var deleteApi = _Backend2.default.createEndpointFetcher({\n        method: 'delete',\n        payloadFormat: 'urlencoded',\n        url: this.data('asset-gallery-delete-url')\n      });\n\n      var addFolderApi = _Backend2.default.createEndpointFetcher({\n        method: 'post',\n        payloadFormat: 'urlencoded',\n        url: this.data('asset-gallery-add-folder-url')\n      });\n\n      var updateApi = _Backend2.default.createEndpointFetcher({\n        method: 'put',\n        payloadFormat: 'urlencoded',\n        url: this.data('asset-gallery-update-url')\n      });\n\n      var limit = this.data('asset-gallery-limit');\n      var bulkActions = this.data('asset-gallery-bulk-actions');\n\n      var name = (0, _jQuery2.default)('.asset-gallery').data('asset-gallery-name');\n      var section = 'SilverStripe\\\\AssetAdmin\\\\Controller\\\\AssetAdmin';\n\n      _reactDom2.default.render(_react2.default.createElement(\n        _reactRedux.Provider,\n        { store: store },\n        _react2.default.createElement(_AssetAdmin2.default, {\n          name: name,\n          limit: limit,\n          bulkActions: !!bulkActions,\n\n          filesByParentApi: filesByParentApi,\n          addFolderApi: addFolderApi,\n          deleteApi: deleteApi,\n          updateApi: updateApi,\n          sectionConfigKey: section\n        })\n      ), this[0]);\n    },\n    onremove: function onremove() {\n      _reactDom2.default.unmountComponentAtNode(this[0]);\n    }\n  });\n});\n\n},{\"containers/AssetAdmin/AssetAdmin\":6,\"jQuery\":\"jQuery\",\"lib/Backend\":\"lib/Backend\",\"react\":\"react\",\"react-dom\":\"react-dom\",\"react-redux\":\"react-redux\",\"state/configureStore\":9}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _SilverStripeComponent = require('lib/SilverStripeComponent');\n\nvar _SilverStripeComponent2 = _interopRequireDefault(_SilverStripeComponent);\n\nvar _i18n = require('i18n');\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\nvar _dropzone = require('dropzone');\n\nvar _dropzone2 = _interopRequireDefault(_dropzone);\n\nvar _jQuery = require('jQuery');\n\nvar _jQuery2 = _interopRequireDefault(_jQuery);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }\n\nvar AssetDropzone = function (_SilverStripeComponen) {\n  _inherits(AssetDropzone, _SilverStripeComponen);\n\n  function AssetDropzone(props) {\n    _classCallCheck(this, AssetDropzone);\n\n    var _this = _possibleConstructorReturn(this, _SilverStripeComponen.call(this, props));\n\n    _this.dropzone = null;\n    _this.dragging = false;\n    return _this;\n  }\n\n  AssetDropzone.prototype.componentDidMount = function componentDidMount() {\n    _SilverStripeComponen.prototype.componentDidMount.call(this);\n\n    var defaultOptions = this.getDefaultOptions();\n\n    if (this.props.uploadButton === true) {\n      defaultOptions.clickable = (0, _jQuery2.default)(_reactDom2.default.findDOMNode(this)).find('.asset-dropzone__upload-button')[0];\n    }\n\n    this.dropzone = new _dropzone2.default(_reactDom2.default.findDOMNode(this), _extends({}, defaultOptions, this.props.options));\n\n    if (typeof this.props.promptOnRemove !== 'undefined') {\n      this.setPromptOnRemove(this.props.promptOnRemove);\n    }\n  };\n\n  AssetDropzone.prototype.componentWillUnmount = function componentWillUnmount() {\n    _SilverStripeComponen.prototype.componentWillUnmount.call(this);\n\n    this.dropzone.disable();\n  };\n\n  AssetDropzone.prototype.render = function render() {\n    var className = ['asset-dropzone'];\n\n    var buttonProps = {\n      className: 'asset-dropzone__upload-button ss-ui-button font-icon-upload',\n      type: 'button'\n    };\n\n    if (!this.props.canUpload) {\n      buttonProps.disabled = true;\n    }\n\n    if (this.dragging === true) {\n      className.push('dragging');\n    }\n\n    return _react2.default.createElement(\n      'div',\n      { className: className.join(' ') },\n      this.props.uploadButton && _react2.default.createElement(\n        'button',\n        buttonProps,\n        _i18n2.default._t('AssetGalleryField.DROPZONE_UPLOAD')\n      ),\n      this.props.children\n    );\n  };\n\n  AssetDropzone.prototype.getDefaultOptions = function getDefaultOptions() {\n    return {\n      autoProcessQueue: false,\n\n      addedfile: this.handleAddedFile.bind(this),\n\n      dragenter: this.handleDragEnter.bind(this),\n\n      dragleave: this.handleDragLeave.bind(this),\n\n      drop: this.handleDrop.bind(this),\n\n      uploadprogress: this.handleUploadProgress.bind(this),\n\n      dictDefaultMessage: _i18n2.default._t('AssetGalleryField.DROPZONE_DEFAULT_MESSAGE'),\n\n      dictFallbackMessage: _i18n2.default._t('AssetGalleryField.DROPZONE_FALLBACK_MESSAGE'),\n\n      dictFallbackText: _i18n2.default._t('AssetGalleryField.DROPZONE_FALLBACK_TEXT'),\n\n      dictInvalidFileType: _i18n2.default._t('AssetGalleryField.DROPZONE_INVALID_FILE_TYPE'),\n\n      dictResponseError: _i18n2.default._t('AssetGalleryField.DROPZONE_RESPONSE_ERROR'),\n\n      dictCancelUpload: _i18n2.default._t('AssetGalleryField.DROPZONE_CANCEL_UPLOAD'),\n\n      dictCancelUploadConfirmation: _i18n2.default._t('AssetGalleryField.DROPZONE_CANCEL_UPLOAD_CONFIRMATION'),\n\n      dictRemoveFile: _i18n2.default._t('AssetGalleryField.DROPZONE_REMOVE_FILE'),\n\n      dictMaxFilesExceeded: _i18n2.default._t('AssetGalleryField.DROPZONE_MAX_FILES_EXCEEDED'),\n\n      error: this.handleError.bind(this),\n\n      sending: this.handleSending.bind(this),\n\n      success: this.handleSuccess.bind(this),\n\n      thumbnailHeight: 150,\n\n      thumbnailWidth: 200\n    };\n  };\n\n  AssetDropzone.prototype.getFileCategory = function getFileCategory(fileType) {\n    return fileType.split('/')[0];\n  };\n\n  AssetDropzone.prototype.handleDragEnter = function handleDragEnter(event) {\n    if (!this.props.canUpload) {\n      return;\n    }\n\n    this.dragging = true;\n    this.forceUpdate();\n\n    if (typeof this.props.handleDragEnter === 'function') {\n      this.props.handleDragEnter(event);\n    }\n  };\n\n  AssetDropzone.prototype.handleDragLeave = function handleDragLeave(event) {\n    var componentNode = _reactDom2.default.findDOMNode(this);\n\n    if (!this.props.canUpload) {\n      return;\n    }\n\n    if (event.target !== componentNode) {\n      return;\n    }\n\n    this.dragging = false;\n    this.forceUpdate();\n\n    if (typeof this.props.handleDragLeave === 'function') {\n      this.props.handleDragLeave(event, componentNode);\n    }\n  };\n\n  AssetDropzone.prototype.handleUploadProgress = function handleUploadProgress(file, progress, bytesSent) {\n    if (typeof this.props.handleUploadProgress === 'function') {\n      this.props.handleUploadProgress(file, progress, bytesSent);\n    }\n  };\n\n  AssetDropzone.prototype.handleDrop = function handleDrop(event) {\n    this.dragging = false;\n    this.forceUpdate();\n\n    if (typeof this.props.handleDrop === 'function') {\n      this.props.handleDrop(event);\n    }\n  };\n\n  AssetDropzone.prototype.handleSending = function handleSending(file, xhr, formData) {\n    formData.append('SecurityID', this.props.securityID);\n    formData.append('folderId', this.props.folderId);\n\n    if (typeof this.props.handleSending === 'function') {\n      this.props.handleSending(file, xhr, formData);\n    }\n  };\n\n  AssetDropzone.prototype.handleAddedFile = function handleAddedFile(file) {\n    var _this2 = this;\n\n    if (!this.props.canUpload) {\n      return;\n    }\n\n    var reader = new FileReader();\n\n    var queuedAtTime = Date.now();\n\n    reader.onload = function (event) {\n\n      var thumbnailURL = '';\n\n      if (_this2.getFileCategory(file.type) === 'image') {\n        var img = document.createElement('img');\n        var canvas = document.createElement('canvas');\n        var ctx = canvas.getContext('2d');\n\n        img.src = event.target.result;\n\n        canvas.width = _this2.dropzone.options.thumbnailWidth;\n        canvas.height = _this2.dropzone.options.thumbnailHeight;\n\n        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n\n        thumbnailURL = canvas.toDataURL();\n      }\n\n      _this2.props.handleAddedFile({\n        attributes: {\n          dimensions: {\n            height: _this2.dropzone.options.thumbnailHeight,\n            width: _this2.dropzone.options.thumbnailWidth\n          }\n        },\n        category: _this2.getFileCategory(file.type),\n        filename: file.name,\n        queuedAtTime: queuedAtTime,\n        size: file.size,\n        title: file.name,\n        type: file.type,\n        url: thumbnailURL\n      });\n\n      _this2.dropzone.processFile(file);\n    };\n\n    file._queuedAtTime = queuedAtTime;\n\n    reader.readAsDataURL(file);\n  };\n\n  AssetDropzone.prototype.handleError = function handleError(file, errorMessage) {\n    if (typeof this.props.handleSending === 'function') {\n      this.props.handleError(file, errorMessage);\n    }\n  };\n\n  AssetDropzone.prototype.handleSuccess = function handleSuccess(file) {\n    this.props.handleSuccess(file);\n  };\n\n  AssetDropzone.prototype.setPromptOnRemove = function setPromptOnRemove(userPrompt) {\n    this.dropzone.options.dictRemoveFileConfirmation = userPrompt;\n  };\n\n  return AssetDropzone;\n}(_SilverStripeComponent2.default);\n\nAssetDropzone.propTypes = {\n  folderId: _react2.default.PropTypes.number.isRequired,\n  handleAddedFile: _react2.default.PropTypes.func.isRequired,\n  handleDragEnter: _react2.default.PropTypes.func,\n  handleDragLeave: _react2.default.PropTypes.func,\n  handleDrop: _react2.default.PropTypes.func,\n  handleError: _react2.default.PropTypes.func.isRequired,\n  handleSending: _react2.default.PropTypes.func,\n  handleSuccess: _react2.default.PropTypes.func.isRequired,\n  options: _react2.default.PropTypes.shape({\n    url: _react2.default.PropTypes.string.isRequired\n  }),\n  promptOnRemove: _react2.default.PropTypes.string,\n  securityID: _react2.default.PropTypes.string.isRequired,\n  uploadButton: _react2.default.PropTypes.bool,\n  canUpload: _react2.default.PropTypes.bool.isRequired\n};\n\nAssetDropzone.defaultProps = {\n  uploadButton: true\n};\n\nexports.default = AssetDropzone;\n\n},{\"dropzone\":20,\"i18n\":\"i18n\",\"jQuery\":\"jQuery\",\"lib/SilverStripeComponent\":\"lib/SilverStripeComponent\",\"react\":\"react\",\"react-dom\":\"react-dom\"}],3:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BulkActions = undefined;\n\nvar _jQuery = require('jQuery');\n\nvar _jQuery2 = _interopRequireDefault(_jQuery);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _SilverStripeComponent = require('lib/SilverStripeComponent');\n\nvar _SilverStripeComponent2 = _interopRequireDefault(_SilverStripeComponent);\n\nvar _reactAddonsTestUtils = require('react-addons-test-utils');\n\nvar _reactAddonsTestUtils2 = _interopRequireDefault(_reactAddonsTestUtils);\n\nvar _reactRedux = require('react-redux');\n\nvar _redux = require('redux');\n\nvar _GalleryActions = require('state/gallery/GalleryActions');\n\nvar galleryActions = _interopRequireWildcard(_GalleryActions);\n\nvar _i18n = require('i18n');\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }\n\nvar BulkActions = exports.BulkActions = function (_SilverStripeComponen) {\n  _inherits(BulkActions, _SilverStripeComponen);\n\n  function BulkActions(props) {\n    _classCallCheck(this, BulkActions);\n\n    var _this = _possibleConstructorReturn(this, _SilverStripeComponen.call(this, props));\n\n    _this.onChangeValue = _this.onChangeValue.bind(_this);\n    return _this;\n  }\n\n  BulkActions.prototype.componentDidMount = function componentDidMount() {\n    var $select = (0, _jQuery2.default)(_reactDom2.default.findDOMNode(this)).find('.dropdown');\n\n    $select.chosen({\n      allow_single_deselect: true,\n      disable_search_threshold: 20\n    });\n\n    $select.change(function () {\n      return _reactAddonsTestUtils2.default.Simulate.click($select.find(':selected')[0]);\n    });\n  };\n\n  BulkActions.prototype.render = function render() {\n    var _this2 = this;\n\n    var children = this.props.gallery.bulkActions.options.map(function (option, i) {\n      return _react2.default.createElement(\n        'button',\n        {\n          type: 'button',\n          className: 'bulk-actions_action font-icon-trash ss-ui-button ui-corner-all',\n          key: i,\n          onClick: _this2.onChangeValue,\n          value: option.value\n        },\n        option.label\n      );\n    });\n\n    return _react2.default.createElement(\n      'div',\n      { className: 'bulk-actions fieldholder-small' },\n      _react2.default.createElement(\n        'div',\n        { className: 'bulk-actions-counter' },\n        this.getSelectedFiles().length\n      ),\n      children\n    );\n  };\n\n  BulkActions.prototype.getOptionByValue = function getOptionByValue(value) {\n    for (var i = 0; i < this.props.gallery.bulkActions.options.length; i += 1) {\n      if (this.props.gallery.bulkActions.options[i].value === value) {\n        return this.props.gallery.bulkActions.options[i];\n      }\n    }\n\n    return null;\n  };\n\n  BulkActions.prototype.getSelectedFiles = function getSelectedFiles() {\n    return this.props.gallery.selectedFiles;\n  };\n\n  BulkActions.prototype.applyAction = function applyAction(value) {\n    var result = false;\n\n    switch (value) {\n      case 'delete':\n        this.props.deleteAction(this.getSelectedFiles());\n        result = true;\n        break;\n      default:\n    }\n\n    return result;\n  };\n\n  BulkActions.prototype.onChangeValue = function onChangeValue(event) {\n    var option = this.getOptionByValue(event.target.value);\n\n    if (option === null) {\n      return;\n    }\n\n    if (option.destructive === true) {\n      if (confirm(_i18n2.default.sprintf(_i18n2.default._t('AssetGalleryField.BULK_ACTIONS_CONFIRM'), option.label))) {\n        this.applyAction(option.value);\n      }\n    } else {\n      this.applyAction(option.value);\n    }\n\n    (0, _jQuery2.default)(_reactDom2.default.findDOMNode(this)).find('.dropdown').val('').trigger('liszt:updated');\n  };\n\n  return BulkActions;\n}(_SilverStripeComponent2.default);\n\nfunction mapStateToProps(state) {\n  return {\n    gallery: state.assetAdmin.gallery\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: (0, _redux.bindActionCreators)(galleryActions, dispatch)\n  };\n}\n\nexports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(BulkActions);\n\n},{\"i18n\":\"i18n\",\"jQuery\":\"jQuery\",\"lib/SilverStripeComponent\":\"lib/SilverStripeComponent\",\"react\":\"react\",\"react-addons-test-utils\":\"react-addons-test-utils\",\"react-dom\":\"react-dom\",\"react-redux\":\"react-redux\",\"redux\":\"redux\",\"state/gallery/GalleryActions\":14}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _i18n = require('i18n');\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _index = require('constants/index');\n\nvar _index2 = _interopRequireDefault(_index);\n\nvar _SilverStripeComponent = require('lib/SilverStripeComponent');\n\nvar _SilverStripeComponent2 = _interopRequireDefault(_SilverStripeComponent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }\n\nvar GalleryItem = function (_SilverStripeComponen) {\n  _inherits(GalleryItem, _SilverStripeComponen);\n\n  function GalleryItem(props) {\n    _classCallCheck(this, GalleryItem);\n\n    var _this = _possibleConstructorReturn(this, _SilverStripeComponen.call(this, props));\n\n    _this.handleToggleSelect = _this.handleToggleSelect.bind(_this);\n    _this.handleDelete = _this.handleDelete.bind(_this);\n    _this.handleActivate = _this.handleActivate.bind(_this);\n    _this.handleKeyDown = _this.handleKeyDown.bind(_this);\n    _this.handleCancelUpload = _this.handleCancelUpload.bind(_this);\n    _this.preventFocus = _this.preventFocus.bind(_this);\n    return _this;\n  }\n\n  GalleryItem.prototype.handleActivate = function handleActivate(event) {\n    event.stopPropagation();\n    this.props.handleActivate(event, this.props.item);\n  };\n\n  GalleryItem.prototype.handleToggleSelect = function handleToggleSelect(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    this.props.handleToggleSelect(event, this.props.item);\n  };\n\n  GalleryItem.prototype.handleDelete = function handleDelete(event) {\n    this.props.handleDelete(event, this.props.item);\n  };\n\n  GalleryItem.prototype.getThumbnailStyles = function getThumbnailStyles() {\n    if (this.props.item.category === 'image') {\n      return {\n        backgroundImage: 'url(' + this.props.item.url + ')'\n      };\n    }\n\n    return {};\n  };\n\n  GalleryItem.prototype.hasError = function hasError() {\n    var hasError = false;\n\n    if (Array.isArray(this.props.messages)) {\n      hasError = this.props.messages.filter(function (message) {\n        return message.type === 'error';\n      }).length > 0;\n    }\n\n    return hasError;\n  };\n\n  GalleryItem.prototype.getErrorMessage = function getErrorMessage() {\n    if (this.hasError()) {\n      return _react2.default.createElement(\n        'span',\n        { className: 'gallery-item__error-message' },\n        this.props.messages[0].value\n      );\n    }\n\n    return null;\n  };\n\n  GalleryItem.prototype.getThumbnailClassNames = function getThumbnailClassNames() {\n    var thumbnailClassNames = ['gallery-item__thumbnail'];\n\n    if (this.isImageSmallerThanThumbnail()) {\n      thumbnailClassNames.push('gallery-item__thumbnail--small');\n    }\n\n    return thumbnailClassNames.join(' ');\n  };\n\n  GalleryItem.prototype.getItemClassNames = function getItemClassNames() {\n    var itemClassNames = ['gallery-item gallery-item--' + this.props.item.category];\n\n    if (this.props.selected) {\n      itemClassNames.push('gallery-item--selected');\n    }\n\n    if (this.props.highlighted) {\n      itemClassNames.push('gallery-item--highlighted');\n    }\n\n    if (this.hasError()) {\n      itemClassNames.push('gallery-item--error');\n    }\n\n    return itemClassNames.join(' ');\n  };\n\n  GalleryItem.prototype.isImageSmallerThanThumbnail = function isImageSmallerThanThumbnail() {\n    var dimensions = this.props.item.attributes.dimensions;\n\n    return dimensions.height < _index2.default.THUMBNAIL_HEIGHT && dimensions.width < _index2.default.THUMBNAIL_WIDTH;\n  };\n\n  GalleryItem.prototype.handleKeyDown = function handleKeyDown(event) {\n    event.stopPropagation();\n\n    if (this.props.spaceKey === event.keyCode) {\n      event.preventDefault();\n      this.handleToggleSelect(event);\n    }\n\n    if (this.props.returnKey === event.keyCode) {\n      this.handleActivate(event, this.props.item);\n    }\n  };\n\n  GalleryItem.prototype.preventFocus = function preventFocus(event) {\n    event.preventDefault();\n  };\n\n  GalleryItem.prototype.handleCancelUpload = function handleCancelUpload(event) {\n    event.stopPropagation();\n\n    if (this.hasError()) {\n      this.props.handleRemoveErroredUpload(this.props.item);\n    } else {\n      this.props.handleCancelUpload(this.props.item);\n    }\n  };\n\n  GalleryItem.prototype.getProgressBar = function getProgressBar() {\n    var progressBar = void 0;\n\n    var progressBarProps = {\n      className: 'gallery-item__progress-bar',\n      style: {\n        width: this.props.item.progress + '%'\n      }\n    };\n\n    if (!this.hasError() && this.props.uploading) {\n      progressBar = _react2.default.createElement(\n        'div',\n        { className: 'gallery-item__upload-progress' },\n        _react2.default.createElement('div', progressBarProps)\n      );\n    }\n\n    return progressBar;\n  };\n\n  GalleryItem.prototype.render = function render() {\n    var actionInputCheckbox = void 0;\n\n    if (this.props.uploading) {\n      actionInputCheckbox = _react2.default.createElement(\n        'label',\n        {\n          className: 'gallery-item__checkbox-label font-icon-cancel',\n          onClick: this.handleCancelUpload\n        },\n        _react2.default.createElement('input', {\n          className: 'gallery-item__checkbox',\n          type: 'checkbox',\n          title: _i18n2.default._t('AssetGalleryField.SELECT'),\n          tabIndex: '-1',\n          onMouseDown: this.preventFocus,\n          'data-dz-remove': true\n        })\n      );\n    } else {\n      actionInputCheckbox = _react2.default.createElement(\n        'label',\n        {\n          className: 'gallery-item__checkbox-label font-icon-tick',\n          onClick: this.handleToggleSelect\n        },\n        _react2.default.createElement('input', {\n          className: 'gallery-item__checkbox',\n          type: 'checkbox',\n          title: _i18n2.default._t('AssetGalleryField.SELECT'),\n          tabIndex: '-1',\n          onMouseDown: this.preventFocus\n        })\n      );\n    }\n\n    return _react2.default.createElement(\n      'div',\n      {\n        className: this.getItemClassNames(),\n        'data-id': this.props.item.id,\n        tabIndex: '0',\n        onKeyDown: this.handleKeyDown,\n        onClick: this.handleActivate\n      },\n      _react2.default.createElement(\n        'div',\n        {\n          ref: 'thumbnail',\n          className: this.getThumbnailClassNames(),\n          style: this.getThumbnailStyles()\n        },\n        _react2.default.createElement(\n          'div',\n          { className: 'gallery-item--overlay font-icon-edit' },\n          'View'\n        )\n      ),\n      this.getProgressBar(),\n      this.getErrorMessage(),\n      _react2.default.createElement(\n        'div',\n        { className: 'gallery-item__title', ref: 'title' },\n        actionInputCheckbox,\n        this.props.item.title\n      )\n    );\n  };\n\n  return GalleryItem;\n}(_SilverStripeComponent2.default);\n\nGalleryItem.propTypes = {\n  item: _react2.default.PropTypes.shape({\n    attributes: _react2.default.PropTypes.shape({\n      dimensions: _react2.default.PropTypes.object.isRequired\n    }),\n    category: _react2.default.PropTypes.string.isRequired,\n    id: _react2.default.PropTypes.number.isRequired,\n    url: _react2.default.PropTypes.string,\n    title: _react2.default.PropTypes.string.isRequired,\n    progress: _react2.default.PropTypes.number\n  }),\n\n  highlighted: _react2.default.PropTypes.bool,\n\n  selected: _react2.default.PropTypes.bool.isRequired,\n  spaceKey: _react2.default.PropTypes.number,\n  returnKey: _react2.default.PropTypes.number,\n  handleActivate: _react2.default.PropTypes.func.isRequired,\n  handleToggleSelect: _react2.default.PropTypes.func.isRequired,\n  handleDelete: _react2.default.PropTypes.func.isRequired,\n  messages: _react2.default.PropTypes.array,\n  uploading: _react2.default.PropTypes.bool\n};\n\nGalleryItem.defaultProps = {\n  returnKey: 13,\n  spaceKey: 32\n};\n\nexports.default = GalleryItem;\n\n},{\"constants/index\":5,\"i18n\":\"i18n\",\"lib/SilverStripeComponent\":\"lib/SilverStripeComponent\",\"react\":\"react\"}],5:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _i18n = require('i18n');\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  CSS_TRANSITION_TIME: 300,\n  THUMBNAIL_HEIGHT: 150,\n  THUMBNAIL_WIDTH: 200,\n  BULK_ACTIONS: [{\n    value: 'delete',\n    label: _i18n2.default._t('AssetGalleryField.BULK_ACTIONS_DELETE'),\n    destructive: true\n  }],\n  BULK_ACTIONS_PLACEHOLDER: _i18n2.default._t('AssetGalleryField.BULK_ACTIONS_PLACEHOLDER')\n};\n\n},{\"i18n\":\"i18n\"}],6:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _SilverStripeComponent = require('lib/SilverStripeComponent');\n\nvar _SilverStripeComponent2 = _interopRequireDefault(_SilverStripeComponent);\n\nvar _Gallery = require('containers/Gallery/Gallery');\n\nvar _Gallery2 = _interopRequireDefault(_Gallery);\n\nvar _Editor = require('containers/Editor/Editor');\n\nvar _Editor2 = _interopRequireDefault(_Editor);\n\nvar _GalleryActions = require('state/gallery/GalleryActions');\n\nvar galleryActions = _interopRequireWildcard(_GalleryActions);\n\nvar _EditorActions = require('state/editor/EditorActions');\n\nvar editorActions = _interopRequireWildcard(_EditorActions);\n\nvar _reactRedux = require('react-redux');\n\nvar _redux = require('redux');\n\nvar _Config = require('lib/Config');\n\nvar _Config2 = _interopRequireDefault(_Config);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }\n\nvar AssetAdmin = function (_SilverStripeComponen) {\n  _inherits(AssetAdmin, _SilverStripeComponen);\n\n  function AssetAdmin(props) {\n    _classCallCheck(this, AssetAdmin);\n\n    var _this = _possibleConstructorReturn(this, _SilverStripeComponen.call(this, props));\n\n    _this._didHandleUrl = false;\n\n    _this.handleOpenFile = _this.handleOpenFile.bind(_this);\n    _this.handleCloseFile = _this.handleCloseFile.bind(_this);\n    _this.handleFileSave = _this.handleFileSave.bind(_this);\n    _this.handleURL = _this.handleURL.bind(_this);\n    _this.getConfig = _this.getConfig.bind(_this);\n    return _this;\n  }\n\n  AssetAdmin.prototype.getConfig = function getConfig() {\n    return _Config2.default.getSection(this.props.sectionConfigKey);\n  };\n\n  AssetAdmin.prototype.componentDidMount = function componentDidMount() {\n    var _this2 = this;\n\n    _SilverStripeComponen.prototype.componentDidMount.call(this);\n\n    var captureRoute = true;\n\n    var route = window.ss.router.resolveURLToBase(this.getConfig().assetsRoute);\n\n    window.ss.router(route, function (ctx, next) {\n      if (captureRoute) {\n        _this2.handleURL(window.ss.router, ctx);\n      } else {\n        next();\n      }\n    });\n\n    window.ss.router.exit(route, function (ctx, next) {\n      var applies = window.ss.router.routeAppliesToCurrentLocation(route);\n      if (!applies) {\n        captureRoute = false;\n      }\n      next();\n    });\n  };\n\n  AssetAdmin.prototype.componentWillUnmount = function componentWillUnmount() {\n    _SilverStripeComponen.prototype.componentWillUnmount.call(this);\n\n    this._didHandleUrl = true;\n  };\n\n  AssetAdmin.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    if (this._didHandleUrl) {\n      this.refreshURL(window.ss.router, nextProps);\n    }\n  };\n\n  AssetAdmin.prototype.refreshURL = function refreshURL(router, nextProps) {\n    var desiredURL = null;\n    if (nextProps.fileId) {\n      desiredURL = this.getConfig().assetsRoute.replace(/:folderAction\\?/, 'show').replace(/:folderId\\?/, nextProps.folderId).replace(/:fileAction\\?/, 'edit').replace(/:fileId\\?/, nextProps.fileId);\n    } else {\n      desiredURL = this.getConfig().assetsRoute.replace(/:folderAction\\?/, 'show').replace(/:folderId\\?.*$/, nextProps.folderId);\n    }\n\n    if (desiredURL !== null && desiredURL !== router.current) {\n      router.show(desiredURL, null, false);\n    }\n  };\n\n  AssetAdmin.prototype.handleURL = function handleURL(router, context) {\n    if (context.params.folderAction !== 'show') {\n      this.props.actions.gallery.setFolder(0);\n      var defaultRoute = this.getConfig().assetsRouteHome;\n      router.show(defaultRoute, null, false);\n      return;\n    }\n\n    var folderId = parseInt(context.params.folderId, 10);\n    var fileId = parseInt(context.params.fileId, 10);\n\n    this.props.actions.gallery.setFolder(folderId);\n    this.props.actions.gallery.setFile(fileId);\n\n    this._didHandleUrl = true;\n  };\n\n  AssetAdmin.prototype.handleOpenFile = function handleOpenFile(fileId) {\n    this.props.actions.gallery.setFile(fileId);\n  };\n\n  AssetAdmin.prototype.handleCloseFile = function handleCloseFile() {\n    this.props.actions.gallery.setFile(null);\n  };\n\n  AssetAdmin.prototype.handleFileSave = function handleFileSave(id, updates) {\n    return this.props.actions.gallery.updateFile(this.props.updateApi, id, updates);\n  };\n\n  AssetAdmin.prototype.render = function render() {\n    var editor = this.props.file && _react2.default.createElement(_Editor2.default, {\n      onClose: this.handleCloseFile,\n      onFileSave: this.handleFileSave\n    });\n    return _react2.default.createElement(\n      'div',\n      { className: 'gallery' },\n      editor,\n      _react2.default.createElement(_Gallery2.default, {\n        name: this.props.name,\n        limit: this.props.limit,\n        bulkActions: this.props.bulkActions,\n        filesByParentApi: this.props.filesByParentApi,\n        addFolderApi: this.props.addFolderApi,\n        deleteApi: this.props.deleteApi,\n        onOpenFile: this.handleOpenFile\n      })\n    );\n  };\n\n  return AssetAdmin;\n}(_SilverStripeComponent2.default);\n\nAssetAdmin.propTypes = {\n  config: _react2.default.PropTypes.shape({\n    forms: _react2.default.PropTypes.shape({\n      editForm: _react2.default.PropTypes.shape({\n        schemaUrl: _react2.default.PropTypes.string\n      })\n    })\n  }),\n  sectionConfigKey: _react2.default.PropTypes.string.isRequired,\n  updateApi: _react2.default.PropTypes.func,\n  file: _react2.default.PropTypes.object\n};\n\nfunction mapStateToProps(state) {\n  var _state$assetAdmin$gal = state.assetAdmin.gallery;\n  var files = _state$assetAdmin$gal.files;\n  var fileId = _state$assetAdmin$gal.fileId;\n  var folderId = _state$assetAdmin$gal.folderId;\n\n  var file = null;\n  if (fileId) {\n    file = files.find(function (next) {\n      return next.id === parseInt(fileId, 10);\n    });\n  }\n  return {\n    folderId: folderId,\n    files: files,\n    fileId: fileId,\n    file: file\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: {\n      gallery: (0, _redux.bindActionCreators)(galleryActions, dispatch),\n      editor: (0, _redux.bindActionCreators)(editorActions, dispatch)\n    }\n  };\n}\n\nexports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(AssetAdmin);\n\n},{\"containers/Editor/Editor\":7,\"containers/Gallery/Gallery\":8,\"lib/Config\":\"lib/Config\",\"lib/SilverStripeComponent\":\"lib/SilverStripeComponent\",\"react\":\"react\",\"react-redux\":\"react-redux\",\"redux\":\"redux\",\"state/editor/EditorActions\":11,\"state/gallery/GalleryActions\":14}],7:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _i18n = require('i18n');\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactRedux = require('react-redux');\n\nvar _redux = require('redux');\n\nvar _EditorActions = require('state/editor/EditorActions');\n\nvar editorActions = _interopRequireWildcard(_EditorActions);\n\nvar _TextField = require('components/TextField/TextField');\n\nvar _TextField2 = _interopRequireDefault(_TextField);\n\nvar _FormAction = require('components/FormAction/FormAction');\n\nvar _FormAction2 = _interopRequireDefault(_FormAction);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }\n\nvar Editor = function (_Component) {\n  _inherits(Editor, _Component);\n\n  function Editor(props) {\n    _classCallCheck(this, Editor);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _this.handleFieldUpdate = _this.handleFieldUpdate.bind(_this);\n    _this.handleFileSave = _this.handleFileSave.bind(_this);\n\n    _this.state = {\n      isSaving: false\n    };\n\n    _this.editorFields = [{\n      label: 'Title',\n      name: 'title'\n    }, {\n      label: 'Filename',\n\n      name: 'basename'\n    }];\n\n    _this.props.actions.updateFormState(_extends({}, props.file));\n    return _this;\n  }\n\n  Editor.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    if (nextProps.file !== this.props.file) {\n      this.props.actions.updateFormState(_extends({}, nextProps.file));\n    }\n  };\n\n  Editor.prototype.handleFileSave = function handleFileSave(event) {\n    var _this2 = this;\n\n    if (this.props.onFileSave) {\n      this.setState({ isSaving: true });\n\n      var updates = this.editorFields.reduce(function (prev, curr) {\n        return _extends({}, prev, _defineProperty({}, curr.name, _this2.props.formState[curr.name]));\n      }, {});\n      this.props.onFileSave(this.props.file.id, updates).then(function () {\n        return _this2.setState({ isSaving: false });\n      });\n    }\n\n    event.stopPropagation();\n    event.preventDefault();\n  };\n\n  Editor.prototype.handleFieldUpdate = function handleFieldUpdate(event) {\n    this.props.actions.updateFormState(_extends({}, this.props.formState, _defineProperty({}, event.target.name, event.target.value)));\n  };\n\n  Editor.prototype.render = function render() {\n    var _this3 = this;\n\n    var file = this.props.file;\n\n    var headerExtraParts = [];\n    if (file.attributes.dimensions.width && file.attributes.dimensions.height) {\n      headerExtraParts.push(file.attributes.dimensions.width + 'x' + file.attributes.dimensions.height + 'px');\n    }\n    headerExtraParts.push(file.size);\n    var headerExtraPartsStr = headerExtraParts.join(', ');\n\n    var preview = file.category === 'image' && _react2.default.createElement(\n      'a',\n      {\n        href: file.url,\n        className: 'editor__file-preview font-icon-search btn--no-text',\n        target: '_blank'\n      },\n      _react2.default.createElement('img', { className: 'editor__thumbnail', src: file.url, alt: file.title })\n    );\n\n    return _react2.default.createElement(\n      'div',\n      { className: 'editor container-fluid' },\n      _react2.default.createElement('a', {\n        tabIndex: '0',\n        className: 'btn btn--top-right btn--no-text font-icon-cancel btn--icon-xl',\n        onClick: this.props.onClose,\n        onKeyDown: this.props.onClose,\n        type: 'button',\n        'aria-label': _i18n2.default._t('AssetGalleryField.CANCEL')\n      }),\n      _react2.default.createElement(\n        'div',\n        { className: 'editor__details' },\n        _react2.default.createElement(\n          'h1',\n          { className: 'editor__heading' },\n          file.title\n        ),\n        _react2.default.createElement(\n          'p',\n          { className: 'sub-heading' },\n          headerExtraPartsStr\n        ),\n        preview,\n        _react2.default.createElement(\n          'ul',\n          { className: 'nav nav-tabs hidden-xs-up', role: 'tablist' },\n          _react2.default.createElement(\n            'li',\n            { className: 'nav-item' },\n            _react2.default.createElement(\n              'a',\n              { className: 'nav-link active', 'data-toggle': 'tab', href: '#file-details', role: 'tab' },\n              'Details'\n            )\n          ),\n          _react2.default.createElement(\n            'li',\n            { className: 'nav-item' },\n            _react2.default.createElement(\n              'a',\n              { className: 'nav-link', 'data-toggle': 'tab', href: '#file-usage', role: 'tab' },\n              'Usage'\n            )\n          )\n        ),\n        _react2.default.createElement(\n          'div',\n          { className: 'tab-content' },\n          _react2.default.createElement(\n            'div',\n            { className: 'tab-pane active', id: 'file-details', role: 'tabpanel' },\n            this.editorFields.map(function (field, i) {\n              return _react2.default.createElement(_TextField2.default, {\n                key: i,\n                leftTitle: field.label,\n                name: field.name,\n                value: _this3.props.formState[field.name],\n                onChange: _this3.handleFieldUpdate\n              });\n            }),\n            _react2.default.createElement(\n              'div',\n              { className: 'form-group' },\n              _react2.default.createElement(\n                'label',\n                { htmlFor: 'folderLocation' },\n                'Folder location'\n              ),\n              _react2.default.createElement('input', {\n                type: 'text',\n                className: 'form-control',\n                id: 'folderLocation',\n                value: 'uploads/folder name/',\n                readOnly: 'readonly'\n              })\n            ),\n            _react2.default.createElement(\n              'div',\n              { className: 'media break-string' },\n              _react2.default.createElement(\n                'div',\n                { className: 'media-left' },\n                _react2.default.createElement('i', { className: 'font-icon-link btn--icon-large editor__url-icon' })\n              ),\n              _react2.default.createElement(\n                'div',\n                { className: 'media-body' },\n                _react2.default.createElement(\n                  'a',\n                  { href: file.url, target: '_blank' },\n                  file.url\n                )\n              )\n            ),\n            _react2.default.createElement(\n              'div',\n              { className: 'btn-toolbar' },\n              _react2.default.createElement(\n                'div',\n                { className: 'btn-group hidden-xs-up', role: 'group', 'aria-label': '' },\n                _react2.default.createElement(_FormAction2.default, {\n                  type: 'submit',\n                  bootstrapButtonStyle: 'primary',\n                  icon: 'rocket',\n                  handleClick: this.onFilePublish,\n                  loading: this.state.isSaving,\n                  label: _i18n2.default._t('AssetGalleryField.PUBLISH')\n                })\n              ),\n              _react2.default.createElement(_FormAction2.default, {\n                type: 'submit',\n                bootstrapButtonStyle: 'primary',\n                icon: 'save',\n                handleClick: this.handleFileSave,\n                loading: this.state.isSaving,\n                label: _i18n2.default._t('AssetGalleryField.SAVE')\n              }),\n              _react2.default.createElement('button', {\n                type: 'button',\n                'data-container': 'body',\n                className: 'btn btn-secondary font-icon-dot-3 btn--no-text btn--icon-large hidden-xs-up',\n                'data-toggle': 'popover',\n                title: 'Page actions',\n                'data-placement': 'top',\n                'data-content': '<a href=\\'\\'>Add to campaign</a><a href=\\'\\'>Remove from campaign</a>'\n              })\n            )\n          ),\n          _react2.default.createElement(\n            'div',\n            { className: 'tab-pane', id: 'file-usage', role: 'tabpanel' },\n            _react2.default.createElement(\n              'ul',\n              { className: 'list-unstyled text-muted m-b-2' },\n              _react2.default.createElement(\n                'li',\n                null,\n                file.type\n              ),\n              _react2.default.createElement(\n                'li',\n                null,\n                _i18n2.default._t('AssetGalleryField.CREATED'),\n                ' ',\n                file.created\n              ),\n              _react2.default.createElement(\n                'li',\n                null,\n                _i18n2.default._t('AssetGalleryField.LASTEDIT'),\n                ' ',\n                file.lastUpdated\n              )\n            ),\n            _react2.default.createElement(\n              'table',\n              { className: 'table' },\n              _react2.default.createElement(\n                'thead',\n                null,\n                _react2.default.createElement(\n                  'tr',\n                  null,\n                  _react2.default.createElement(\n                    'th',\n                    null,\n                    '#'\n                  ),\n                  _react2.default.createElement(\n                    'th',\n                    null,\n                    'Used on'\n                  ),\n                  _react2.default.createElement(\n                    'th',\n                    null,\n                    'State'\n                  )\n                )\n              ),\n              _react2.default.createElement(\n                'tbody',\n                null,\n                _react2.default.createElement(\n                  'tr',\n                  null,\n                  _react2.default.createElement(\n                    'th',\n                    { scope: 'row' },\n                    '1'\n                  ),\n                  _react2.default.createElement(\n                    'td',\n                    null,\n                    _react2.default.createElement(\n                      'h5',\n                      null,\n                      _react2.default.createElement(\n                        'a',\n                        { href: '' },\n                        'About us'\n                      )\n                    ),\n                    _react2.default.createElement(\n                      'small',\n                      { className: 'sub-heading' },\n                      'Page'\n                    )\n                  ),\n                  _react2.default.createElement(\n                    'td',\n                    null,\n                    _react2.default.createElement(\n                      'span',\n                      { className: 'label label-info' },\n                      'Draft'\n                    )\n                  )\n                ),\n                _react2.default.createElement(\n                  'tr',\n                  null,\n                  _react2.default.createElement(\n                    'th',\n                    { scope: 'row' },\n                    '2'\n                  ),\n                  _react2.default.createElement(\n                    'td',\n                    null,\n                    _react2.default.createElement(\n                      'h5',\n                      null,\n                      _react2.default.createElement(\n                        'a',\n                        { href: '' },\n                        'My great blog post'\n                      )\n                    ),\n                    _react2.default.createElement(\n                      'p',\n                      { className: 'sub-heading' },\n                      'Blog post'\n                    )\n                  ),\n                  _react2.default.createElement(\n                    'td',\n                    null,\n                    _react2.default.createElement(\n                      'span',\n                      { className: 'label label-success' },\n                      'Published'\n                    )\n                  )\n                ),\n                _react2.default.createElement(\n                  'tr',\n                  null,\n                  _react2.default.createElement(\n                    'th',\n                    { scope: 'row' },\n                    '3'\n                  ),\n                  _react2.default.createElement(\n                    'td',\n                    null,\n                    _react2.default.createElement(\n                      'h5',\n                      null,\n                      _react2.default.createElement(\n                        'a',\n                        { href: '' },\n                        'Our services'\n                      )\n                    ),\n                    _react2.default.createElement(\n                      'p',\n                      { className: 'sub-heading' },\n                      'Services Page'\n                    )\n                  ),\n                  _react2.default.createElement(\n                    'td',\n                    null,\n                    _react2.default.createElement(\n                      'span',\n                      { className: 'label label-success' },\n                      'Published'\n                    )\n                  )\n                ),\n                _react2.default.createElement(\n                  'tr',\n                  null,\n                  _react2.default.createElement(\n                    'th',\n                    { scope: 'row' },\n                    '4'\n                  ),\n                  _react2.default.createElement(\n                    'td',\n                    null,\n                    _react2.default.createElement(\n                      'h5',\n                      null,\n                      _react2.default.createElement(\n                        'a',\n                        { href: '' },\n                        'June release'\n                      )\n                    ),\n                    _react2.default.createElement(\n                      'p',\n                      { className: 'sub-heading' },\n                      'Campaign'\n                    )\n                  ),\n                  _react2.default.createElement('td', null)\n                ),\n                _react2.default.createElement(\n                  'tr',\n                  null,\n                  _react2.default.createElement(\n                    'th',\n                    { scope: 'row' },\n                    '5'\n                  ),\n                  _react2.default.createElement(\n                    'td',\n                    null,\n                    _react2.default.createElement(\n                      'h5',\n                      null,\n                      _react2.default.createElement(\n                        'a',\n                        { href: '' },\n                        'Marketing'\n                      )\n                    ),\n                    _react2.default.createElement(\n                      'p',\n                      { className: 'sub-heading' },\n                      'Campaign'\n                    )\n                  ),\n                  _react2.default.createElement(\n                    'td',\n                    null,\n                    _react2.default.createElement(\n                      'span',\n                      { className: 'label label-warning' },\n                      'Scheduled'\n                    )\n                  )\n                ),\n                _react2.default.createElement(\n                  'tr',\n                  null,\n                  _react2.default.createElement(\n                    'th',\n                    { scope: 'row' },\n                    '6'\n                  ),\n                  _react2.default.createElement(\n                    'td',\n                    null,\n                    _react2.default.createElement(\n                      'h5',\n                      null,\n                      _react2.default.createElement(\n                        'a',\n                        { href: '' },\n                        'Services section'\n                      )\n                    ),\n                    _react2.default.createElement(\n                      'p',\n                      { className: 'sub-heading' },\n                      'Campaign'\n                    )\n                  ),\n                  _react2.default.createElement(\n                    'td',\n                    null,\n                    _react2.default.createElement(\n                      'span',\n                      { className: 'label label-success' },\n                      'Published'\n                    )\n                  )\n                )\n              )\n            )\n          )\n        )\n      )\n    );\n  };\n\n  return Editor;\n}(_react.Component);\n\nEditor.propTypes = {\n  formState: _react2.default.PropTypes.object,\n  file: _react2.default.PropTypes.shape({\n    id: _react2.default.PropTypes.number,\n    title: _react2.default.PropTypes.string,\n    basename: _react2.default.PropTypes.string,\n    url: _react2.default.PropTypes.string,\n    size: _react2.default.PropTypes.string,\n    type: _react2.default.PropTypes.string,\n    created: _react2.default.PropTypes.string,\n    lastUpdated: _react2.default.PropTypes.string,\n    attributes: _react2.default.PropTypes.shape({\n      dimensions: _react2.default.PropTypes.shape({\n        width: _react2.default.PropTypes.number,\n        height: _react2.default.PropTypes.number\n      })\n    })\n  }),\n  actions: _react2.default.PropTypes.object,\n  onClose: _react2.default.PropTypes.func.isRequired,\n  onFileSave: _react2.default.PropTypes.func\n};\n\nfunction mapStateToProps(state) {\n  var _state$assetAdmin$gal = state.assetAdmin.gallery;\n  var files = _state$assetAdmin$gal.files;\n  var fileId = _state$assetAdmin$gal.fileId;\n\n  var file = null;\n  if (fileId) {\n    file = files.find(function (next) {\n      return next.id === parseInt(fileId, 10);\n    });\n  }\n  return {\n    file: file,\n    formState: state.assetAdmin.editor.formState\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: (0, _redux.bindActionCreators)(editorActions, dispatch)\n  };\n}\n\nexports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(Editor);\n\n},{\"components/FormAction/FormAction\":\"components/FormAction/FormAction\",\"components/TextField/TextField\":\"components/TextField/TextField\",\"i18n\":\"i18n\",\"react\":\"react\",\"react-redux\":\"react-redux\",\"redux\":\"redux\",\"state/editor/EditorActions\":11}],8:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Gallery = undefined;\n\nvar _jQuery = require('jQuery');\n\nvar _jQuery2 = _interopRequireDefault(_jQuery);\n\nvar _i18n = require('i18n');\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _reactAddonsCssTransitionGroup = require('react-addons-css-transition-group');\n\nvar _reactAddonsCssTransitionGroup2 = _interopRequireDefault(_reactAddonsCssTransitionGroup);\n\nvar _reactRedux = require('react-redux');\n\nvar _redux = require('redux');\n\nvar _reactAddonsTestUtils = require('react-addons-test-utils');\n\nvar _reactAddonsTestUtils2 = _interopRequireDefault(_reactAddonsTestUtils);\n\nvar _AssetDropzone = require('components/AssetDropzone/AssetDropzone');\n\nvar _AssetDropzone2 = _interopRequireDefault(_AssetDropzone);\n\nvar _GalleryItem = require('components/GalleryItem/GalleryItem');\n\nvar _GalleryItem2 = _interopRequireDefault(_GalleryItem);\n\nvar _BulkActions = require('components/BulkActions/BulkActions');\n\nvar _BulkActions2 = _interopRequireDefault(_BulkActions);\n\nvar _index = require('constants/index');\n\nvar _index2 = _interopRequireDefault(_index);\n\nvar _GalleryActions = require('state/gallery/GalleryActions');\n\nvar galleryActions = _interopRequireWildcard(_GalleryActions);\n\nvar _QueuedFilesActions = require('state/queuedFiles/QueuedFilesActions');\n\nvar queuedFilesActions = _interopRequireWildcard(_QueuedFilesActions);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }\n\nfunction getComparator(field, direction) {\n  return function (a, b) {\n    var fieldA = a[field].toLowerCase();\n    var fieldB = b[field].toLowerCase();\n\n    if (direction === 'asc') {\n      if (fieldA < fieldB) {\n        return -1;\n      }\n\n      if (fieldA > fieldB) {\n        return 1;\n      }\n    } else {\n      if (fieldA > fieldB) {\n        return -1;\n      }\n\n      if (fieldA < fieldB) {\n        return 1;\n      }\n    }\n\n    return 0;\n  };\n}\n\nvar Gallery = exports.Gallery = function (_Component) {\n  _inherits(Gallery, _Component);\n\n  function Gallery(props) {\n    _classCallCheck(this, Gallery);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _this.sort = 'name';\n    _this.direction = 'asc';\n\n    _this.sorters = [{\n      field: 'title',\n      direction: 'asc',\n      label: _i18n2.default._t('AssetGalleryField.FILTER_TITLE_ASC')\n    }, {\n      field: 'title',\n      direction: 'desc',\n      label: _i18n2.default._t('AssetGalleryField.FILTER_TITLE_DESC')\n    }, {\n      field: 'created',\n      direction: 'desc',\n      label: _i18n2.default._t('AssetGalleryField.FILTER_DATE_DESC')\n    }, {\n      field: 'created',\n      direction: 'asc',\n      label: _i18n2.default._t('AssetGalleryField.FILTER_DATE_ASC')\n    }];\n\n    _this.handleFolderActivate = _this.handleFolderActivate.bind(_this);\n    _this.handleFileActivate = _this.handleFileActivate.bind(_this);\n    _this.handleToggleSelect = _this.handleToggleSelect.bind(_this);\n    _this.handleAddedFile = _this.handleAddedFile.bind(_this);\n    _this.handleCancelUpload = _this.handleCancelUpload.bind(_this);\n    _this.handleRemoveErroredUpload = _this.handleRemoveErroredUpload.bind(_this);\n    _this.handleUploadProgress = _this.handleUploadProgress.bind(_this);\n    _this.handleSending = _this.handleSending.bind(_this);\n    _this.handleItemDelete = _this.handleItemDelete.bind(_this);\n    _this.handleBackClick = _this.handleBackClick.bind(_this);\n    _this.handleMoreClick = _this.handleMoreClick.bind(_this);\n    _this.handleSort = _this.handleSort.bind(_this);\n    _this.handleSuccessfulUpload = _this.handleSuccessfulUpload.bind(_this);\n    _this.handleFailedUpload = _this.handleFailedUpload.bind(_this);\n    _this.handleAddFolder = _this.handleAddFolder.bind(_this);\n    return _this;\n  }\n\n  Gallery.prototype.componentDidMount = function componentDidMount() {\n    this.refreshFolderIfNeeded();\n  };\n\n  Gallery.prototype.componentWillUpdate = function componentWillUpdate() {\n    var $select = (0, _jQuery2.default)(_reactDom2.default.findDOMNode(this)).find('.gallery__sort .dropdown');\n    $select.off('change');\n  };\n\n  Gallery.prototype.componentDidUpdate = function componentDidUpdate() {\n    var $select = (0, _jQuery2.default)(_reactDom2.default.findDOMNode(this)).find('.gallery__sort .dropdown');\n\n    $select.chosen({\n      allow_single_deselect: true,\n      disable_search_threshold: 20\n    });\n\n    $select.on('change', function () {\n      return _reactAddonsTestUtils2.default.Simulate.click($select.find(':selected')[0]);\n    });\n\n    this.refreshFolderIfNeeded();\n    this.checkLoadingIndicator();\n  };\n\n  Gallery.prototype.getNoItemsNotice = function getNoItemsNotice() {\n    if (this.props.files.length < 1 && this.props.queuedFiles.items.length < 1 && !this.props.loading) {\n      return _react2.default.createElement(\n        'p',\n        { className: 'gallery__no-item-notice' },\n        _i18n2.default._t('AssetGalleryField.NOITEMSFOUND')\n      );\n    }\n\n    return null;\n  };\n\n  Gallery.prototype.getBackButton = function getBackButton() {\n    var classes = ['btn', 'btn-secondary', 'btn--no-text', 'font-icon-level-up', 'btn--icon-large', 'gallery__back'].join(' ');\n    if (this.props.parentfolderId !== null) {\n      return _react2.default.createElement('button', {\n        className: classes,\n        onClick: this.handleBackClick,\n        ref: 'backButton'\n      });\n    }\n\n    return null;\n  };\n\n  Gallery.prototype.getBulkActionsComponent = function getBulkActionsComponent() {\n    var _this2 = this;\n\n    var deleteAction = function deleteAction(ids) {\n      _this2.props.actions.gallery.deleteItems(_this2.props.deleteApi, ids);\n    };\n\n    if (this.props.selectedFiles.length > 0 && this.props.bulkActions) {\n      return _react2.default.createElement(_BulkActions2.default, {\n        deleteAction: deleteAction,\n        key: this.props.selectedFiles.length > 0\n      });\n    }\n\n    return null;\n  };\n\n  Gallery.prototype.getMoreButton = function getMoreButton() {\n    if (this.props.count > this.props.files.length) {\n      return _react2.default.createElement(\n        'button',\n        {\n          className: 'gallery__load-more',\n          onClick: this.handleMoreClick\n        },\n        _i18n2.default._t('AssetGalleryField.LOADMORE')\n      );\n    }\n\n    return null;\n  };\n\n  Gallery.prototype.checkLoadingIndicator = function checkLoadingIndicator() {\n    var $sectionWrapper = (0, _jQuery2.default)('.cms-content.AssetAdmin');\n\n    if (this.props.loading && !$sectionWrapper.hasClass('loading')) {\n      $sectionWrapper.addClass('loading');\n    } else if (!this.props.loading && $sectionWrapper.hasClass('loading')) {\n      $sectionWrapper.removeClass('loading');\n    }\n  };\n\n  Gallery.prototype.refreshFolderIfNeeded = function refreshFolderIfNeeded() {\n    var self = this;\n\n    if (!isNaN(this.props.folderId) && this.props.folderId >= 0 && this.props.folderId !== this.props.loadedfolderId) {\n      this.props.actions.gallery.loadFolderContents(this.props.filesByParentApi, this.props.folderId, this.props.limit, this.props.page).then(function () {\n        var fileId = self.props.fileId;\n        var file = self.props.files.find(function (next) {\n          return next.id === parseInt(fileId, 10);\n        });\n        if (file) {\n          self.props.onOpenFile(fileId, file);\n        }\n      });\n    }\n  };\n\n  Gallery.prototype.handleSort = function handleSort(event) {\n    var data = event.target.dataset;\n    this.props.actions.queuedFiles.purgeUploadQueue();\n    this.props.actions.gallery.sortFiles(getComparator(data.field, data.direction));\n  };\n\n  Gallery.prototype.handleCancelUpload = function handleCancelUpload(fileData) {\n    fileData.xhr.abort();\n    this.props.actions.queuedFiles.removeQueuedFile(fileData.queuedAtTime);\n  };\n\n  Gallery.prototype.handleRemoveErroredUpload = function handleRemoveErroredUpload(fileData) {\n    this.props.actions.queuedFiles.removeQueuedFile(fileData.queuedAtTime);\n  };\n\n  Gallery.prototype.handleAddedFile = function handleAddedFile(data) {\n    this.props.actions.queuedFiles.addQueuedFile(data);\n  };\n\n  Gallery.prototype.handleSending = function handleSending(file, xhr) {\n    this.props.actions.queuedFiles.updateQueuedFile(file._queuedAtTime, { xhr: xhr });\n  };\n\n  Gallery.prototype.handleUploadProgress = function handleUploadProgress(file, progress) {\n    this.props.actions.queuedFiles.updateQueuedFile(file._queuedAtTime, { progress: progress });\n  };\n\n  Gallery.prototype.handleAddFolder = function handleAddFolder() {\n    var folderName = prompt('Folder name (or blank to cancel)');\n    if (folderName) {\n      this.props.actions.gallery.addFolder(this.props.addFolderApi, this.props.folderId, folderName);\n    }\n  };\n\n  Gallery.prototype.handleSuccessfulUpload = function handleSuccessfulUpload(file) {\n    var json = JSON.parse(file.xhr.response);\n\n    if (typeof json[0].error !== 'undefined') {\n      this.handleFailedUpload(file);\n      return;\n    }\n\n    this.props.actions.queuedFiles.removeQueuedFile(file._queuedAtTime);\n    this.props.actions.gallery.addFiles(json, this.props.count + 1);\n  };\n\n  Gallery.prototype.handleFailedUpload = function handleFailedUpload(file) {\n    this.props.actions.queuedFiles.failUpload(file._queuedAtTime);\n  };\n\n  Gallery.prototype.handleItemDelete = function handleItemDelete(event, item) {\n    if (confirm(_i18n2.default._t('AssetGalleryField.CONFIRMDELETE'))) {\n      this.props.actions.gallery.deleteItems(this.props.deleteApi, [item.id]);\n    }\n  };\n\n  Gallery.prototype.itemIsSelected = function itemIsSelected(id) {\n    return this.props.selectedFiles.indexOf(id) > -1;\n  };\n\n  Gallery.prototype.itemIsHighlighted = function itemIsHighlighted(id) {\n    return this.props.highlightedFiles.indexOf(id) > -1;\n  };\n\n  Gallery.prototype.handleFolderActivate = function handleFolderActivate(event, folder) {\n    this.props.actions.gallery.setFolder(folder.id);\n  };\n\n  Gallery.prototype.handleFileActivate = function handleFileActivate(event, file) {\n    if (file.created === null) {\n      return;\n    }\n\n    this.props.onOpenFile(file.id, file);\n  };\n\n  Gallery.prototype.handleToggleSelect = function handleToggleSelect(event, item) {\n    if (this.props.selectedFiles.indexOf(item.id) === -1) {\n      this.props.actions.gallery.selectFiles([item.id]);\n    } else {\n      this.props.actions.gallery.deselectFiles([item.id]);\n    }\n  };\n\n  Gallery.prototype.handleMoreClick = function handleMoreClick(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    this.props.actions.gallery.deselectFiles();\n  };\n\n  Gallery.prototype.handleBackClick = function handleBackClick(event) {\n    event.preventDefault();\n    this.props.actions.gallery.setFolder(this.props.parentfolderId);\n  };\n\n  Gallery.prototype.render = function render() {\n    var _this3 = this;\n\n    var dropzoneOptions = {\n      url: 'admin/assets/EditForm/field/Upload/upload',\n      paramName: 'Upload',\n      clickable: '#upload-button'\n    };\n    var securityID = (0, _jQuery2.default)(':input[name=SecurityID]').val();\n    var canEdit = this.props.canEdit;\n\n    return _react2.default.createElement(\n      'div',\n      { className: 'gallery__outer' },\n      _react2.default.createElement(\n        _reactAddonsCssTransitionGroup2.default,\n        {\n          transitionName: 'bulk-actions',\n          transitionEnterTimeout: _index2.default.CSS_TRANSITION_TIME,\n          transitionLeaveTimeout: _index2.default.CSS_TRANSITION_TIME\n        },\n        this.getBulkActionsComponent()\n      ),\n      _react2.default.createElement(\n        'div',\n        { className: 'gallery__main panel-scrollable' },\n        _react2.default.createElement(\n          'div',\n          { className: 'gallery__sort fieldholder-small' },\n          _react2.default.createElement(\n            'select',\n            {\n              className: 'dropdown no-change-track no-chzn',\n              tabIndex: '0',\n              style: { width: '160px' }\n            },\n            this.sorters.map(function (sorter, i) {\n              return _react2.default.createElement(\n                'option',\n                {\n                  key: i,\n                  onClick: _this3.handleSort,\n                  'data-field': sorter.field,\n                  'data-direction': sorter.direction\n                },\n                sorter.label\n              );\n            })\n          )\n        ),\n        _react2.default.createElement(\n          'div',\n          { className: 'toolbar--content toolbar--space-save' },\n          this.getBackButton(),\n          _react2.default.createElement(\n            'button',\n            {\n              id: 'upload-button',\n              className: 'btn btn-secondary font-icon-upload btn--icon-xl',\n              type: 'button',\n              disabled: !canEdit\n            },\n            _react2.default.createElement(\n              'span',\n              { className: 'btn__text' },\n              _i18n2.default._t('AssetGalleryField.DROPZONE_UPLOAD')\n            )\n          ),\n          _react2.default.createElement(\n            'button',\n            {\n              id: 'add-folder-button',\n              className: 'btn btn-secondary font-icon-folder-add btn--icon-xl ',\n              type: 'button',\n              onClick: this.handleAddFolder,\n              disabled: !canEdit\n            },\n            _react2.default.createElement(\n              'span',\n              { className: 'btn__text' },\n              _i18n2.default._t('AssetGalleryField.ADD_FOLDER_BUTTON')\n            )\n          )\n        ),\n        _react2.default.createElement(\n          _AssetDropzone2.default,\n          {\n            canUpload: canEdit,\n            handleAddedFile: this.handleAddedFile,\n            handleError: this.handleFailedUpload,\n            handleSuccess: this.handleSuccessfulUpload,\n            handleSending: this.handleSending,\n            handleUploadProgress: this.handleUploadProgress,\n            folderId: this.props.folderId,\n            options: dropzoneOptions,\n            securityID: securityID,\n            uploadButton: false\n          },\n          _react2.default.createElement(\n            'div',\n            { className: 'gallery__folders' },\n            this.props.files.map(function (file, i) {\n              var component = void 0;\n              if (file.type === 'folder') {\n                component = _react2.default.createElement(_GalleryItem2.default, {\n                  key: i,\n                  item: file,\n                  selected: _this3.itemIsSelected(file.id),\n                  highlighted: _this3.itemIsHighlighted(file.id),\n                  handleDelete: _this3.handleItemDelete,\n                  handleToggleSelect: _this3.handleToggleSelect,\n                  handleActivate: _this3.handleFolderActivate\n                });\n              }\n              return component;\n            })\n          ),\n          _react2.default.createElement(\n            'div',\n            { className: 'gallery__files' },\n            this.props.queuedFiles.items.map(function (file, i) {\n              return _react2.default.createElement(_GalleryItem2.default, {\n                key: 'queued_file_' + i,\n                item: file,\n                selected: _this3.itemIsSelected(file.id),\n                highlighted: _this3.itemIsHighlighted(file.id),\n                handleDelete: _this3.handleItemDelete,\n                handleToggleSelect: _this3.handleToggleSelect,\n                handleActivate: _this3.handleFileActivate,\n                handleCancelUpload: _this3.handleCancelUpload,\n                handleRemoveErroredUpload: _this3.handleRemoveErroredUpload,\n                messages: file.messages,\n                uploading: true\n              });\n            }),\n            this.props.files.map(function (file, i) {\n              var component = void 0;\n              if (file.type !== 'folder') {\n                component = _react2.default.createElement(_GalleryItem2.default, {\n                  key: 'file_' + i,\n                  item: file,\n                  selected: _this3.itemIsSelected(file.id),\n                  highlighted: _this3.itemIsHighlighted(file.id),\n                  handleDelete: _this3.handleItemDelete,\n                  handleToggleSelect: _this3.handleToggleSelect,\n                  handleActivate: _this3.handleFileActivate\n                });\n              }\n              return component;\n            })\n          ),\n          this.getNoItemsNotice(),\n          _react2.default.createElement(\n            'div',\n            { className: 'gallery__load' },\n            this.getMoreButton()\n          )\n        )\n      )\n    );\n  };\n\n  return Gallery;\n}(_react.Component);\n\nGallery.propTypes = {\n  loading: _react2.default.PropTypes.bool,\n  files: _react2.default.PropTypes.array,\n  count: _react2.default.PropTypes.number,\n  fileId: _react2.default.PropTypes.number,\n  folderId: _react2.default.PropTypes.number.isRequired,\n  loadedfolderId: _react2.default.PropTypes.number,\n  parentfolderId: _react2.default.PropTypes.number,\n  selectedFiles: _react2.default.PropTypes.array,\n  highlightedFiles: _react2.default.PropTypes.array,\n  bulkActions: _react2.default.PropTypes.bool,\n  limit: _react2.default.PropTypes.number,\n  page: _react2.default.PropTypes.number,\n  canEdit: _react2.default.PropTypes.bool,\n\n  queuedFiles: _react2.default.PropTypes.shape({\n    items: _react2.default.PropTypes.array.isRequired\n  }),\n\n  onOpenFile: _react2.default.PropTypes.func.isRequired,\n\n  addFolderApi: _react2.default.PropTypes.func,\n  deleteApi: _react2.default.PropTypes.func,\n  filesByParentApi: _react2.default.PropTypes.func,\n\n  actions: _react2.default.PropTypes.object\n};\n\nfunction mapStateToProps(state) {\n  var _state$assetAdmin$gal = state.assetAdmin.gallery;\n  var files = _state$assetAdmin$gal.files;\n  var fileId = _state$assetAdmin$gal.fileId;\n  var folderId = _state$assetAdmin$gal.folderId;\n\n  return {\n    files: files,\n    fileId: fileId,\n    loading: state.assetAdmin.gallery.loading,\n    count: state.assetAdmin.gallery.count,\n    folderId: folderId,\n    loadedfolderId: state.assetAdmin.gallery.loadedfolderId,\n    parentfolderId: state.assetAdmin.gallery.parentfolderId,\n    selectedFiles: state.assetAdmin.gallery.selectedFiles,\n    highlightedFiles: state.assetAdmin.gallery.highlightedFiles,\n    page: state.assetAdmin.gallery.page,\n    canEdit: state.assetAdmin.gallery.canEdit,\n    canDelete: state.assetAdmin.gallery.canDelete,\n    queuedFiles: state.assetAdmin.queuedFiles\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: {\n      gallery: (0, _redux.bindActionCreators)(galleryActions, dispatch),\n      queuedFiles: (0, _redux.bindActionCreators)(queuedFilesActions, dispatch)\n    }\n  };\n}\n\nexports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(Gallery);\n\n},{\"components/AssetDropzone/AssetDropzone\":2,\"components/BulkActions/BulkActions\":3,\"components/GalleryItem/GalleryItem\":4,\"constants/index\":5,\"i18n\":\"i18n\",\"jQuery\":\"jQuery\",\"react\":\"react\",\"react-addons-css-transition-group\":\"react-addons-css-transition-group\",\"react-addons-test-utils\":\"react-addons-test-utils\",\"react-dom\":\"react-dom\",\"react-redux\":\"react-redux\",\"redux\":\"redux\",\"state/gallery/GalleryActions\":14,\"state/queuedFiles/QueuedFilesActions\":17}],9:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = configureStore;\n\nvar _redux = require('redux');\n\nvar _reduxThunk = require('redux-thunk');\n\nvar _reduxThunk2 = _interopRequireDefault(_reduxThunk);\n\nvar _reduxLogger = require('redux-logger');\n\nvar _reduxLogger2 = _interopRequireDefault(_reduxLogger);\n\nvar _reducer = require('./reducer');\n\nvar _reducer2 = _interopRequireDefault(_reducer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar createStoreWithMiddleware = (0, _redux.applyMiddleware)(_reduxThunk2.default, (0, _reduxLogger2.default)())(_redux.createStore);\n\nfunction configureStore() {\n  var initialState = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n  var store = createStoreWithMiddleware(_reducer2.default, initialState);\n\n  return store;\n}\n\n},{\"./reducer\":19,\"redux\":\"redux\",\"redux-logger\":21,\"redux-thunk\":\"redux-thunk\"}],10:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexports.default = ['UPDATE_FORM_STATE', 'SET_FILE'].reduce(function (obj, item) {\n  return _extends(obj, _defineProperty({}, item, 'EDITOR.' + item));\n}, {});\n\n},{}],11:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateFormState = updateFormState;\n\nvar _EditorActionTypes = require('./EditorActionTypes');\n\nvar _EditorActionTypes2 = _interopRequireDefault(_EditorActionTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction updateFormState(updates) {\n  return function (dispatch) {\n    return dispatch({\n      type: _EditorActionTypes2.default.UPDATE_FORM_STATE,\n      payload: { updates: updates }\n    });\n  };\n}\n\n},{\"./EditorActionTypes\":10}],12:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.default = editorReducer;\n\nvar _deepFreezeStrict = require('deep-freeze-strict');\n\nvar _deepFreezeStrict2 = _interopRequireDefault(_deepFreezeStrict);\n\nvar _EditorActionTypes = require('./EditorActionTypes');\n\nvar _EditorActionTypes2 = _interopRequireDefault(_EditorActionTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar initialState = {\n  formState: {}\n};\n\nfunction editorReducer() {\n  var state = arguments.length <= 0 || arguments[0] === undefined ? initialState : arguments[0];\n  var action = arguments[1];\n\n  switch (action.type) {\n\n    case _EditorActionTypes2.default.UPDATE_FORM_STATE:\n      {\n        return (0, _deepFreezeStrict2.default)(_extends({}, state, {\n          formState: _extends({}, state.formState, action.payload.updates)\n        }));\n      }\n\n    default:\n      return state;\n  }\n}\n\n},{\"./EditorActionTypes\":10,\"deep-freeze-strict\":\"deep-freeze-strict\"}],13:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexports.default = ['ADD_FILES', 'DESELECT_FILES', 'REMOVE_FILES', 'SELECT_FILES', 'SORT_FILES', 'UPDATE_FILE_REQUEST', 'UPDATE_FILE_SUCCESS', 'ADD_FOLDER_REQUEST', 'ADD_FOLDER_SUCCESS', 'ADD_FOLDER_FAILURE', 'DELETE_ITEM_REQUEST', 'DELETE_ITEM_SUCCESS', 'DELETE_ITEM_FAILURE', 'LOAD_FOLDER_REQUEST', 'LOAD_FOLDER_SUCCESS', 'SET_FOLDER', 'SET_FILE', 'SET_FOLDER_PERMISSIONS', 'HIGHLIGHT_FILES'].reduce(function (obj, item) {\n  return _extends(obj, _defineProperty({}, item, 'GALLERY.' + item));\n}, {});\n\n},{}],14:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.setFolder = setFolder;\nexports.setFile = setFile;\nexports.addFiles = addFiles;\nexports.deleteItems = deleteItems;\nexports.loadFolderContents = loadFolderContents;\nexports.updateFile = updateFile;\nexports.selectFiles = selectFiles;\nexports.deselectFiles = deselectFiles;\nexports.highlightFiles = highlightFiles;\nexports.sortFiles = sortFiles;\nexports.addFolder = addFolder;\nexports.setFolderPermissions = setFolderPermissions;\n\nvar _GalleryActionTypes = require('./GalleryActionTypes');\n\nvar _GalleryActionTypes2 = _interopRequireDefault(_GalleryActionTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction setFolder(folderId) {\n  return function (dispatch) {\n    dispatch({\n      type: _GalleryActionTypes2.default.SET_FOLDER,\n      payload: { folderId: folderId }\n    });\n\n    dispatch({\n      type: _GalleryActionTypes2.default.SET_FILE,\n      payload: { fileId: null }\n    });\n    dispatch({\n      type: _GalleryActionTypes2.default.HIGHLIGHT_FILES,\n      payload: { ids: null }\n    });\n  };\n}\n\nfunction setFile(fileId) {\n  return function (dispatch) {\n    dispatch({\n      type: _GalleryActionTypes2.default.HIGHLIGHT_FILES,\n      payload: { ids: [fileId] }\n    });\n\n    dispatch({\n      type: _GalleryActionTypes2.default.SET_FILE,\n      payload: { fileId: fileId }\n    });\n  };\n}\n\nfunction addFiles(files, count) {\n  return function (dispatch) {\n    return dispatch({\n      type: _GalleryActionTypes2.default.ADD_FILES,\n      payload: { files: files, count: count }\n    });\n  };\n}\n\nfunction deleteItems(deleteApi, ids) {\n  return function (dispatch) {\n    dispatch({\n      type: _GalleryActionTypes2.default.DELETE_ITEM_REQUEST,\n      payload: { ids: ids }\n    });\n\n    return deleteApi({ ids: ids }).then(function (json) {\n      dispatch({\n        type: _GalleryActionTypes2.default.DELETE_ITEM_SUCCESS,\n        payload: { ids: ids }\n      });\n\n      dispatch({\n        type: _GalleryActionTypes2.default.SET_FILE,\n        payload: { fileId: null }\n      });\n\n      return json;\n    }).catch(function (error) {\n      dispatch({\n        type: _GalleryActionTypes2.default.DELETE_ITEM_FAILURE,\n        payload: { error: error }\n      });\n    });\n  };\n}\n\nfunction loadFolderContents(filesByParentApi, folderId, limit, page) {\n  return function (dispatch) {\n    dispatch({\n      type: _GalleryActionTypes2.default.LOAD_FOLDER_REQUEST,\n      payload: { viewingFolder: folderId > 0, folderId: parseInt(folderId, 10) }\n    });\n\n    return filesByParentApi({ id: folderId, limit: limit, page: page }).then(function (data) {\n      dispatch({\n        type: _GalleryActionTypes2.default.LOAD_FOLDER_SUCCESS,\n        payload: {\n          folderId: parseInt(folderId, 10),\n          parentfolderId: data.parent,\n          files: data.files,\n          canEdit: data.canEdit,\n          canDelete: data.canDelete\n        }\n      });\n    });\n  };\n}\n\nfunction updateFile(updateApi, id, updates) {\n  return function (dispatch) {\n    dispatch({\n      type: _GalleryActionTypes2.default.UPDATE_FILE_REQUEST,\n      payload: { id: id, updates: updates }\n    });\n\n    return updateApi(_extends({}, { id: id }, updates)).then(function () {\n      dispatch({\n        type: _GalleryActionTypes2.default.UPDATE_FILE_SUCCESS,\n        payload: { id: id, updates: updates }\n      });\n    });\n  };\n}\n\nfunction selectFiles() {\n  var ids = arguments.length <= 0 || arguments[0] === undefined ? null : arguments[0];\n\n  return function (dispatch) {\n    return dispatch({\n      type: _GalleryActionTypes2.default.SELECT_FILES,\n      payload: { ids: ids }\n    });\n  };\n}\n\nfunction deselectFiles() {\n  var ids = arguments.length <= 0 || arguments[0] === undefined ? null : arguments[0];\n\n  return function (dispatch) {\n    return dispatch({\n      type: _GalleryActionTypes2.default.DESELECT_FILES,\n      payload: { ids: ids }\n    });\n  };\n}\n\nfunction highlightFiles() {\n  var ids = arguments.length <= 0 || arguments[0] === undefined ? null : arguments[0];\n\n  return function (dispatch) {\n    return dispatch({\n      type: _GalleryActionTypes2.default.HIGHLIGHT_FILES,\n      payload: { ids: ids }\n    });\n  };\n}\n\nfunction sortFiles(comparator) {\n  return function (dispatch) {\n    return dispatch({\n      type: _GalleryActionTypes2.default.SORT_FILES,\n      payload: { comparator: comparator }\n    });\n  };\n}\n\nfunction addFolder(addFolderApi, folderId, folderName) {\n  return function (dispatch) {\n    dispatch({\n      type: _GalleryActionTypes2.default.ADD_FOLDER_REQUEST,\n      payload: { folderName: folderName }\n    });\n\n    return addFolderApi({ folderId: isNaN(folderId) ? 0 : folderId, folderName: folderName }).then(function (json) {\n      dispatch({\n        type: _GalleryActionTypes2.default.ADD_FOLDER_SUCCESS,\n        payload: { folderName: folderName }\n      });\n\n      dispatch({\n        type: _GalleryActionTypes2.default.SET_FOLDER,\n        payload: { folderId: json.folderID }\n      });\n    }).catch(function (err) {\n      dispatch({\n        type: _GalleryActionTypes2.default.ADD_FOLDER_FAILURE,\n        payload: { error: 'Couldn\\'t create ' + folderName + ': ' + err }\n      });\n    });\n  };\n}\n\nfunction setFolderPermissions(folderPermissions) {\n  return function (dispatch) {\n    dispatch({\n      type: _GalleryActionTypes2.default.SET_FOLDER_PERMISSIONS,\n      payload: folderPermissions\n    });\n  };\n}\n\n},{\"./GalleryActionTypes\":13}],15:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.default = galleryReducer;\n\nvar _deepFreezeStrict = require('deep-freeze-strict');\n\nvar _deepFreezeStrict2 = _interopRequireDefault(_deepFreezeStrict);\n\nvar _GalleryActionTypes = require('./GalleryActionTypes');\n\nvar _GalleryActionTypes2 = _interopRequireDefault(_GalleryActionTypes);\n\nvar _index = require('constants/index');\n\nvar _index2 = _interopRequireDefault(_index);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar initialState = {\n  bulkActions: {\n    placeholder: _index2.default.BULK_ACTIONS_PLACEHOLDER,\n    options: _index2.default.BULK_ACTIONS\n  },\n  count: 0,\n  editorFields: [],\n  file: null,\n  files: [],\n  fileId: 0,\n  folderId: 0,\n  focus: false,\n  parentfolderId: null,\n  path: null,\n  selectedFiles: [],\n  highlightedFiles: [],\n  viewingFolder: false,\n  page: 0,\n  folderPermissions: {\n    canEdit: false,\n    canDelete: false\n  }\n};\n\nfunction galleryReducer() {\n  var state = arguments.length <= 0 || arguments[0] === undefined ? initialState : arguments[0];\n  var action = arguments[1];\n\n  var nextState = void 0;\n\n  switch (action.type) {\n\n    case _GalleryActionTypes2.default.SET_FOLDER:\n      return (0, _deepFreezeStrict2.default)(_extends({}, state, {\n        folderId: parseInt(action.payload.folderId, 10) || 0,\n        fileId: 0 }));\n\n    case _GalleryActionTypes2.default.SET_FILE:\n      return (0, _deepFreezeStrict2.default)(_extends({}, state, {\n        fileId: parseInt(action.payload.fileId, 10) || 0\n      }));\n\n    case _GalleryActionTypes2.default.ADD_FILES:\n      {\n        var _ret = function () {\n          var nextFilesState = [];\n\n          action.payload.files.forEach(function (payloadFile) {\n            var fileInState = false;\n\n            state.files.forEach(function (stateFile) {\n              if (stateFile.id === payloadFile.id) {\n                fileInState = true;\n              }\n            });\n\n            if (!fileInState) {\n              nextFilesState.push(payloadFile);\n            }\n          });\n\n          return {\n            v: (0, _deepFreezeStrict2.default)(_extends({}, state, {\n              count: typeof action.payload.count !== 'undefined' ? action.payload.count : state.count,\n              files: nextFilesState.concat(state.files)\n            }))\n          };\n        }();\n\n        if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n      }\n\n    case _GalleryActionTypes2.default.REMOVE_FILES:\n      {\n        if (typeof action.payload.ids === 'undefined') {\n          nextState = (0, _deepFreezeStrict2.default)(_extends({}, state, { count: 0, files: [] }));\n        } else {\n          nextState = (0, _deepFreezeStrict2.default)(_extends({}, state, {\n            count: state.files.filter(function (file) {\n              return action.payload.ids.indexOf(file.id) === -1;\n            }).length,\n            files: state.files.filter(function (file) {\n              return action.payload.ids.indexOf(file.id) === -1;\n            })\n          }));\n        }\n\n        return nextState;\n      }\n\n    case _GalleryActionTypes2.default.UPDATE_FILE_SUCCESS:\n      {\n        var _ret2 = function () {\n          var fileIndex = state.files.map(function (file) {\n            return file.id;\n          }).indexOf(action.payload.id);\n          var updatedFile = _extends({}, state.files[fileIndex], action.payload.updates);\n\n          return {\n            v: (0, _deepFreezeStrict2.default)(_extends({}, state, {\n              files: state.files.map(function (file) {\n                return file.id === updatedFile.id ? updatedFile : file;\n              })\n            }))\n          };\n        }();\n\n        if ((typeof _ret2 === 'undefined' ? 'undefined' : _typeof(_ret2)) === \"object\") return _ret2.v;\n      }\n\n    case _GalleryActionTypes2.default.SELECT_FILES:\n      {\n        if (action.payload.ids === null) {\n          nextState = (0, _deepFreezeStrict2.default)(_extends({}, state, {\n            selectedFiles: state.selectedFiles.concat(state.files.map(function (file) {\n              return file.id;\n            }).filter(function (id) {\n              return state.selectedFiles.indexOf(id) === -1;\n            }))\n          }));\n        } else {\n          nextState = (0, _deepFreezeStrict2.default)(_extends({}, state, {\n            selectedFiles: state.selectedFiles.concat(action.payload.ids.filter(function (id) {\n              return state.selectedFiles.indexOf(id) === -1;\n            }))\n          }));\n        }\n\n        return nextState;\n      }\n\n    case _GalleryActionTypes2.default.DESELECT_FILES:\n      {\n        if (action.payload.ids === null) {\n          nextState = (0, _deepFreezeStrict2.default)(_extends({}, state, { selectedFiles: [] }));\n        } else {\n          nextState = (0, _deepFreezeStrict2.default)(_extends({}, state, {\n            selectedFiles: state.selectedFiles.filter(function (id) {\n              return action.payload.ids.indexOf(id) === -1;\n            })\n          }));\n        }\n\n        return nextState;\n      }\n\n    case _GalleryActionTypes2.default.HIGHLIGHT_FILES:\n      {\n        nextState = (0, _deepFreezeStrict2.default)(_extends({}, state, {\n          highlightedFiles: action.payload.ids || []\n        }));\n\n        return nextState;\n      }\n\n    case _GalleryActionTypes2.default.DELETE_ITEM_SUCCESS:\n      {\n        return (0, _deepFreezeStrict2.default)(_extends({}, state, {\n          selectedFiles: state.selectedFiles.filter(function (id) {\n            return action.payload.ids.indexOf(id) === -1;\n          }),\n          files: state.files.filter(function (file) {\n            return action.payload.ids.indexOf(file.id) === -1;\n          }),\n          count: state.files.filter(function (file) {\n            return action.payload.ids.indexOf(file.id) === -1;\n          }).length\n        }));\n      }\n\n    case _GalleryActionTypes2.default.SORT_FILES:\n      {\n        var folders = state.files.filter(function (file) {\n          return file.type === 'folder';\n        });\n        var files = state.files.filter(function (file) {\n          return file.type !== 'folder';\n        });\n\n        return (0, _deepFreezeStrict2.default)(_extends({}, state, {\n          files: folders.sort(action.payload.comparator).concat(files.sort(action.payload.comparator))\n        }));\n      }\n\n    case _GalleryActionTypes2.default.LOAD_FOLDER_REQUEST:\n      {\n        return (0, _deepFreezeStrict2.default)(_extends({}, state, {\n          loadedfolderId: action.payload.folderId,\n          folderId: action.payload.folderId,\n          viewingFolder: action.payload.viewingFolder,\n          selectedFiles: [],\n          files: [],\n          count: 0,\n          loading: true\n        }));\n      }\n\n    case _GalleryActionTypes2.default.LOAD_FOLDER_SUCCESS:\n      {\n        return (0, _deepFreezeStrict2.default)(_extends({}, state, {\n          parentfolderId: action.payload.parentfolderId,\n          canEdit: action.payload.canEdit,\n          canDelete: action.payload.canDelete,\n          files: action.payload.files,\n          count: action.payload.files.length,\n          loading: false\n        }));\n      }\n\n    case _GalleryActionTypes2.default.ADD_FOLDER_REQUEST:\n      return state;\n\n    case _GalleryActionTypes2.default.ADD_FOLDER_FAILURE:\n      return state;\n\n    case _GalleryActionTypes2.default.ADD_FOLDER_SUCCESS:\n      return state;\n\n    case _GalleryActionTypes2.default.SET_FOLDER_PERMISSIONS:\n      {\n        return (0, _deepFreezeStrict2.default)(_extends({}, state, {\n          folderPermissions: {\n            canEdit: action.payload.canEdit,\n            canDelete: action.payload.canDelete\n          }\n        }));\n      }\n\n    default:\n      return state;\n  }\n}\n\n},{\"./GalleryActionTypes\":13,\"constants/index\":5,\"deep-freeze-strict\":\"deep-freeze-strict\"}],16:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  ADD_QUEUED_FILE: 'ADD_QUEUED_FILE',\n  FAIL_UPLOAD: 'FAIL_UPLOAD',\n  PURGE_UPLOAD_QUEUE: 'PURGE_UPLOAD_QUEUE',\n  REMOVE_QUEUED_FILE: 'REMOVE_QUEUED_FILE',\n  SUCCEED_UPLOAD: 'SUCCEED_UPLOAD',\n  UPDATE_QUEUED_FILE: 'UPDATE_QUEUED_FILE'\n};\n\n},{}],17:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.addQueuedFile = addQueuedFile;\nexports.failUpload = failUpload;\nexports.purgeUploadQueue = purgeUploadQueue;\nexports.removeQueuedFile = removeQueuedFile;\nexports.succeedUpload = succeedUpload;\nexports.updateQueuedFile = updateQueuedFile;\n\nvar _QueuedFilesActionTypes = require('./QueuedFilesActionTypes');\n\nvar _QueuedFilesActionTypes2 = _interopRequireDefault(_QueuedFilesActionTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction addQueuedFile(file) {\n  return function (dispatch) {\n    return dispatch({\n      type: _QueuedFilesActionTypes2.default.ADD_QUEUED_FILE,\n      payload: { file: file }\n    });\n  };\n}\n\nfunction failUpload(queuedAtTime) {\n  return function (dispatch) {\n    return dispatch({\n      type: _QueuedFilesActionTypes2.default.FAIL_UPLOAD,\n      payload: { queuedAtTime: queuedAtTime }\n    });\n  };\n}\n\nfunction purgeUploadQueue() {\n  return function (dispatch) {\n    return dispatch({\n      type: _QueuedFilesActionTypes2.default.PURGE_UPLOAD_QUEUE,\n      payload: null\n    });\n  };\n}\n\nfunction removeQueuedFile(queuedAtTime) {\n  return function (dispatch) {\n    return dispatch({\n      type: _QueuedFilesActionTypes2.default.REMOVE_QUEUED_FILE,\n      payload: { queuedAtTime: queuedAtTime }\n    });\n  };\n}\n\nfunction succeedUpload(queuedAtTime) {\n  return function (dispatch) {\n    return dispatch({\n      type: _QueuedFilesActionTypes2.default.SUCCEED_UPLOAD,\n      payload: { queuedAtTime: queuedAtTime }\n    });\n  };\n}\n\nfunction updateQueuedFile(queuedAtTime, updates) {\n  return function (dispatch) {\n    return dispatch({\n      type: _QueuedFilesActionTypes2.default.UPDATE_QUEUED_FILE,\n      payload: { queuedAtTime: queuedAtTime, updates: updates }\n    });\n  };\n}\n\n},{\"./QueuedFilesActionTypes\":16}],18:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _deepFreezeStrict = require('deep-freeze-strict');\n\nvar _deepFreezeStrict2 = _interopRequireDefault(_deepFreezeStrict);\n\nvar _QueuedFilesActionTypes = require('./QueuedFilesActionTypes');\n\nvar _QueuedFilesActionTypes2 = _interopRequireDefault(_QueuedFilesActionTypes);\n\nvar _i18n = require('i18n');\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction fileFactory() {\n  return (0, _deepFreezeStrict2.default)({\n    attributes: {\n      dimensions: {\n        height: null,\n        width: null\n      }\n    },\n    basename: null,\n    canDelete: false,\n    canEdit: false,\n    category: null,\n    created: null,\n    extension: null,\n    filename: null,\n    id: 0,\n    lastUpdated: null,\n    messages: null,\n    owner: {\n      id: 0,\n      title: null\n    },\n    parent: {\n      filename: null,\n      id: 0,\n      title: null\n    },\n    queuedAtTime: null,\n    size: null,\n    title: null,\n    type: null,\n    url: null,\n    xhr: null\n  });\n}\n\nvar initialState = {\n  items: []\n};\n\nfunction queuedFilesReducer() {\n  var state = arguments.length <= 0 || arguments[0] === undefined ? initialState : arguments[0];\n  var action = arguments[1];\n\n  switch (action.type) {\n\n    case _QueuedFilesActionTypes2.default.ADD_QUEUED_FILE:\n      return (0, _deepFreezeStrict2.default)(_extends({}, state, {\n        items: state.items.concat([_extends({}, fileFactory(), action.payload.file)])\n      }));\n\n    case _QueuedFilesActionTypes2.default.FAIL_UPLOAD:\n      return (0, _deepFreezeStrict2.default)(_extends({}, state, {\n        items: state.items.map(function (file) {\n          if (file.queuedAtTime === action.payload.queuedAtTime) {\n            return _extends({}, file, {\n              messages: [{\n                value: _i18n2.default._t('AssetGalleryField.DROPZONE_FAILED_UPLOAD'),\n                type: 'error',\n                extraClass: 'error'\n              }]\n            });\n          }\n\n          return file;\n        })\n      }));\n\n    case _QueuedFilesActionTypes2.default.PURGE_UPLOAD_QUEUE:\n      return (0, _deepFreezeStrict2.default)(_extends({}, state, {\n        items: state.items.filter(function (file) {\n          if (Array.isArray(file.messages)) {\n            return !file.messages.filter(function (message) {\n              return message.type === 'error' || message.type === 'success';\n            }).length > 0;\n          }\n\n          return true;\n        })\n      }));\n\n    case _QueuedFilesActionTypes2.default.REMOVE_QUEUED_FILE:\n      return (0, _deepFreezeStrict2.default)(_extends({}, state, {\n        items: state.items.filter(function (file) {\n          return file.queuedAtTime !== action.payload.queuedAtTime;\n        })\n      }));\n\n    case _QueuedFilesActionTypes2.default.SUCCEED_UPLOAD:\n      return (0, _deepFreezeStrict2.default)(_extends({}, state, {\n        items: state.items.map(function (file) {\n          if (file.queuedAtTime === action.payload.queuedAtTime) {\n            return _extends({}, file, {\n              messages: [{\n                value: _i18n2.default._t('AssetGalleryField.DROPZONE_SUCCESS_UPLOAD'),\n                type: 'success',\n                extraClass: 'success'\n              }]\n            });\n          }\n\n          return file;\n        })\n      }));\n\n    case _QueuedFilesActionTypes2.default.UPDATE_QUEUED_FILE:\n      return (0, _deepFreezeStrict2.default)(_extends({}, state, {\n        items: state.items.map(function (file) {\n          if (file.queuedAtTime === action.payload.queuedAtTime) {\n            return _extends({}, file, action.payload.updates);\n          }\n\n          return file;\n        })\n      }));\n\n    default:\n      return state;\n  }\n}\n\nexports.default = queuedFilesReducer;\n\n},{\"./QueuedFilesActionTypes\":16,\"deep-freeze-strict\":\"deep-freeze-strict\",\"i18n\":\"i18n\"}],19:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _redux = require('redux');\n\nvar _GalleryReducer = require('./gallery/GalleryReducer');\n\nvar _GalleryReducer2 = _interopRequireDefault(_GalleryReducer);\n\nvar _QueuedFilesReducer = require('./queuedFiles/QueuedFilesReducer');\n\nvar _QueuedFilesReducer2 = _interopRequireDefault(_QueuedFilesReducer);\n\nvar _EditorReducer = require('./editor/EditorReducer');\n\nvar _EditorReducer2 = _interopRequireDefault(_EditorReducer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar rootReducer = (0, _redux.combineReducers)({\n  assetAdmin: (0, _redux.combineReducers)({\n    gallery: _GalleryReducer2.default,\n    editor: _EditorReducer2.default,\n    queuedFiles: _QueuedFilesReducer2.default\n  })\n});\n\nexports.default = rootReducer;\n\n},{\"./editor/EditorReducer\":12,\"./gallery/GalleryReducer\":15,\"./queuedFiles/QueuedFilesReducer\":18,\"redux\":\"redux\"}],20:[function(require,module,exports){\n\n/*\n *\n * More info at [www.dropzonejs.com](http://www.dropzonejs.com)\n *\n * Copyright (c) 2012, Matias Meno\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n *\n */\n\n(function() {\n  var Dropzone, Emitter, camelize, contentLoaded, detectVerticalSquash, drawImageIOSFix, noop, without,\n    __slice = [].slice,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  noop = function() {};\n\n  Emitter = (function() {\n    function Emitter() {}\n\n    Emitter.prototype.addEventListener = Emitter.prototype.on;\n\n    Emitter.prototype.on = function(event, fn) {\n      this._callbacks = this._callbacks || {};\n      if (!this._callbacks[event]) {\n        this._callbacks[event] = [];\n      }\n      this._callbacks[event].push(fn);\n      return this;\n    };\n\n    Emitter.prototype.emit = function() {\n      var args, callback, callbacks, event, _i, _len;\n      event = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n      this._callbacks = this._callbacks || {};\n      callbacks = this._callbacks[event];\n      if (callbacks) {\n        for (_i = 0, _len = callbacks.length; _i < _len; _i++) {\n          callback = callbacks[_i];\n          callback.apply(this, args);\n        }\n      }\n      return this;\n    };\n\n    Emitter.prototype.removeListener = Emitter.prototype.off;\n\n    Emitter.prototype.removeAllListeners = Emitter.prototype.off;\n\n    Emitter.prototype.removeEventListener = Emitter.prototype.off;\n\n    Emitter.prototype.off = function(event, fn) {\n      var callback, callbacks, i, _i, _len;\n      if (!this._callbacks || arguments.length === 0) {\n        this._callbacks = {};\n        return this;\n      }\n      callbacks = this._callbacks[event];\n      if (!callbacks) {\n        return this;\n      }\n      if (arguments.length === 1) {\n        delete this._callbacks[event];\n        return this;\n      }\n      for (i = _i = 0, _len = callbacks.length; _i < _len; i = ++_i) {\n        callback = callbacks[i];\n        if (callback === fn) {\n          callbacks.splice(i, 1);\n          break;\n        }\n      }\n      return this;\n    };\n\n    return Emitter;\n\n  })();\n\n  Dropzone = (function(_super) {\n    var extend, resolveOption;\n\n    __extends(Dropzone, _super);\n\n    Dropzone.prototype.Emitter = Emitter;\n\n\n    /*\n    This is a list of all available events you can register on a dropzone object.\n    \n    You can register an event handler like this:\n    \n        dropzone.on(\"dragEnter\", function() { });\n     */\n\n    Dropzone.prototype.events = [\"drop\", \"dragstart\", \"dragend\", \"dragenter\", \"dragover\", \"dragleave\", \"addedfile\", \"addedfiles\", \"removedfile\", \"thumbnail\", \"error\", \"errormultiple\", \"processing\", \"processingmultiple\", \"uploadprogress\", \"totaluploadprogress\", \"sending\", \"sendingmultiple\", \"success\", \"successmultiple\", \"canceled\", \"canceledmultiple\", \"complete\", \"completemultiple\", \"reset\", \"maxfilesexceeded\", \"maxfilesreached\", \"queuecomplete\"];\n\n    Dropzone.prototype.defaultOptions = {\n      url: null,\n      method: \"post\",\n      withCredentials: false,\n      parallelUploads: 2,\n      uploadMultiple: false,\n      maxFilesize: 256,\n      paramName: \"file\",\n      createImageThumbnails: true,\n      maxThumbnailFilesize: 10,\n      thumbnailWidth: 120,\n      thumbnailHeight: 120,\n      filesizeBase: 1000,\n      maxFiles: null,\n      params: {},\n      clickable: true,\n      ignoreHiddenFiles: true,\n      acceptedFiles: null,\n      acceptedMimeTypes: null,\n      autoProcessQueue: true,\n      autoQueue: true,\n      addRemoveLinks: false,\n      previewsContainer: null,\n      hiddenInputContainer: \"body\",\n      capture: null,\n      renameFilename: null,\n      dictDefaultMessage: \"Drop files here to upload\",\n      dictFallbackMessage: \"Your browser does not support drag'n'drop file uploads.\",\n      dictFallbackText: \"Please use the fallback form below to upload your files like in the olden days.\",\n      dictFileTooBig: \"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.\",\n      dictInvalidFileType: \"You can't upload files of this type.\",\n      dictResponseError: \"Server responded with {{statusCode}} code.\",\n      dictCancelUpload: \"Cancel upload\",\n      dictCancelUploadConfirmation: \"Are you sure you want to cancel this upload?\",\n      dictRemoveFile: \"Remove file\",\n      dictRemoveFileConfirmation: null,\n      dictMaxFilesExceeded: \"You can not upload any more files.\",\n      accept: function(file, done) {\n        return done();\n      },\n      init: function() {\n        return noop;\n      },\n      forceFallback: false,\n      fallback: function() {\n        var child, messageElement, span, _i, _len, _ref;\n        this.element.className = \"\" + this.element.className + \" dz-browser-not-supported\";\n        _ref = this.element.getElementsByTagName(\"div\");\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          child = _ref[_i];\n          if (/(^| )dz-message($| )/.test(child.className)) {\n            messageElement = child;\n            child.className = \"dz-message\";\n            continue;\n          }\n        }\n        if (!messageElement) {\n          messageElement = Dropzone.createElement(\"<div class=\\\"dz-message\\\"><span></span></div>\");\n          this.element.appendChild(messageElement);\n        }\n        span = messageElement.getElementsByTagName(\"span\")[0];\n        if (span) {\n          if (span.textContent != null) {\n            span.textContent = this.options.dictFallbackMessage;\n          } else if (span.innerText != null) {\n            span.innerText = this.options.dictFallbackMessage;\n          }\n        }\n        return this.element.appendChild(this.getFallbackForm());\n      },\n      resize: function(file) {\n        var info, srcRatio, trgRatio;\n        info = {\n          srcX: 0,\n          srcY: 0,\n          srcWidth: file.width,\n          srcHeight: file.height\n        };\n        srcRatio = file.width / file.height;\n        info.optWidth = this.options.thumbnailWidth;\n        info.optHeight = this.options.thumbnailHeight;\n        if ((info.optWidth == null) && (info.optHeight == null)) {\n          info.optWidth = info.srcWidth;\n          info.optHeight = info.srcHeight;\n        } else if (info.optWidth == null) {\n          info.optWidth = srcRatio * info.optHeight;\n        } else if (info.optHeight == null) {\n          info.optHeight = (1 / srcRatio) * info.optWidth;\n        }\n        trgRatio = info.optWidth / info.optHeight;\n        if (file.height < info.optHeight || file.width < info.optWidth) {\n          info.trgHeight = info.srcHeight;\n          info.trgWidth = info.srcWidth;\n        } else {\n          if (srcRatio > trgRatio) {\n            info.srcHeight = file.height;\n            info.srcWidth = info.srcHeight * trgRatio;\n          } else {\n            info.srcWidth = file.width;\n            info.srcHeight = info.srcWidth / trgRatio;\n          }\n        }\n        info.srcX = (file.width - info.srcWidth) / 2;\n        info.srcY = (file.height - info.srcHeight) / 2;\n        return info;\n      },\n\n      /*\n      Those functions register themselves to the events on init and handle all\n      the user interface specific stuff. Overwriting them won't break the upload\n      but can break the way it's displayed.\n      You can overwrite them if you don't like the default behavior. If you just\n      want to add an additional event handler, register it on the dropzone object\n      and don't overwrite those options.\n       */\n      drop: function(e) {\n        return this.element.classList.remove(\"dz-drag-hover\");\n      },\n      dragstart: noop,\n      dragend: function(e) {\n        return this.element.classList.remove(\"dz-drag-hover\");\n      },\n      dragenter: function(e) {\n        return this.element.classList.add(\"dz-drag-hover\");\n      },\n      dragover: function(e) {\n        return this.element.classList.add(\"dz-drag-hover\");\n      },\n      dragleave: function(e) {\n        return this.element.classList.remove(\"dz-drag-hover\");\n      },\n      paste: noop,\n      reset: function() {\n        return this.element.classList.remove(\"dz-started\");\n      },\n      addedfile: function(file) {\n        var node, removeFileEvent, removeLink, _i, _j, _k, _len, _len1, _len2, _ref, _ref1, _ref2, _results;\n        if (this.element === this.previewsContainer) {\n          this.element.classList.add(\"dz-started\");\n        }\n        if (this.previewsContainer) {\n          file.previewElement = Dropzone.createElement(this.options.previewTemplate.trim());\n          file.previewTemplate = file.previewElement;\n          this.previewsContainer.appendChild(file.previewElement);\n          _ref = file.previewElement.querySelectorAll(\"[data-dz-name]\");\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            node = _ref[_i];\n            node.textContent = this._renameFilename(file.name);\n          }\n          _ref1 = file.previewElement.querySelectorAll(\"[data-dz-size]\");\n          for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {\n            node = _ref1[_j];\n            node.innerHTML = this.filesize(file.size);\n          }\n          if (this.options.addRemoveLinks) {\n            file._removeLink = Dropzone.createElement(\"<a class=\\\"dz-remove\\\" href=\\\"javascript:undefined;\\\" data-dz-remove>\" + this.options.dictRemoveFile + \"</a>\");\n            file.previewElement.appendChild(file._removeLink);\n          }\n          removeFileEvent = (function(_this) {\n            return function(e) {\n              e.preventDefault();\n              e.stopPropagation();\n              if (file.status === Dropzone.UPLOADING) {\n                return Dropzone.confirm(_this.options.dictCancelUploadConfirmation, function() {\n                  return _this.removeFile(file);\n                });\n              } else {\n                if (_this.options.dictRemoveFileConfirmation) {\n                  return Dropzone.confirm(_this.options.dictRemoveFileConfirmation, function() {\n                    return _this.removeFile(file);\n                  });\n                } else {\n                  return _this.removeFile(file);\n                }\n              }\n            };\n          })(this);\n          _ref2 = file.previewElement.querySelectorAll(\"[data-dz-remove]\");\n          _results = [];\n          for (_k = 0, _len2 = _ref2.length; _k < _len2; _k++) {\n            removeLink = _ref2[_k];\n            _results.push(removeLink.addEventListener(\"click\", removeFileEvent));\n          }\n          return _results;\n        }\n      },\n      removedfile: function(file) {\n        var _ref;\n        if (file.previewElement) {\n          if ((_ref = file.previewElement) != null) {\n            _ref.parentNode.removeChild(file.previewElement);\n          }\n        }\n        return this._updateMaxFilesReachedClass();\n      },\n      thumbnail: function(file, dataUrl) {\n        var thumbnailElement, _i, _len, _ref;\n        if (file.previewElement) {\n          file.previewElement.classList.remove(\"dz-file-preview\");\n          _ref = file.previewElement.querySelectorAll(\"[data-dz-thumbnail]\");\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            thumbnailElement = _ref[_i];\n            thumbnailElement.alt = file.name;\n            thumbnailElement.src = dataUrl;\n          }\n          return setTimeout(((function(_this) {\n            return function() {\n              return file.previewElement.classList.add(\"dz-image-preview\");\n            };\n          })(this)), 1);\n        }\n      },\n      error: function(file, message) {\n        var node, _i, _len, _ref, _results;\n        if (file.previewElement) {\n          file.previewElement.classList.add(\"dz-error\");\n          if (typeof message !== \"String\" && message.error) {\n            message = message.error;\n          }\n          _ref = file.previewElement.querySelectorAll(\"[data-dz-errormessage]\");\n          _results = [];\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            node = _ref[_i];\n            _results.push(node.textContent = message);\n          }\n          return _results;\n        }\n      },\n      errormultiple: noop,\n      processing: function(file) {\n        if (file.previewElement) {\n          file.previewElement.classList.add(\"dz-processing\");\n          if (file._removeLink) {\n            return file._removeLink.textContent = this.options.dictCancelUpload;\n          }\n        }\n      },\n      processingmultiple: noop,\n      uploadprogress: function(file, progress, bytesSent) {\n        var node, _i, _len, _ref, _results;\n        if (file.previewElement) {\n          _ref = file.previewElement.querySelectorAll(\"[data-dz-uploadprogress]\");\n          _results = [];\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            node = _ref[_i];\n            if (node.nodeName === 'PROGRESS') {\n              _results.push(node.value = progress);\n            } else {\n              _results.push(node.style.width = \"\" + progress + \"%\");\n            }\n          }\n          return _results;\n        }\n      },\n      totaluploadprogress: noop,\n      sending: noop,\n      sendingmultiple: noop,\n      success: function(file) {\n        if (file.previewElement) {\n          return file.previewElement.classList.add(\"dz-success\");\n        }\n      },\n      successmultiple: noop,\n      canceled: function(file) {\n        return this.emit(\"error\", file, \"Upload canceled.\");\n      },\n      canceledmultiple: noop,\n      complete: function(file) {\n        if (file._removeLink) {\n          file._removeLink.textContent = this.options.dictRemoveFile;\n        }\n        if (file.previewElement) {\n          return file.previewElement.classList.add(\"dz-complete\");\n        }\n      },\n      completemultiple: noop,\n      maxfilesexceeded: noop,\n      maxfilesreached: noop,\n      queuecomplete: noop,\n      addedfiles: noop,\n      previewTemplate: \"<div class=\\\"dz-preview dz-file-preview\\\">\\n  <div class=\\\"dz-image\\\"><img data-dz-thumbnail /></div>\\n  <div class=\\\"dz-details\\\">\\n    <div class=\\\"dz-size\\\"><span data-dz-size></span></div>\\n    <div class=\\\"dz-filename\\\"><span data-dz-name></span></div>\\n  </div>\\n  <div class=\\\"dz-progress\\\"><span class=\\\"dz-upload\\\" data-dz-uploadprogress></span></div>\\n  <div class=\\\"dz-error-message\\\"><span data-dz-errormessage></span></div>\\n  <div class=\\\"dz-success-mark\\\">\\n    <svg width=\\\"54px\\\" height=\\\"54px\\\" viewBox=\\\"0 0 54 54\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" xmlns:sketch=\\\"http://www.bohemiancoding.com/sketch/ns\\\">\\n      <title>Check</title>\\n      <defs></defs>\\n      <g id=\\\"Page-1\\\" stroke=\\\"none\\\" stroke-width=\\\"1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\" sketch:type=\\\"MSPage\\\">\\n        <path d=\\\"M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\\\" id=\\\"Oval-2\\\" stroke-opacity=\\\"0.198794158\\\" stroke=\\\"#747474\\\" fill-opacity=\\\"0.816519475\\\" fill=\\\"#FFFFFF\\\" sketch:type=\\\"MSShapeGroup\\\"></path>\\n      </g>\\n    </svg>\\n  </div>\\n  <div class=\\\"dz-error-mark\\\">\\n    <svg width=\\\"54px\\\" height=\\\"54px\\\" viewBox=\\\"0 0 54 54\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" xmlns:sketch=\\\"http://www.bohemiancoding.com/sketch/ns\\\">\\n      <title>Error</title>\\n      <defs></defs>\\n      <g id=\\\"Page-1\\\" stroke=\\\"none\\\" stroke-width=\\\"1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\" sketch:type=\\\"MSPage\\\">\\n        <g id=\\\"Check-+-Oval-2\\\" sketch:type=\\\"MSLayerGroup\\\" stroke=\\\"#747474\\\" stroke-opacity=\\\"0.198794158\\\" fill=\\\"#FFFFFF\\\" fill-opacity=\\\"0.816519475\\\">\\n          <path d=\\\"M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\\\" id=\\\"Oval-2\\\" sketch:type=\\\"MSShapeGroup\\\"></path>\\n        </g>\\n      </g>\\n    </svg>\\n  </div>\\n</div>\"\n    };\n\n    extend = function() {\n      var key, object, objects, target, val, _i, _len;\n      target = arguments[0], objects = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n      for (_i = 0, _len = objects.length; _i < _len; _i++) {\n        object = objects[_i];\n        for (key in object) {\n          val = object[key];\n          target[key] = val;\n        }\n      }\n      return target;\n    };\n\n    function Dropzone(element, options) {\n      var elementOptions, fallback, _ref;\n      this.element = element;\n      this.version = Dropzone.version;\n      this.defaultOptions.previewTemplate = this.defaultOptions.previewTemplate.replace(/\\n*/g, \"\");\n      this.clickableElements = [];\n      this.listeners = [];\n      this.files = [];\n      if (typeof this.element === \"string\") {\n        this.element = document.querySelector(this.element);\n      }\n      if (!(this.element && (this.element.nodeType != null))) {\n        throw new Error(\"Invalid dropzone element.\");\n      }\n      if (this.element.dropzone) {\n        throw new Error(\"Dropzone already attached.\");\n      }\n      Dropzone.instances.push(this);\n      this.element.dropzone = this;\n      elementOptions = (_ref = Dropzone.optionsForElement(this.element)) != null ? _ref : {};\n      this.options = extend({}, this.defaultOptions, elementOptions, options != null ? options : {});\n      if (this.options.forceFallback || !Dropzone.isBrowserSupported()) {\n        return this.options.fallback.call(this);\n      }\n      if (this.options.url == null) {\n        this.options.url = this.element.getAttribute(\"action\");\n      }\n      if (!this.options.url) {\n        throw new Error(\"No URL provided.\");\n      }\n      if (this.options.acceptedFiles && this.options.acceptedMimeTypes) {\n        throw new Error(\"You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.\");\n      }\n      if (this.options.acceptedMimeTypes) {\n        this.options.acceptedFiles = this.options.acceptedMimeTypes;\n        delete this.options.acceptedMimeTypes;\n      }\n      this.options.method = this.options.method.toUpperCase();\n      if ((fallback = this.getExistingFallback()) && fallback.parentNode) {\n        fallback.parentNode.removeChild(fallback);\n      }\n      if (this.options.previewsContainer !== false) {\n        if (this.options.previewsContainer) {\n          this.previewsContainer = Dropzone.getElement(this.options.previewsContainer, \"previewsContainer\");\n        } else {\n          this.previewsContainer = this.element;\n        }\n      }\n      if (this.options.clickable) {\n        if (this.options.clickable === true) {\n          this.clickableElements = [this.element];\n        } else {\n          this.clickableElements = Dropzone.getElements(this.options.clickable, \"clickable\");\n        }\n      }\n      this.init();\n    }\n\n    Dropzone.prototype.getAcceptedFiles = function() {\n      var file, _i, _len, _ref, _results;\n      _ref = this.files;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        file = _ref[_i];\n        if (file.accepted) {\n          _results.push(file);\n        }\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.getRejectedFiles = function() {\n      var file, _i, _len, _ref, _results;\n      _ref = this.files;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        file = _ref[_i];\n        if (!file.accepted) {\n          _results.push(file);\n        }\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.getFilesWithStatus = function(status) {\n      var file, _i, _len, _ref, _results;\n      _ref = this.files;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        file = _ref[_i];\n        if (file.status === status) {\n          _results.push(file);\n        }\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.getQueuedFiles = function() {\n      return this.getFilesWithStatus(Dropzone.QUEUED);\n    };\n\n    Dropzone.prototype.getUploadingFiles = function() {\n      return this.getFilesWithStatus(Dropzone.UPLOADING);\n    };\n\n    Dropzone.prototype.getAddedFiles = function() {\n      return this.getFilesWithStatus(Dropzone.ADDED);\n    };\n\n    Dropzone.prototype.getActiveFiles = function() {\n      var file, _i, _len, _ref, _results;\n      _ref = this.files;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        file = _ref[_i];\n        if (file.status === Dropzone.UPLOADING || file.status === Dropzone.QUEUED) {\n          _results.push(file);\n        }\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.init = function() {\n      var eventName, noPropagation, setupHiddenFileInput, _i, _len, _ref, _ref1;\n      if (this.element.tagName === \"form\") {\n        this.element.setAttribute(\"enctype\", \"multipart/form-data\");\n      }\n      if (this.element.classList.contains(\"dropzone\") && !this.element.querySelector(\".dz-message\")) {\n        this.element.appendChild(Dropzone.createElement(\"<div class=\\\"dz-default dz-message\\\"><span>\" + this.options.dictDefaultMessage + \"</span></div>\"));\n      }\n      if (this.clickableElements.length) {\n        setupHiddenFileInput = (function(_this) {\n          return function() {\n            if (_this.hiddenFileInput) {\n              _this.hiddenFileInput.parentNode.removeChild(_this.hiddenFileInput);\n            }\n            _this.hiddenFileInput = document.createElement(\"input\");\n            _this.hiddenFileInput.setAttribute(\"type\", \"file\");\n            if ((_this.options.maxFiles == null) || _this.options.maxFiles > 1) {\n              _this.hiddenFileInput.setAttribute(\"multiple\", \"multiple\");\n            }\n            _this.hiddenFileInput.className = \"dz-hidden-input\";\n            if (_this.options.acceptedFiles != null) {\n              _this.hiddenFileInput.setAttribute(\"accept\", _this.options.acceptedFiles);\n            }\n            if (_this.options.capture != null) {\n              _this.hiddenFileInput.setAttribute(\"capture\", _this.options.capture);\n            }\n            _this.hiddenFileInput.style.visibility = \"hidden\";\n            _this.hiddenFileInput.style.position = \"absolute\";\n            _this.hiddenFileInput.style.top = \"0\";\n            _this.hiddenFileInput.style.left = \"0\";\n            _this.hiddenFileInput.style.height = \"0\";\n            _this.hiddenFileInput.style.width = \"0\";\n            document.querySelector(_this.options.hiddenInputContainer).appendChild(_this.hiddenFileInput);\n            return _this.hiddenFileInput.addEventListener(\"change\", function() {\n              var file, files, _i, _len;\n              files = _this.hiddenFileInput.files;\n              if (files.length) {\n                for (_i = 0, _len = files.length; _i < _len; _i++) {\n                  file = files[_i];\n                  _this.addFile(file);\n                }\n              }\n              _this.emit(\"addedfiles\", files);\n              return setupHiddenFileInput();\n            });\n          };\n        })(this);\n        setupHiddenFileInput();\n      }\n      this.URL = (_ref = window.URL) != null ? _ref : window.webkitURL;\n      _ref1 = this.events;\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        eventName = _ref1[_i];\n        this.on(eventName, this.options[eventName]);\n      }\n      this.on(\"uploadprogress\", (function(_this) {\n        return function() {\n          return _this.updateTotalUploadProgress();\n        };\n      })(this));\n      this.on(\"removedfile\", (function(_this) {\n        return function() {\n          return _this.updateTotalUploadProgress();\n        };\n      })(this));\n      this.on(\"canceled\", (function(_this) {\n        return function(file) {\n          return _this.emit(\"complete\", file);\n        };\n      })(this));\n      this.on(\"complete\", (function(_this) {\n        return function(file) {\n          if (_this.getAddedFiles().length === 0 && _this.getUploadingFiles().length === 0 && _this.getQueuedFiles().length === 0) {\n            return setTimeout((function() {\n              return _this.emit(\"queuecomplete\");\n            }), 0);\n          }\n        };\n      })(this));\n      noPropagation = function(e) {\n        e.stopPropagation();\n        if (e.preventDefault) {\n          return e.preventDefault();\n        } else {\n          return e.returnValue = false;\n        }\n      };\n      this.listeners = [\n        {\n          element: this.element,\n          events: {\n            \"dragstart\": (function(_this) {\n              return function(e) {\n                return _this.emit(\"dragstart\", e);\n              };\n            })(this),\n            \"dragenter\": (function(_this) {\n              return function(e) {\n                noPropagation(e);\n                return _this.emit(\"dragenter\", e);\n              };\n            })(this),\n            \"dragover\": (function(_this) {\n              return function(e) {\n                var efct;\n                try {\n                  efct = e.dataTransfer.effectAllowed;\n                } catch (_error) {}\n                e.dataTransfer.dropEffect = 'move' === efct || 'linkMove' === efct ? 'move' : 'copy';\n                noPropagation(e);\n                return _this.emit(\"dragover\", e);\n              };\n            })(this),\n            \"dragleave\": (function(_this) {\n              return function(e) {\n                return _this.emit(\"dragleave\", e);\n              };\n            })(this),\n            \"drop\": (function(_this) {\n              return function(e) {\n                noPropagation(e);\n                return _this.drop(e);\n              };\n            })(this),\n            \"dragend\": (function(_this) {\n              return function(e) {\n                return _this.emit(\"dragend\", e);\n              };\n            })(this)\n          }\n        }\n      ];\n      this.clickableElements.forEach((function(_this) {\n        return function(clickableElement) {\n          return _this.listeners.push({\n            element: clickableElement,\n            events: {\n              \"click\": function(evt) {\n                if ((clickableElement !== _this.element) || (evt.target === _this.element || Dropzone.elementInside(evt.target, _this.element.querySelector(\".dz-message\")))) {\n                  _this.hiddenFileInput.click();\n                }\n                return true;\n              }\n            }\n          });\n        };\n      })(this));\n      this.enable();\n      return this.options.init.call(this);\n    };\n\n    Dropzone.prototype.destroy = function() {\n      var _ref;\n      this.disable();\n      this.removeAllFiles(true);\n      if ((_ref = this.hiddenFileInput) != null ? _ref.parentNode : void 0) {\n        this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput);\n        this.hiddenFileInput = null;\n      }\n      delete this.element.dropzone;\n      return Dropzone.instances.splice(Dropzone.instances.indexOf(this), 1);\n    };\n\n    Dropzone.prototype.updateTotalUploadProgress = function() {\n      var activeFiles, file, totalBytes, totalBytesSent, totalUploadProgress, _i, _len, _ref;\n      totalBytesSent = 0;\n      totalBytes = 0;\n      activeFiles = this.getActiveFiles();\n      if (activeFiles.length) {\n        _ref = this.getActiveFiles();\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          file = _ref[_i];\n          totalBytesSent += file.upload.bytesSent;\n          totalBytes += file.upload.total;\n        }\n        totalUploadProgress = 100 * totalBytesSent / totalBytes;\n      } else {\n        totalUploadProgress = 100;\n      }\n      return this.emit(\"totaluploadprogress\", totalUploadProgress, totalBytes, totalBytesSent);\n    };\n\n    Dropzone.prototype._getParamName = function(n) {\n      if (typeof this.options.paramName === \"function\") {\n        return this.options.paramName(n);\n      } else {\n        return \"\" + this.options.paramName + (this.options.uploadMultiple ? \"[\" + n + \"]\" : \"\");\n      }\n    };\n\n    Dropzone.prototype._renameFilename = function(name) {\n      if (typeof this.options.renameFilename !== \"function\") {\n        return name;\n      }\n      return this.options.renameFilename(name);\n    };\n\n    Dropzone.prototype.getFallbackForm = function() {\n      var existingFallback, fields, fieldsString, form;\n      if (existingFallback = this.getExistingFallback()) {\n        return existingFallback;\n      }\n      fieldsString = \"<div class=\\\"dz-fallback\\\">\";\n      if (this.options.dictFallbackText) {\n        fieldsString += \"<p>\" + this.options.dictFallbackText + \"</p>\";\n      }\n      fieldsString += \"<input type=\\\"file\\\" name=\\\"\" + (this._getParamName(0)) + \"\\\" \" + (this.options.uploadMultiple ? 'multiple=\"multiple\"' : void 0) + \" /><input type=\\\"submit\\\" value=\\\"Upload!\\\"></div>\";\n      fields = Dropzone.createElement(fieldsString);\n      if (this.element.tagName !== \"FORM\") {\n        form = Dropzone.createElement(\"<form action=\\\"\" + this.options.url + \"\\\" enctype=\\\"multipart/form-data\\\" method=\\\"\" + this.options.method + \"\\\"></form>\");\n        form.appendChild(fields);\n      } else {\n        this.element.setAttribute(\"enctype\", \"multipart/form-data\");\n        this.element.setAttribute(\"method\", this.options.method);\n      }\n      return form != null ? form : fields;\n    };\n\n    Dropzone.prototype.getExistingFallback = function() {\n      var fallback, getFallback, tagName, _i, _len, _ref;\n      getFallback = function(elements) {\n        var el, _i, _len;\n        for (_i = 0, _len = elements.length; _i < _len; _i++) {\n          el = elements[_i];\n          if (/(^| )fallback($| )/.test(el.className)) {\n            return el;\n          }\n        }\n      };\n      _ref = [\"div\", \"form\"];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        tagName = _ref[_i];\n        if (fallback = getFallback(this.element.getElementsByTagName(tagName))) {\n          return fallback;\n        }\n      }\n    };\n\n    Dropzone.prototype.setupEventListeners = function() {\n      var elementListeners, event, listener, _i, _len, _ref, _results;\n      _ref = this.listeners;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        elementListeners = _ref[_i];\n        _results.push((function() {\n          var _ref1, _results1;\n          _ref1 = elementListeners.events;\n          _results1 = [];\n          for (event in _ref1) {\n            listener = _ref1[event];\n            _results1.push(elementListeners.element.addEventListener(event, listener, false));\n          }\n          return _results1;\n        })());\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.removeEventListeners = function() {\n      var elementListeners, event, listener, _i, _len, _ref, _results;\n      _ref = this.listeners;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        elementListeners = _ref[_i];\n        _results.push((function() {\n          var _ref1, _results1;\n          _ref1 = elementListeners.events;\n          _results1 = [];\n          for (event in _ref1) {\n            listener = _ref1[event];\n            _results1.push(elementListeners.element.removeEventListener(event, listener, false));\n          }\n          return _results1;\n        })());\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.disable = function() {\n      var file, _i, _len, _ref, _results;\n      this.clickableElements.forEach(function(element) {\n        return element.classList.remove(\"dz-clickable\");\n      });\n      this.removeEventListeners();\n      _ref = this.files;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        file = _ref[_i];\n        _results.push(this.cancelUpload(file));\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.enable = function() {\n      this.clickableElements.forEach(function(element) {\n        return element.classList.add(\"dz-clickable\");\n      });\n      return this.setupEventListeners();\n    };\n\n    Dropzone.prototype.filesize = function(size) {\n      var cutoff, i, selectedSize, selectedUnit, unit, units, _i, _len;\n      selectedSize = 0;\n      selectedUnit = \"b\";\n      if (size > 0) {\n        units = ['TB', 'GB', 'MB', 'KB', 'b'];\n        for (i = _i = 0, _len = units.length; _i < _len; i = ++_i) {\n          unit = units[i];\n          cutoff = Math.pow(this.options.filesizeBase, 4 - i) / 10;\n          if (size >= cutoff) {\n            selectedSize = size / Math.pow(this.options.filesizeBase, 4 - i);\n            selectedUnit = unit;\n            break;\n          }\n        }\n        selectedSize = Math.round(10 * selectedSize) / 10;\n      }\n      return \"<strong>\" + selectedSize + \"</strong> \" + selectedUnit;\n    };\n\n    Dropzone.prototype._updateMaxFilesReachedClass = function() {\n      if ((this.options.maxFiles != null) && this.getAcceptedFiles().length >= this.options.maxFiles) {\n        if (this.getAcceptedFiles().length === this.options.maxFiles) {\n          this.emit('maxfilesreached', this.files);\n        }\n        return this.element.classList.add(\"dz-max-files-reached\");\n      } else {\n        return this.element.classList.remove(\"dz-max-files-reached\");\n      }\n    };\n\n    Dropzone.prototype.drop = function(e) {\n      var files, items;\n      if (!e.dataTransfer) {\n        return;\n      }\n      this.emit(\"drop\", e);\n      files = e.dataTransfer.files;\n      this.emit(\"addedfiles\", files);\n      if (files.length) {\n        items = e.dataTransfer.items;\n        if (items && items.length && (items[0].webkitGetAsEntry != null)) {\n          this._addFilesFromItems(items);\n        } else {\n          this.handleFiles(files);\n        }\n      }\n    };\n\n    Dropzone.prototype.paste = function(e) {\n      var items, _ref;\n      if ((e != null ? (_ref = e.clipboardData) != null ? _ref.items : void 0 : void 0) == null) {\n        return;\n      }\n      this.emit(\"paste\", e);\n      items = e.clipboardData.items;\n      if (items.length) {\n        return this._addFilesFromItems(items);\n      }\n    };\n\n    Dropzone.prototype.handleFiles = function(files) {\n      var file, _i, _len, _results;\n      _results = [];\n      for (_i = 0, _len = files.length; _i < _len; _i++) {\n        file = files[_i];\n        _results.push(this.addFile(file));\n      }\n      return _results;\n    };\n\n    Dropzone.prototype._addFilesFromItems = function(items) {\n      var entry, item, _i, _len, _results;\n      _results = [];\n      for (_i = 0, _len = items.length; _i < _len; _i++) {\n        item = items[_i];\n        if ((item.webkitGetAsEntry != null) && (entry = item.webkitGetAsEntry())) {\n          if (entry.isFile) {\n            _results.push(this.addFile(item.getAsFile()));\n          } else if (entry.isDirectory) {\n            _results.push(this._addFilesFromDirectory(entry, entry.name));\n          } else {\n            _results.push(void 0);\n          }\n        } else if (item.getAsFile != null) {\n          if ((item.kind == null) || item.kind === \"file\") {\n            _results.push(this.addFile(item.getAsFile()));\n          } else {\n            _results.push(void 0);\n          }\n        } else {\n          _results.push(void 0);\n        }\n      }\n      return _results;\n    };\n\n    Dropzone.prototype._addFilesFromDirectory = function(directory, path) {\n      var dirReader, errorHandler, readEntries;\n      dirReader = directory.createReader();\n      errorHandler = function(error) {\n        return typeof console !== \"undefined\" && console !== null ? typeof console.log === \"function\" ? console.log(error) : void 0 : void 0;\n      };\n      readEntries = (function(_this) {\n        return function() {\n          return dirReader.readEntries(function(entries) {\n            var entry, _i, _len;\n            if (entries.length > 0) {\n              for (_i = 0, _len = entries.length; _i < _len; _i++) {\n                entry = entries[_i];\n                if (entry.isFile) {\n                  entry.file(function(file) {\n                    if (_this.options.ignoreHiddenFiles && file.name.substring(0, 1) === '.') {\n                      return;\n                    }\n                    file.fullPath = \"\" + path + \"/\" + file.name;\n                    return _this.addFile(file);\n                  });\n                } else if (entry.isDirectory) {\n                  _this._addFilesFromDirectory(entry, \"\" + path + \"/\" + entry.name);\n                }\n              }\n              readEntries();\n            }\n            return null;\n          }, errorHandler);\n        };\n      })(this);\n      return readEntries();\n    };\n\n    Dropzone.prototype.accept = function(file, done) {\n      if (file.size > this.options.maxFilesize * 1024 * 1024) {\n        return done(this.options.dictFileTooBig.replace(\"{{filesize}}\", Math.round(file.size / 1024 / 10.24) / 100).replace(\"{{maxFilesize}}\", this.options.maxFilesize));\n      } else if (!Dropzone.isValidFile(file, this.options.acceptedFiles)) {\n        return done(this.options.dictInvalidFileType);\n      } else if ((this.options.maxFiles != null) && this.getAcceptedFiles().length >= this.options.maxFiles) {\n        done(this.options.dictMaxFilesExceeded.replace(\"{{maxFiles}}\", this.options.maxFiles));\n        return this.emit(\"maxfilesexceeded\", file);\n      } else {\n        return this.options.accept.call(this, file, done);\n      }\n    };\n\n    Dropzone.prototype.addFile = function(file) {\n      file.upload = {\n        progress: 0,\n        total: file.size,\n        bytesSent: 0\n      };\n      this.files.push(file);\n      file.status = Dropzone.ADDED;\n      this.emit(\"addedfile\", file);\n      this._enqueueThumbnail(file);\n      return this.accept(file, (function(_this) {\n        return function(error) {\n          if (error) {\n            file.accepted = false;\n            _this._errorProcessing([file], error);\n          } else {\n            file.accepted = true;\n            if (_this.options.autoQueue) {\n              _this.enqueueFile(file);\n            }\n          }\n          return _this._updateMaxFilesReachedClass();\n        };\n      })(this));\n    };\n\n    Dropzone.prototype.enqueueFiles = function(files) {\n      var file, _i, _len;\n      for (_i = 0, _len = files.length; _i < _len; _i++) {\n        file = files[_i];\n        this.enqueueFile(file);\n      }\n      return null;\n    };\n\n    Dropzone.prototype.enqueueFile = function(file) {\n      if (file.status === Dropzone.ADDED && file.accepted === true) {\n        file.status = Dropzone.QUEUED;\n        if (this.options.autoProcessQueue) {\n          return setTimeout(((function(_this) {\n            return function() {\n              return _this.processQueue();\n            };\n          })(this)), 0);\n        }\n      } else {\n        throw new Error(\"This file can't be queued because it has already been processed or was rejected.\");\n      }\n    };\n\n    Dropzone.prototype._thumbnailQueue = [];\n\n    Dropzone.prototype._processingThumbnail = false;\n\n    Dropzone.prototype._enqueueThumbnail = function(file) {\n      if (this.options.createImageThumbnails && file.type.match(/image.*/) && file.size <= this.options.maxThumbnailFilesize * 1024 * 1024) {\n        this._thumbnailQueue.push(file);\n        return setTimeout(((function(_this) {\n          return function() {\n            return _this._processThumbnailQueue();\n          };\n        })(this)), 0);\n      }\n    };\n\n    Dropzone.prototype._processThumbnailQueue = function() {\n      if (this._processingThumbnail || this._thumbnailQueue.length === 0) {\n        return;\n      }\n      this._processingThumbnail = true;\n      return this.createThumbnail(this._thumbnailQueue.shift(), (function(_this) {\n        return function() {\n          _this._processingThumbnail = false;\n          return _this._processThumbnailQueue();\n        };\n      })(this));\n    };\n\n    Dropzone.prototype.removeFile = function(file) {\n      if (file.status === Dropzone.UPLOADING) {\n        this.cancelUpload(file);\n      }\n      this.files = without(this.files, file);\n      this.emit(\"removedfile\", file);\n      if (this.files.length === 0) {\n        return this.emit(\"reset\");\n      }\n    };\n\n    Dropzone.prototype.removeAllFiles = function(cancelIfNecessary) {\n      var file, _i, _len, _ref;\n      if (cancelIfNecessary == null) {\n        cancelIfNecessary = false;\n      }\n      _ref = this.files.slice();\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        file = _ref[_i];\n        if (file.status !== Dropzone.UPLOADING || cancelIfNecessary) {\n          this.removeFile(file);\n        }\n      }\n      return null;\n    };\n\n    Dropzone.prototype.createThumbnail = function(file, callback) {\n      var fileReader;\n      fileReader = new FileReader;\n      fileReader.onload = (function(_this) {\n        return function() {\n          if (file.type === \"image/svg+xml\") {\n            _this.emit(\"thumbnail\", file, fileReader.result);\n            if (callback != null) {\n              callback();\n            }\n            return;\n          }\n          return _this.createThumbnailFromUrl(file, fileReader.result, callback);\n        };\n      })(this);\n      return fileReader.readAsDataURL(file);\n    };\n\n    Dropzone.prototype.createThumbnailFromUrl = function(file, imageUrl, callback, crossOrigin) {\n      var img;\n      img = document.createElement(\"img\");\n      if (crossOrigin) {\n        img.crossOrigin = crossOrigin;\n      }\n      img.onload = (function(_this) {\n        return function() {\n          var canvas, ctx, resizeInfo, thumbnail, _ref, _ref1, _ref2, _ref3;\n          file.width = img.width;\n          file.height = img.height;\n          resizeInfo = _this.options.resize.call(_this, file);\n          if (resizeInfo.trgWidth == null) {\n            resizeInfo.trgWidth = resizeInfo.optWidth;\n          }\n          if (resizeInfo.trgHeight == null) {\n            resizeInfo.trgHeight = resizeInfo.optHeight;\n          }\n          canvas = document.createElement(\"canvas\");\n          ctx = canvas.getContext(\"2d\");\n          canvas.width = resizeInfo.trgWidth;\n          canvas.height = resizeInfo.trgHeight;\n          drawImageIOSFix(ctx, img, (_ref = resizeInfo.srcX) != null ? _ref : 0, (_ref1 = resizeInfo.srcY) != null ? _ref1 : 0, resizeInfo.srcWidth, resizeInfo.srcHeight, (_ref2 = resizeInfo.trgX) != null ? _ref2 : 0, (_ref3 = resizeInfo.trgY) != null ? _ref3 : 0, resizeInfo.trgWidth, resizeInfo.trgHeight);\n          thumbnail = canvas.toDataURL(\"image/png\");\n          _this.emit(\"thumbnail\", file, thumbnail);\n          if (callback != null) {\n            return callback();\n          }\n        };\n      })(this);\n      if (callback != null) {\n        img.onerror = callback;\n      }\n      return img.src = imageUrl;\n    };\n\n    Dropzone.prototype.processQueue = function() {\n      var i, parallelUploads, processingLength, queuedFiles;\n      parallelUploads = this.options.parallelUploads;\n      processingLength = this.getUploadingFiles().length;\n      i = processingLength;\n      if (processingLength >= parallelUploads) {\n        return;\n      }\n      queuedFiles = this.getQueuedFiles();\n      if (!(queuedFiles.length > 0)) {\n        return;\n      }\n      if (this.options.uploadMultiple) {\n        return this.processFiles(queuedFiles.slice(0, parallelUploads - processingLength));\n      } else {\n        while (i < parallelUploads) {\n          if (!queuedFiles.length) {\n            return;\n          }\n          this.processFile(queuedFiles.shift());\n          i++;\n        }\n      }\n    };\n\n    Dropzone.prototype.processFile = function(file) {\n      return this.processFiles([file]);\n    };\n\n    Dropzone.prototype.processFiles = function(files) {\n      var file, _i, _len;\n      for (_i = 0, _len = files.length; _i < _len; _i++) {\n        file = files[_i];\n        file.processing = true;\n        file.status = Dropzone.UPLOADING;\n        this.emit(\"processing\", file);\n      }\n      if (this.options.uploadMultiple) {\n        this.emit(\"processingmultiple\", files);\n      }\n      return this.uploadFiles(files);\n    };\n\n    Dropzone.prototype._getFilesWithXhr = function(xhr) {\n      var file, files;\n      return files = (function() {\n        var _i, _len, _ref, _results;\n        _ref = this.files;\n        _results = [];\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          file = _ref[_i];\n          if (file.xhr === xhr) {\n            _results.push(file);\n          }\n        }\n        return _results;\n      }).call(this);\n    };\n\n    Dropzone.prototype.cancelUpload = function(file) {\n      var groupedFile, groupedFiles, _i, _j, _len, _len1, _ref;\n      if (file.status === Dropzone.UPLOADING) {\n        groupedFiles = this._getFilesWithXhr(file.xhr);\n        for (_i = 0, _len = groupedFiles.length; _i < _len; _i++) {\n          groupedFile = groupedFiles[_i];\n          groupedFile.status = Dropzone.CANCELED;\n        }\n        file.xhr.abort();\n        for (_j = 0, _len1 = groupedFiles.length; _j < _len1; _j++) {\n          groupedFile = groupedFiles[_j];\n          this.emit(\"canceled\", groupedFile);\n        }\n        if (this.options.uploadMultiple) {\n          this.emit(\"canceledmultiple\", groupedFiles);\n        }\n      } else if ((_ref = file.status) === Dropzone.ADDED || _ref === Dropzone.QUEUED) {\n        file.status = Dropzone.CANCELED;\n        this.emit(\"canceled\", file);\n        if (this.options.uploadMultiple) {\n          this.emit(\"canceledmultiple\", [file]);\n        }\n      }\n      if (this.options.autoProcessQueue) {\n        return this.processQueue();\n      }\n    };\n\n    resolveOption = function() {\n      var args, option;\n      option = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n      if (typeof option === 'function') {\n        return option.apply(this, args);\n      }\n      return option;\n    };\n\n    Dropzone.prototype.uploadFile = function(file) {\n      return this.uploadFiles([file]);\n    };\n\n    Dropzone.prototype.uploadFiles = function(files) {\n      var file, formData, handleError, headerName, headerValue, headers, i, input, inputName, inputType, key, method, option, progressObj, response, updateProgress, url, value, xhr, _i, _j, _k, _l, _len, _len1, _len2, _len3, _m, _ref, _ref1, _ref2, _ref3, _ref4, _ref5;\n      xhr = new XMLHttpRequest();\n      for (_i = 0, _len = files.length; _i < _len; _i++) {\n        file = files[_i];\n        file.xhr = xhr;\n      }\n      method = resolveOption(this.options.method, files);\n      url = resolveOption(this.options.url, files);\n      xhr.open(method, url, true);\n      xhr.withCredentials = !!this.options.withCredentials;\n      response = null;\n      handleError = (function(_this) {\n        return function() {\n          var _j, _len1, _results;\n          _results = [];\n          for (_j = 0, _len1 = files.length; _j < _len1; _j++) {\n            file = files[_j];\n            _results.push(_this._errorProcessing(files, response || _this.options.dictResponseError.replace(\"{{statusCode}}\", xhr.status), xhr));\n          }\n          return _results;\n        };\n      })(this);\n      updateProgress = (function(_this) {\n        return function(e) {\n          var allFilesFinished, progress, _j, _k, _l, _len1, _len2, _len3, _results;\n          if (e != null) {\n            progress = 100 * e.loaded / e.total;\n            for (_j = 0, _len1 = files.length; _j < _len1; _j++) {\n              file = files[_j];\n              file.upload = {\n                progress: progress,\n                total: e.total,\n                bytesSent: e.loaded\n              };\n            }\n          } else {\n            allFilesFinished = true;\n            progress = 100;\n            for (_k = 0, _len2 = files.length; _k < _len2; _k++) {\n              file = files[_k];\n              if (!(file.upload.progress === 100 && file.upload.bytesSent === file.upload.total)) {\n                allFilesFinished = false;\n              }\n              file.upload.progress = progress;\n              file.upload.bytesSent = file.upload.total;\n            }\n            if (allFilesFinished) {\n              return;\n            }\n          }\n          _results = [];\n          for (_l = 0, _len3 = files.length; _l < _len3; _l++) {\n            file = files[_l];\n            _results.push(_this.emit(\"uploadprogress\", file, progress, file.upload.bytesSent));\n          }\n          return _results;\n        };\n      })(this);\n      xhr.onload = (function(_this) {\n        return function(e) {\n          var _ref;\n          if (files[0].status === Dropzone.CANCELED) {\n            return;\n          }\n          if (xhr.readyState !== 4) {\n            return;\n          }\n          response = xhr.responseText;\n          if (xhr.getResponseHeader(\"content-type\") && ~xhr.getResponseHeader(\"content-type\").indexOf(\"application/json\")) {\n            try {\n              response = JSON.parse(response);\n            } catch (_error) {\n              e = _error;\n              response = \"Invalid JSON response from server.\";\n            }\n          }\n          updateProgress();\n          if (!((200 <= (_ref = xhr.status) && _ref < 300))) {\n            return handleError();\n          } else {\n            return _this._finished(files, response, e);\n          }\n        };\n      })(this);\n      xhr.onerror = (function(_this) {\n        return function() {\n          if (files[0].status === Dropzone.CANCELED) {\n            return;\n          }\n          return handleError();\n        };\n      })(this);\n      progressObj = (_ref = xhr.upload) != null ? _ref : xhr;\n      progressObj.onprogress = updateProgress;\n      headers = {\n        \"Accept\": \"application/json\",\n        \"Cache-Control\": \"no-cache\",\n        \"X-Requested-With\": \"XMLHttpRequest\"\n      };\n      if (this.options.headers) {\n        extend(headers, this.options.headers);\n      }\n      for (headerName in headers) {\n        headerValue = headers[headerName];\n        if (headerValue) {\n          xhr.setRequestHeader(headerName, headerValue);\n        }\n      }\n      formData = new FormData();\n      if (this.options.params) {\n        _ref1 = this.options.params;\n        for (key in _ref1) {\n          value = _ref1[key];\n          formData.append(key, value);\n        }\n      }\n      for (_j = 0, _len1 = files.length; _j < _len1; _j++) {\n        file = files[_j];\n        this.emit(\"sending\", file, xhr, formData);\n      }\n      if (this.options.uploadMultiple) {\n        this.emit(\"sendingmultiple\", files, xhr, formData);\n      }\n      if (this.element.tagName === \"FORM\") {\n        _ref2 = this.element.querySelectorAll(\"input, textarea, select, button\");\n        for (_k = 0, _len2 = _ref2.length; _k < _len2; _k++) {\n          input = _ref2[_k];\n          inputName = input.getAttribute(\"name\");\n          inputType = input.getAttribute(\"type\");\n          if (input.tagName === \"SELECT\" && input.hasAttribute(\"multiple\")) {\n            _ref3 = input.options;\n            for (_l = 0, _len3 = _ref3.length; _l < _len3; _l++) {\n              option = _ref3[_l];\n              if (option.selected) {\n                formData.append(inputName, option.value);\n              }\n            }\n          } else if (!inputType || ((_ref4 = inputType.toLowerCase()) !== \"checkbox\" && _ref4 !== \"radio\") || input.checked) {\n            formData.append(inputName, input.value);\n          }\n        }\n      }\n      for (i = _m = 0, _ref5 = files.length - 1; 0 <= _ref5 ? _m <= _ref5 : _m >= _ref5; i = 0 <= _ref5 ? ++_m : --_m) {\n        formData.append(this._getParamName(i), files[i], this._renameFilename(files[i].name));\n      }\n      return this.submitRequest(xhr, formData, files);\n    };\n\n    Dropzone.prototype.submitRequest = function(xhr, formData, files) {\n      return xhr.send(formData);\n    };\n\n    Dropzone.prototype._finished = function(files, responseText, e) {\n      var file, _i, _len;\n      for (_i = 0, _len = files.length; _i < _len; _i++) {\n        file = files[_i];\n        file.status = Dropzone.SUCCESS;\n        this.emit(\"success\", file, responseText, e);\n        this.emit(\"complete\", file);\n      }\n      if (this.options.uploadMultiple) {\n        this.emit(\"successmultiple\", files, responseText, e);\n        this.emit(\"completemultiple\", files);\n      }\n      if (this.options.autoProcessQueue) {\n        return this.processQueue();\n      }\n    };\n\n    Dropzone.prototype._errorProcessing = function(files, message, xhr) {\n      var file, _i, _len;\n      for (_i = 0, _len = files.length; _i < _len; _i++) {\n        file = files[_i];\n        file.status = Dropzone.ERROR;\n        this.emit(\"error\", file, message, xhr);\n        this.emit(\"complete\", file);\n      }\n      if (this.options.uploadMultiple) {\n        this.emit(\"errormultiple\", files, message, xhr);\n        this.emit(\"completemultiple\", files);\n      }\n      if (this.options.autoProcessQueue) {\n        return this.processQueue();\n      }\n    };\n\n    return Dropzone;\n\n  })(Emitter);\n\n  Dropzone.version = \"4.3.0\";\n\n  Dropzone.options = {};\n\n  Dropzone.optionsForElement = function(element) {\n    if (element.getAttribute(\"id\")) {\n      return Dropzone.options[camelize(element.getAttribute(\"id\"))];\n    } else {\n      return void 0;\n    }\n  };\n\n  Dropzone.instances = [];\n\n  Dropzone.forElement = function(element) {\n    if (typeof element === \"string\") {\n      element = document.querySelector(element);\n    }\n    if ((element != null ? element.dropzone : void 0) == null) {\n      throw new Error(\"No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.\");\n    }\n    return element.dropzone;\n  };\n\n  Dropzone.autoDiscover = true;\n\n  Dropzone.discover = function() {\n    var checkElements, dropzone, dropzones, _i, _len, _results;\n    if (document.querySelectorAll) {\n      dropzones = document.querySelectorAll(\".dropzone\");\n    } else {\n      dropzones = [];\n      checkElements = function(elements) {\n        var el, _i, _len, _results;\n        _results = [];\n        for (_i = 0, _len = elements.length; _i < _len; _i++) {\n          el = elements[_i];\n          if (/(^| )dropzone($| )/.test(el.className)) {\n            _results.push(dropzones.push(el));\n          } else {\n            _results.push(void 0);\n          }\n        }\n        return _results;\n      };\n      checkElements(document.getElementsByTagName(\"div\"));\n      checkElements(document.getElementsByTagName(\"form\"));\n    }\n    _results = [];\n    for (_i = 0, _len = dropzones.length; _i < _len; _i++) {\n      dropzone = dropzones[_i];\n      if (Dropzone.optionsForElement(dropzone) !== false) {\n        _results.push(new Dropzone(dropzone));\n      } else {\n        _results.push(void 0);\n      }\n    }\n    return _results;\n  };\n\n  Dropzone.blacklistedBrowsers = [/opera.*Macintosh.*version\\/12/i];\n\n  Dropzone.isBrowserSupported = function() {\n    var capableBrowser, regex, _i, _len, _ref;\n    capableBrowser = true;\n    if (window.File && window.FileReader && window.FileList && window.Blob && window.FormData && document.querySelector) {\n      if (!(\"classList\" in document.createElement(\"a\"))) {\n        capableBrowser = false;\n      } else {\n        _ref = Dropzone.blacklistedBrowsers;\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          regex = _ref[_i];\n          if (regex.test(navigator.userAgent)) {\n            capableBrowser = false;\n            continue;\n          }\n        }\n      }\n    } else {\n      capableBrowser = false;\n    }\n    return capableBrowser;\n  };\n\n  without = function(list, rejectedItem) {\n    var item, _i, _len, _results;\n    _results = [];\n    for (_i = 0, _len = list.length; _i < _len; _i++) {\n      item = list[_i];\n      if (item !== rejectedItem) {\n        _results.push(item);\n      }\n    }\n    return _results;\n  };\n\n  camelize = function(str) {\n    return str.replace(/[\\-_](\\w)/g, function(match) {\n      return match.charAt(1).toUpperCase();\n    });\n  };\n\n  Dropzone.createElement = function(string) {\n    var div;\n    div = document.createElement(\"div\");\n    div.innerHTML = string;\n    return div.childNodes[0];\n  };\n\n  Dropzone.elementInside = function(element, container) {\n    if (element === container) {\n      return true;\n    }\n    while (element = element.parentNode) {\n      if (element === container) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  Dropzone.getElement = function(el, name) {\n    var element;\n    if (typeof el === \"string\") {\n      element = document.querySelector(el);\n    } else if (el.nodeType != null) {\n      element = el;\n    }\n    if (element == null) {\n      throw new Error(\"Invalid `\" + name + \"` option provided. Please provide a CSS selector or a plain HTML element.\");\n    }\n    return element;\n  };\n\n  Dropzone.getElements = function(els, name) {\n    var e, el, elements, _i, _j, _len, _len1, _ref;\n    if (els instanceof Array) {\n      elements = [];\n      try {\n        for (_i = 0, _len = els.length; _i < _len; _i++) {\n          el = els[_i];\n          elements.push(this.getElement(el, name));\n        }\n      } catch (_error) {\n        e = _error;\n        elements = null;\n      }\n    } else if (typeof els === \"string\") {\n      elements = [];\n      _ref = document.querySelectorAll(els);\n      for (_j = 0, _len1 = _ref.length; _j < _len1; _j++) {\n        el = _ref[_j];\n        elements.push(el);\n      }\n    } else if (els.nodeType != null) {\n      elements = [els];\n    }\n    if (!((elements != null) && elements.length)) {\n      throw new Error(\"Invalid `\" + name + \"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.\");\n    }\n    return elements;\n  };\n\n  Dropzone.confirm = function(question, accepted, rejected) {\n    if (window.confirm(question)) {\n      return accepted();\n    } else if (rejected != null) {\n      return rejected();\n    }\n  };\n\n  Dropzone.isValidFile = function(file, acceptedFiles) {\n    var baseMimeType, mimeType, validType, _i, _len;\n    if (!acceptedFiles) {\n      return true;\n    }\n    acceptedFiles = acceptedFiles.split(\",\");\n    mimeType = file.type;\n    baseMimeType = mimeType.replace(/\\/.*$/, \"\");\n    for (_i = 0, _len = acceptedFiles.length; _i < _len; _i++) {\n      validType = acceptedFiles[_i];\n      validType = validType.trim();\n      if (validType.charAt(0) === \".\") {\n        if (file.name.toLowerCase().indexOf(validType.toLowerCase(), file.name.length - validType.length) !== -1) {\n          return true;\n        }\n      } else if (/\\/\\*$/.test(validType)) {\n        if (baseMimeType === validType.replace(/\\/.*$/, \"\")) {\n          return true;\n        }\n      } else {\n        if (mimeType === validType) {\n          return true;\n        }\n      }\n    }\n    return false;\n  };\n\n  if (typeof jQuery !== \"undefined\" && jQuery !== null) {\n    jQuery.fn.dropzone = function(options) {\n      return this.each(function() {\n        return new Dropzone(this, options);\n      });\n    };\n  }\n\n  if (typeof module !== \"undefined\" && module !== null) {\n    module.exports = Dropzone;\n  } else {\n    window.Dropzone = Dropzone;\n  }\n\n  Dropzone.ADDED = \"added\";\n\n  Dropzone.QUEUED = \"queued\";\n\n  Dropzone.ACCEPTED = Dropzone.QUEUED;\n\n  Dropzone.UPLOADING = \"uploading\";\n\n  Dropzone.PROCESSING = Dropzone.UPLOADING;\n\n  Dropzone.CANCELED = \"canceled\";\n\n  Dropzone.ERROR = \"error\";\n\n  Dropzone.SUCCESS = \"success\";\n\n\n  /*\n  \n  Bugfix for iOS 6 and 7\n  Source: http://stackoverflow.com/questions/11929099/html5-canvas-drawimage-ratio-bug-ios\n  based on the work of https://github.com/stomita/ios-imagefile-megapixel\n   */\n\n  detectVerticalSquash = function(img) {\n    var alpha, canvas, ctx, data, ey, ih, iw, py, ratio, sy;\n    iw = img.naturalWidth;\n    ih = img.naturalHeight;\n    canvas = document.createElement(\"canvas\");\n    canvas.width = 1;\n    canvas.height = ih;\n    ctx = canvas.getContext(\"2d\");\n    ctx.drawImage(img, 0, 0);\n    data = ctx.getImageData(0, 0, 1, ih).data;\n    sy = 0;\n    ey = ih;\n    py = ih;\n    while (py > sy) {\n      alpha = data[(py - 1) * 4 + 3];\n      if (alpha === 0) {\n        ey = py;\n      } else {\n        sy = py;\n      }\n      py = (ey + sy) >> 1;\n    }\n    ratio = py / ih;\n    if (ratio === 0) {\n      return 1;\n    } else {\n      return ratio;\n    }\n  };\n\n  drawImageIOSFix = function(ctx, img, sx, sy, sw, sh, dx, dy, dw, dh) {\n    var vertSquashRatio;\n    vertSquashRatio = detectVerticalSquash(img);\n    return ctx.drawImage(img, sx, sy, sw, sh, dx, dy, dw, dh / vertSquashRatio);\n  };\n\n\n  /*\n   * contentloaded.js\n   *\n   * Author: Diego Perini (diego.perini at gmail.com)\n   * Summary: cross-browser wrapper for DOMContentLoaded\n   * Updated: 20101020\n   * License: MIT\n   * Version: 1.2\n   *\n   * URL:\n   * http://javascript.nwbox.com/ContentLoaded/\n   * http://javascript.nwbox.com/ContentLoaded/MIT-LICENSE\n   */\n\n  contentLoaded = function(win, fn) {\n    var add, doc, done, init, poll, pre, rem, root, top;\n    done = false;\n    top = true;\n    doc = win.document;\n    root = doc.documentElement;\n    add = (doc.addEventListener ? \"addEventListener\" : \"attachEvent\");\n    rem = (doc.addEventListener ? \"removeEventListener\" : \"detachEvent\");\n    pre = (doc.addEventListener ? \"\" : \"on\");\n    init = function(e) {\n      if (e.type === \"readystatechange\" && doc.readyState !== \"complete\") {\n        return;\n      }\n      (e.type === \"load\" ? win : doc)[rem](pre + e.type, init, false);\n      if (!done && (done = true)) {\n        return fn.call(win, e.type || e);\n      }\n    };\n    poll = function() {\n      var e;\n      try {\n        root.doScroll(\"left\");\n      } catch (_error) {\n        e = _error;\n        setTimeout(poll, 50);\n        return;\n      }\n      return init(\"poll\");\n    };\n    if (doc.readyState !== \"complete\") {\n      if (doc.createEventObject && root.doScroll) {\n        try {\n          top = !win.frameElement;\n        } catch (_error) {}\n        if (top) {\n          poll();\n        }\n      }\n      doc[add](pre + \"DOMContentLoaded\", init, false);\n      doc[add](pre + \"readystatechange\", init, false);\n      return win[add](pre + \"load\", init, false);\n    }\n  };\n\n  Dropzone._autoDiscoverFunction = function() {\n    if (Dropzone.autoDiscover) {\n      return Dropzone.discover();\n    }\n  };\n\n  contentLoaded(window, Dropzone._autoDiscoverFunction);\n\n}).call(this);\n\n},{}],21:[function(require,module,exports){\n\"use strict\";\n\nvar repeat = function repeat(str, times) {\n  return new Array(times + 1).join(str);\n};\nvar pad = function pad(num, maxLength) {\n  return repeat(\"0\", maxLength - num.toString().length) + num;\n};\nvar formatTime = function formatTime(time) {\n  return \"@ \" + pad(time.getHours(), 2) + \":\" + pad(time.getMinutes(), 2) + \":\" + pad(time.getSeconds(), 2) + \".\" + pad(time.getMilliseconds(), 3);\n};\n\n// Use the new performance api to get better precision if available\nvar timer = typeof performance !== \"undefined\" && typeof performance.now === \"function\" ? performance : Date;\n\n/**\n * Creates logger with followed options\n *\n * @namespace\n * @property {object} options - options for logger\n * @property {string} options.level - console[level]\n * @property {boolean} options.duration - print duration of each action?\n * @property {boolean} options.timestamp - print timestamp with each action?\n * @property {object} options.colors - custom colors\n * @property {object} options.logger - implementation of the `console` API\n * @property {boolean} options.logErrors - should errors in action execution be caught, logged, and re-thrown?\n * @property {boolean} options.collapsed - is group collapsed?\n * @property {boolean} options.predicate - condition which resolves logger behavior\n * @property {function} options.stateTransformer - transform state before print\n * @property {function} options.actionTransformer - transform action before print\n * @property {function} options.errorTransformer - transform error before print\n */\n\nfunction createLogger() {\n  var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n  var _options$level = options.level;\n  var level = _options$level === undefined ? \"log\" : _options$level;\n  var _options$logger = options.logger;\n  var logger = _options$logger === undefined ? console : _options$logger;\n  var _options$logErrors = options.logErrors;\n  var logErrors = _options$logErrors === undefined ? true : _options$logErrors;\n  var collapsed = options.collapsed;\n  var predicate = options.predicate;\n  var _options$duration = options.duration;\n  var duration = _options$duration === undefined ? false : _options$duration;\n  var _options$timestamp = options.timestamp;\n  var timestamp = _options$timestamp === undefined ? true : _options$timestamp;\n  var transformer = options.transformer;\n  var _options$stateTransfo = options.stateTransformer;\n  var // deprecated\n  stateTransformer = _options$stateTransfo === undefined ? function (state) {\n    return state;\n  } : _options$stateTransfo;\n  var _options$actionTransf = options.actionTransformer;\n  var actionTransformer = _options$actionTransf === undefined ? function (actn) {\n    return actn;\n  } : _options$actionTransf;\n  var _options$errorTransfo = options.errorTransformer;\n  var errorTransformer = _options$errorTransfo === undefined ? function (error) {\n    return error;\n  } : _options$errorTransfo;\n  var _options$colors = options.colors;\n  var colors = _options$colors === undefined ? {\n    title: function title() {\n      return \"#000000\";\n    },\n    prevState: function prevState() {\n      return \"#9E9E9E\";\n    },\n    action: function action() {\n      return \"#03A9F4\";\n    },\n    nextState: function nextState() {\n      return \"#4CAF50\";\n    },\n    error: function error() {\n      return \"#F20404\";\n    }\n  } : _options$colors;\n\n  // exit if console undefined\n\n  if (typeof logger === \"undefined\") {\n    return function () {\n      return function (next) {\n        return function (action) {\n          return next(action);\n        };\n      };\n    };\n  }\n\n  if (transformer) {\n    console.error(\"Option 'transformer' is deprecated, use stateTransformer instead\");\n  }\n\n  var logBuffer = [];\n  function printBuffer() {\n    logBuffer.forEach(function (logEntry, key) {\n      var started = logEntry.started;\n      var startedTime = logEntry.startedTime;\n      var action = logEntry.action;\n      var prevState = logEntry.prevState;\n      var error = logEntry.error;\n      var took = logEntry.took;\n      var nextState = logEntry.nextState;\n\n      var nextEntry = logBuffer[key + 1];\n      if (nextEntry) {\n        nextState = nextEntry.prevState;\n        took = nextEntry.started - started;\n      }\n      // message\n      var formattedAction = actionTransformer(action);\n      var isCollapsed = typeof collapsed === \"function\" ? collapsed(function () {\n        return nextState;\n      }, action) : collapsed;\n\n      var formattedTime = formatTime(startedTime);\n      var titleCSS = colors.title ? \"color: \" + colors.title(formattedAction) + \";\" : null;\n      var title = \"action \" + (timestamp ? formattedTime : \"\") + \" \" + formattedAction.type + \" \" + (duration ? \"(in \" + took.toFixed(2) + \" ms)\" : \"\");\n\n      // render\n      try {\n        if (isCollapsed) {\n          if (colors.title) logger.groupCollapsed(\"%c \" + title, titleCSS);else logger.groupCollapsed(title);\n        } else {\n          if (colors.title) logger.group(\"%c \" + title, titleCSS);else logger.group(title);\n        }\n      } catch (e) {\n        logger.log(title);\n      }\n\n      if (colors.prevState) logger[level](\"%c prev state\", \"color: \" + colors.prevState(prevState) + \"; font-weight: bold\", prevState);else logger[level](\"prev state\", prevState);\n\n      if (colors.action) logger[level](\"%c action\", \"color: \" + colors.action(formattedAction) + \"; font-weight: bold\", formattedAction);else logger[level](\"action\", formattedAction);\n\n      if (error) {\n        if (colors.error) logger[level](\"%c error\", \"color: \" + colors.error(error, prevState) + \"; font-weight: bold\", error);else logger[level](\"error\", error);\n      }\n\n      if (colors.nextState) logger[level](\"%c next state\", \"color: \" + colors.nextState(nextState) + \"; font-weight: bold\", nextState);else logger[level](\"next state\", nextState);\n\n      try {\n        logger.groupEnd();\n      } catch (e) {\n        logger.log(\" log end \");\n      }\n    });\n    logBuffer.length = 0;\n  }\n\n  return function (_ref) {\n    var getState = _ref.getState;\n    return function (next) {\n      return function (action) {\n        // exit early if predicate function returns false\n        if (typeof predicate === \"function\" && !predicate(getState, action)) {\n          return next(action);\n        }\n\n        var logEntry = {};\n        logBuffer.push(logEntry);\n\n        logEntry.started = timer.now();\n        logEntry.startedTime = new Date();\n        logEntry.prevState = stateTransformer(getState());\n        logEntry.action = action;\n\n        var returnedValue = undefined;\n        if (logErrors) {\n          try {\n            returnedValue = next(action);\n          } catch (e) {\n            logEntry.error = errorTransformer(e);\n          }\n        } else {\n          returnedValue = next(action);\n        }\n\n        logEntry.took = timer.now() - logEntry.started;\n        logEntry.nextState = stateTransformer(getState());\n\n        printBuffer();\n\n        if (logEntry.error) throw logEntry.error;\n        return returnedValue;\n      };\n    };\n  };\n}\n\nmodule.exports = createLogger;\n},{}]},{},[1]);\n"],"sourceRoot":"/source/"}